




	
		
	
	
			


	
			
			
	
	
	
	












	
		
	
	
			


	
			
			
	
	
	
	
























	
		
	
	
			


	
			
			
	
	
	
	













	
		
	
	
			


	
			
			
	
	
	
	








	
        
    

    

    

    

    <!-- Content annotation process successful -->
    

    

    
        
    
    

    

    
        
        
        
        
            
        
    

    
    
    
        
        
    

    
    
    
    
    
    






	
		
	
	
			


	
			
			
	
	
	
	











	    	
	    
		
		
		




	
		
	
	
			


	
			
			
	
	
	
	












	
		
	
	
			


	
			
			
	
	
	
	







<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">






	
		
	
	
			


	
			
			
	
	
	
	

















	
		
	
	
			


	
			
			
	
	
	
	















	
		
	
	
			


	
			
			
	
	
	
	















	
		
	
	
			


	
			
			
	
	
	
	















	
		
	
	
			


	
			
			
	
	
	
	










	
	
		
	









	
		
	
	
			


	
			
			
	
	
	
	












	
		
	
	
			


	
			
			
	
	
	
	












	
    
    
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
		
		
			
				
					
					
					
						
						
					
					
				
			
		
		
	






	
		
	
	
			


	
			
			
	
	
	
	






<html xmlns="http://www.w3.org/1999/xhtml" class="no-js" xml:lang="en-US" lang="en-US">






	
		
	
	
			


	
			
			
	
	
	
	









<head>
	<title>Home | Gap</title>
	




	
		
	
	
			


	
			
			
	
	
	
	






<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta http-equiv="Content-Language" content="en-US"/>
<meta http-equiv="Content-Style-Type" content="text/css" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />

<meta name="robots" content="noodp,noydir" />

	
	
        <meta name="description" content="There's more at Gap.com including Petites and Tall sizes, kids slim and husky sizes, and baby bedding. You'll also find your favorite T-shirts, jeans, shirts, outerwear and accessories. Gap has everything you need for the season"/>
	


	
	
	
	
	<link rel="shortcut icon" href="/favicon.ico" />
	<link rel="icon" href="/favicon.ico" />
	<link rel="apple-touch-icon" sizes="144x144" href="/assets/common/apple-touch-icon-144x144.png" />	
	<link rel="apple-touch-icon" sizes="114x114" href="/assets/common/apple-touch-icon-114x114.png" />
	<link rel="apple-touch-icon" sizes="72x72" href="/assets/common/apple-touch-icon-72x72.png" />
	<link rel="apple-touch-icon" sizes="57x57" href="/assets/common/apple-touch-icon-57x57.png" />
	<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/assets/common/apple-touch-icon-144x144-precomposed.png" />	
	<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/assets/common/apple-touch-icon-114x114-precomposed.png" />
	<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/assets/common/apple-touch-icon-72x72-precomposed.png" />
	<link rel="apple-touch-icon-precomposed" sizes="57x57" href="/assets/common/apple-touch-icon-57x57-precomposed.png" />
	
	




	
		
	
	
			


	
			
			
	
	
	
	









    
    
        <link rel="stylesheet" type="text/css" media="screen, print" href="/gzip_886835083/optimizedBundles/globalOptimized.css" />

    















    <style type="text/css">
    .universalButtonSprite {
       background: url(/content/0005/771/822/universal_button_sprite.gif) no-repeat top left;
       width: 0px;
     }
    </style>
    <link rel="stylesheet" type="text/css" href="/content/0005/771/822/universal_button_sprites.css" />



	




	
		
	
	
			


	
			
			
	
	
	
	






<link rel="stylesheet" type="text/css" href="/css/common/layouts/en/nonBrowse.css" />
<link rel="stylesheet" type="text/css" href="/css/customerService/layouts/en/customerService.css" />


<style type="text/css">
	#mainContent {width: 988px; border:0;}
	#mainContentContainer {padding:0px 0px 0px 0px;}
	#upperFoot #upperLtFootContainer {width: 604px;}
</style>	

	




	
		
	
	
			


	
			
			
	
	
	
	






<link rel="stylesheet" type="text/css" href="/css/customerService/landing/en/landing.css" />
	<style type="text/css" title="styles" media="screen">
			




	
		
	
	
			


	
			
			
	
	
	
	






	

	
	
	

	
	
	
	
			
	
		
	
		
					
			
		   
			
		
	
	</style>

	




	
		
	
	
			


	
			
			
	
	
	
	







  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no" />



  <!--[if (lt IE 9) & (!IEMobile)]>

        <link href="/static_content/css/font-system-demo_no-mq_common-fafc727b56.css" rel="stylesheet">
        <![endif]-->

  <!--[if (IE 9) & (!IEMobile)]>

    <link href="/static_content/css/blessedCSS/meta_common.css" rel="stylesheet">
  <![endif]-->


  <!--[if (gt IE 9) | (IEMobile)]><!-->

        <link href="/static_content/css/font-system-demo_common-637ccfc230.css" rel="stylesheet">
        <!--<![endif]-->


<script>
/*! grunt-grunticon Stylesheet Loader - v2.1.3 | https://github.com/filamentgroup/grunticon | (c) 2015 Scott Jehl, Filament Group, Inc. | MIT license. */
(function(e){function t(t,n,r,o){"use strict";function a(){for(var e,n=0;u.length>n;n++)u[n].href&&u[n].href.indexOf(t)>-1&&(e=!0);e?i.media=r||"all":setTimeout(a)}var i=e.document.createElement("link"),l=n||e.document.getElementsByTagName("script")[0],u=e.document.styleSheets;return i.rel="stylesheet",i.href=t,i.media="only x",i.onload=o||null,l.parentNode.insertBefore(i,l),a(),i}var n=function(r,o){"use strict";if(r&&3===r.length){var a=e.navigator,i=e.Image,l=!(!document.createElementNS||!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect||!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1")||e.opera&&-1===a.userAgent.indexOf("Chrome")||-1!==a.userAgent.indexOf("Series40")),u=new i;u.onerror=function(){n.method="png",n.href=r[2],t(r[2])},u.onload=function(){var e=1===u.width&&1===u.height,a=r[e&&l?0:e?1:2];n.method=e&&l?"svg":e?"datapng":"png",n.href=a,t(a,null,null,o)},u.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",document.documentElement.className+=" grunticon"}};n.loadCSS=t,e.grunticon=n})(this);(function(e,t){"use strict";var n=t.document,r="grunticon:",o=function(e){if(n.attachEvent?"complete"===n.readyState:"loading"!==n.readyState)e();else{var t=!1;n.addEventListener("readystatechange",function(){t||(t=!0,e())},!1)}},a=function(e){return t.document.querySelector('link[href$="'+e+'"]')},c=function(e){var t,n,o,a,c,i,u={};if(t=e.sheet,!t)return u;n=t.cssRules?t.cssRules:t.rules;for(var l=0;n.length>l;l++)o=n[l].cssText,a=r+n[l].selectorText,c=o.split(");")[0].match(/US\-ASCII\,([^"']+)/),c&&c[1]&&(i=decodeURIComponent(c[1]),u[a]=i);return u},i=function(e){var t,o,a;o="data-grunticon-embed";for(var c in e){a=c.slice(r.length);try{t=n.querySelectorAll(a+"["+o+"]")}catch(i){continue}if(t.length)for(var u=0;t.length>u;u++)t[u].innerHTML=e[c],t[u].style.backgroundImage="none",t[u].removeAttribute(o)}return t},u=function(t){"svg"===e.method&&o(function(){i(c(a(e.href))),"function"==typeof t&&t()})};e.embedIcons=i,e.getCSS=a,e.getIcons=c,e.ready=o,e.svgLoadedCallback=u,e.embedSVG=u})(grunticon,this);

  // GRUNTICON FOR BRAND LOGS AND ICONS
  // Earlier there were 2 grunticon calls with different svg and fallabck paths - one for logos and another for icons.
  // This was not loading icons in IE 10 and was not loading logos in other browsers.
  // Now there is only one call to grunticon and svg resources in logos directory have been moved ot icons.
  // And prefix of all class names corresponding to moved files have been changed from 'logo-' to 'icon-'.
  gap = window.gap || {};
  gap.grunticons = { iconsSvgCssPath: "/static_content/grunticon/icons/icons.data.svg-5a56e66a0d.css" };
  grunticon([gap.grunticons.iconsSvgCssPath, "/static_content/grunticon/icons/icons.data.png-4c10182961.css", "/static_content/grunticon/icons/icons.fallback-25fbdee72e.css"], grunticon.svgLoadedCallback);
</script>
<noscript>
  <!-- GRUNTICON FOR BRAND LOGS AND ICONS -->
  <link href="/static_content/grunticon/icons/icons.fallback-25fbdee72e.css" rel="stylesheet">
</noscript>





	




	
		
	
	
			


	
			
			
	
	
	
	







<script type="text/javascript">
//<![CDATA[
    var pasRepository = {
        attrNames : null
       };
	// ]]>
</script>



	




	
		
	
	
			


	
			
			
	
	
	
	











	


    










<!-- Ensure that date is always formated for en_US for processing at the JavaScript tier -->



<!-- Reset localeCode to default standard -->




<script type="text/javascript">
//<![CDATA[
	var environmentModelValues = {
    	isLoggingServiceActive: 'false',	
		isReserveInStoreActive: 'true'
    };
 // ]]>
</script>






	
		
	
	
			


	
			
			
	
	
	
	







<script type="text/javascript">
    var resourceBundleValues = {
        strOutOfStockMessageWithSizes : "not available in",
        strOutOfStockWithoutSizes : "not available",
        strQuantityLabel : "select qty",
        strOtherVariants : "also in",
        strColorLabel : "Select",
        strSizeDim1Label : "Select",
        strSizeDim2Label : "Select",
        strBagErrorPrefix : "please select a",
        strBagErrorPrefix2 : "please select an",
        strBagErrorSuffix : "before adding to bag",
        strOnOrderMessage : "on order &#8211; est&#46; ship date&#58;",
        strOnOrderHoverMessage : "on order &#8211;",
        strOnOrderHoverMessageShipDate : "click for ship date",
        strLowInventoryMessage : "low inventory, order now for best selection",
        strProductDetailLink : "more details",
        strSizeChartLink : "size chart",
        strVariantLegalCopy : "prices may vary",
        strIsImported : "Imported.",
        strIsNotImported : "Made in USA.",
        strRegularVariant : "regular",
        strColorOutOfStockLabel : "no longer available",
        strAddToBagAltText : "Select color and size before adding to bag",
        strAddToBagAltTextActive : "Click to add item to bag",
        strAddToBagAltTextOut : "Out of stock",
        strAddToBagAltTextOutfit : "Click to add selected items to bag",
        strinlineBagScreenTextReaderMessage : "Added to bag: #{styleDescription}, color: #{color}, size: #{size}, price: #{subTotal}, quantity: #{quantity}",
        common: {
            monday: "Monday",
            tuesday: "Tuesday",
            wednesday: "Wednesday",
            thursday: "Thursday",
            friday: "Friday",
            saturday: "Saturday",
            sunday: "Sunday",
            january: "January",
            february: "February",
            march: "March",
            april: "April",
            may: "May",
            june: "June",
            july: "July",
            august: "August",
            september: "September",
            october: "October",
            november: "November",
            december: "December",
            regularVariant: "Regular"
        },
        profile: {
        	personalizedMyAccount : "'s account",
        	yourAccount : "Your account",
        	signOut : "Sign out",
        	isRecognizedUser : "Not you?",
        	changeUserMessageTemplate : "(Not #{name}?)",
        	signIn : "Sign in",
        	orderStatus : "Orders and returns",
        	orderStatusV2 : "Order Status",
        	shippingTo : "Shipping to",
        	weak : "Weak",
        	fair : "Fair",
        	good : "Good",
        	strong : "Strong",
        	sameAsUser : "Weak: Same as user",
        	sameAsHint : "Weak: Same as hint",
        	rewards : "Rewards",
        	accountSettings : "Account Settings",
        	haveAnAccount : "Have an account?"      	
        },
        inLineBag :{
            labelColor : "Color",
	        labelSize : "Size",
			labelQuantity : "Qty",
			labelPrice : "Price",
			itemInSingular : "item in",
			itemInPlural : "items in",
			lineItemJp : "???common.universal.lineItem.text.lineItemJp???",
			lineItemBag : "bag",
			yourBag : "your bag",
			addedTo : "Added to",
			inlineBagItemSingular : "item in",
			inlineBagItemPlural : "items in",
	    	inlineBagItemJp : "???common.universal.navigation.TopNavCommon.text.inlineBagItemJp???"
	    },
	    discounts :{
	    	rewardMessage : "Redeem Your <div id='ribbon'><div id='ribbonAmount'>$#{rewardValue}</div></div> in Rewards",
	    	offersAndRewardsMessage : "<div id='ribbonOffersAndRewards'><div id='ribbonAmountOffersAndRewards'>$#{rewardValue}</div></div>"
		},
        product : {
	        groupNameOverview : "overview",
	        groupNameTips : "tips",
	        groupNameFabric : "fabric & care",
	        groupNameFit : "fit & sizing",
	        groupNameDefault : "fit & sizing",
	        productImage : "product image",
	        productColor : "color",
	        thumbnail : "thumbnail",
	        productText : "product",
	        outfitView : "Outfit View",
	        closeQuicklook : "close quicklook",
	        additionalView : "Additional View",
	        sizeChart : "Size Chart",
	        colorAndSizeSelectError : "Select color and size before adding to bag",
	        sizeTabText : "Size & Color",
	        overviewTabText : "Overview",
	        imageText : "image"
         },
       	infoPopupsAltTextClose : "Close",
       	checkOut : {
       		noGiftWrapText : "No gift wrap",
       		promotionDetailsText : "Promotion Details",
       		shoppingBagCountText: "<span>Your Shopping Bag</span>: #{count} item</span>",
       		shoppingBagCountPluralText: "<span>Your Shopping Bag</span>: #{count} items</span>"
       	},
       	currency : "$",
       	localeFrenchCanada: "fr_CA",
       	localeEnglishCanada: "en_CA",
       	courrencyCode : "USD",
       	priceSuffix : ".00",
       	intlShipSiteRedirectContent : {
           	ca : {
		        siteSelectorLabel : "Shop the Canada site",           	 
		        contentMessage1 : "Free shipping on orders of $50 or more",           	 
		        contentMessage2 : "All orders, all the time",           	 
		        contentMessage3 : "No duties. No handling fees. No kidding.",           	 
		        calloutMessage : "Selecting this option redirects you to the Canadian site."
       		},
       		gb : {
		        siteSelectorLabel : "Shop the EU site",           	 
		        contentMessage1 : "Delivery Simplified: Â£4 ",           	 
		        contentMessage2 : "Returns are Free",           	 
		        contentMessage3 : "2 Stores, 1 Checkout",           	 
		        calloutMessage : "Selecting this option redirects you to our EU site."
       		}           				               	 
       	},
       	brand : {
       		brandUrl1 : "gap.com",
       		brandUrl2 : "bananarepublic.com",
       		brandUrl3 : "oldnavy.com",
       		brandUrl4 : "piperlime.com",
       		brandUrl10 : "athleta.com",
       		brandUrl7 : "gapcanada.ca",
       		brandUrl8 : "bananarepublic.ca",
       		brandUrl9 : "oldnavy.ca",
       		brandUrl20 : "gap.co.uk",
       		brandUrl21 : "bananarepublic.co.uk",
       		brandUrl24 : "gap.co.jp",
       		brandUrl25 : "bananarepublic.co.jp",
       		brandUrl28 : "gap.eu",
       		brandUrl29 : "bananarepublic.eu",
       		brandUrl34 : "gapfactory.com",
       		brandUrl35 : "bananarepublicfactory.com"
       	}
       	,
       	storeLocations : {
       		fistTitle : "Find In Store",
       		storesWithin : "Stores within",
       		storesWithin2 : "",	
       		milesOf : "miles of",	
       		milesOfWrapped : "miles of",	
       		locNotFound : "Check stores near you for this product.",	
       		edit : "Edit",
            continueBTN : "Continue",   
            validateUsCanMsg : "Please enter a valid ZIP code",  
            limited : "Limited",
            available : "Available",
            unavailable : "Unavailable",
            sortBy : "Sort by",
            headerStores : "Stores",
            headerHours :  "Hours",
            headerDistance : "Distance",
            headerAvailability : "Availability",
            legalLink : "???common.universal.storeLocations.list.legalLink???",
            phoneLabel : "Phone",
            weekdayHoursLabel : "Store Hours",
            hoursTodayLabel : "Hours Today:",
            specialHoursLabel : "Special Hours",
            updatedAvailability : "(updated every 20-30 minutes)"
       	},
        storeLocator : {
            mapDirectionsMsg : "Enter address, city or ZIP code",
            findAStore : "Find a store near",
            clearSearch : "Clear",
            findStores : "Find",
            storeDetails : "Store Detail",
            getDirections : "Get Directions",
            mapsApiLoadFailMsg : "We are sorry Google Maps did not load. Please try again.",
            noStoresFoundMsg : "Sorry, we have no stores that fit your search criteria. <br/> Please change your search and try again.",
            legalPleaseNote:  "PLEASE NOTE: Product location information is updated every 20-30 minutes.",
            legalText:  "In-store prices may vary and may differ from online prices.",

            onlyAvailableOnline : "This item is not currently available in stores.",
            selectASize : "Please select a size above to see store availability.",
            noStoresInList : "Sorry, we have no stores that fit your search criteria. Please edit your search above to try again.",
            unavailableInStores: "Sorry, your selection is currently unavailable in the stores. Please change your selection and try again.",
            postalCodeEditTitle: "Check store availability",
            milesOfPcode : "miles of ZIP code",   
			within: "within",
            storePricesVary: "store prices may vary",
            limitedBubble:  "Before you visit the store, please call to make sure this item is still in stock. A sales associate can put it on hold for you.",
            limitedBubbleReservable:  "To ensure availability, click the &quot;Reserve in Store&quot; button to have a sales associate look for the item and hold it for you.",
            unitOfMeasure: "miles",
            fisCheckStoreAvailability: "Click &quot;Find In Store&quot; to check store availability",
            checkStoreAvailability: "check store availability",
            select: "select"
        },
        reserveInStore: {
        	featureButtonLabel: "Reserve In Store",
            baseTitle: "Reserve In Store at",
            required: "Required",
        	needInfoHeader: "We need a little info to reserve this item",
        	emailMessage: "We'll email you as soon as we locate your item,<br/>usually in about an hour",
        	firstNameLabel: "First Name",
        	lastNameLabel: "Last Name",
        	emailLabel: "Email",
        	textMessage: "Should we text you, too? (optional)",
			optInMessage: "Sign up for our emails to get first dibs on new arrivals, can't-miss deals and more.",
        	specialHandling: "Is this a gift, Gap?",
        	mobileNumberLabel: "Mobile number",
        	includeAreaCode: "Include area code",
        	dataRatesMessage: "Data rates may apply",
        	reserveButtonLabel: "Reserve",
        	buttonSeperator: "or",
        	cancelButtonLabel: "Cancel",
        	legalMessage: "Used only to contact you about your request.",
        	firstNameError: "Please provide your first name",
        	lastNameError: "Please provide your last name",
        	emailError: "Type a valid email address",
        	mobileNumberError: "Type a valid mobile phone number",
        	thanksHeaderLine1MinusName: "Thanks, #{NAME}!",
        	thanksOpenHeaderLine2: "We'll look for your item now",
        	thanksClosedHeaderLine2: "We'll look for your item when the store opens",
        	risCloserOpen: "It's that easy!",
        	risCloserClosed: "We'll be in touch again soon!",
			risInfoBodyOpen1: "In about an hour, we'll send you an email to confirm that your item is ready. (We'll text you, too, if you chose that option.)",
			risInfoBodyOpen2: "Check the email for where to pick up your item in the store.",
			risInfoBodyOpen3: "We'll hold your item until closing time,",
			risInfoBodyClosed1: "The store is currently closed.  As soon as it opens, we'll look for your item.",
			risInfoBodyClosed2: "After we find it, we'll send you an email to confirm that the item is ready for you&#151; usually within an hour of opening. (We'll text you, too, if you chose that option.)",
			risInfoBodyClosed3: "",
			risOpenerOpen: "After we find it:",
			risOpenerClosed: "",
			continueButtonLabel: "Continue Shopping",
			titleRequestReceived: ": Request Received",
			storeSelected: "You've selected this store:",
			storeHours: "Store Hours",
			itemLabel: "Item",
			colorLabel: "Color",
			sizeLabel: "Size",
			priceLabel: "Price",
			storeHoursLabel: "Store Hours:",
			specialHoursLabel: "Special Hours:",
			youveSelected: "You've selected this store:",
			holdMessage: "PLEASE NOTE: You can reserve up to five items per day. After we confirm (by email or text) that the item is ready, we hold it for you until the store closes the following day.",
			tryAnotherStore: "Try another store",
			openClosedServiceFailureHeader2: "We'll look for your item",
			openClosedServiceFailureBody: "After we find it, we'll send you an email to confirm that the item is ready for you. (We'll text you, too, if you chose that option.)",
			reservationRequestFailureHeader: "Technical Difficulties",
			reservationRequestFailureBody: "We are currently experiencing technical difficulties. Please try again later or call us for assistance.",
			
			overCapacityTitleExtension: ": Request not completed",
			overCapacityHeaderLine1: "We're sorry, this store is",
			overCapacityHeaderLine2: "over its daily reservation limit.",
			overCapacityOpener: "You can try the following:",
			overCapacityInfoBody1: "Reserve this item today at <a href='' id='risAnotherStore'>another nearby store</a>.",
			overCapacityInfoBody2: "Call the <a href='/customerService/store.do?storeid=#{storeId}'>#{storeName}</a> store at #{phoneNumber} directly to reserve your item.",
			overCapacityInfoBody3: "Reserve this item tomorrow at <a href='/customerService/store.do?storeid=#{storeId}'>#{storeName}</a>.",
			overCapacityCloser: "We apologize for the inconvenience."
        }
        
       	

    };
</script>



<script type="text/javascript">
    var isClientStateManagementActive = "true";
</script>

<script type="text/javascript">
	/**
	 * GIDBrandSiteConstructor is a class that is a data store for sister GID site data.
	 * Instantiated as gidBrandSiteConstruct in JsGlobalFunctions.jsp by a method in NavLogicTag.java
	 * @constructor
	 *
	 * @author Byung Kim
	 * @date 10/24/2007
	 */
	function GIDBrandSiteConstructor (
			currentBrandCode,
			cookieDomain,
			currentBrandSiteId,
			sbsViewAllState,
			sitesVisited,
			sbsPreferences,
			sslPrefix,
			isCommonDomainOn,
			renderOnCurrentBrandUrl,
			sisterSiteActionPath,
			gidBrandSites) {
			this.currentBrandCode = currentBrandCode;
			this.cookieDomain  = cookieDomain;
			this.currentBrandSiteId = currentBrandSiteId;
			this.sbsViewAllState = sbsViewAllState;
			this.sbsPreferences = sbsPreferences;
			this.sslPrefix = sslPrefix;
			this.isCommonDomainOn  = isCommonDomainOn;
			this.renderOnCurrentBrandUrl  = renderOnCurrentBrandUrl;
			this.sisterSiteActionPath = sisterSiteActionPath;
			this.hasGIDBrandSites = (gidBrandSites && gidBrandSites.length > 0);
			this.sisterSiteUrlParams = "?isViewAll=" + this.sbsViewAllState + this.sbsPreferences;
			this.tempBrandSites = gidBrandSites;
			this.gidBrandSites = [];
			this.visitedSites = sitesVisited;
	};
	
 	
	var gidBrandSiteConstruct = new GIDBrandSiteConstructor(1, ".gap.com", "GAP", 0, "1", "", "secure-", true,false, "/browse/sistersitelink.do", [{brandName:"gap.com",brandCode:"1",brandDisplayName:"Gap",brandAbbr:"GAP",secureUrl:"https://secure-www.gap.com",unsecureUrl:"http://www.gap.com",imageServiceUrl:""},{brandName:"oldnavy.com",brandCode:"3",brandDisplayName:"Old Navy",brandAbbr:"ON",secureUrl:"https://secure-oldnavy.gap.com",unsecureUrl:"http://oldnavy.gap.com",imageServiceUrl:""},{brandName:"bananarepublic.com",brandCode:"2",brandDisplayName:"Banana Republic",brandAbbr:"BR",secureUrl:"https://secure-bananarepublic.gap.com",unsecureUrl:"http://bananarepublic.gap.com",imageServiceUrl:""},{brandName:"Athleta.com",brandCode:"10",brandDisplayName:"Athleta",brandAbbr:"AT",secureUrl:"https://secure-athleta.gap.com",unsecureUrl:"http://athleta.gap.com",imageServiceUrl:""}]);
	
</script>


	
		
		
			<script type="text/javascript" src="/gzip_948239186/optimizedBundles/globalEnhancedOptimized.js" ></script>

			
			<script type="text/javascript">
				// Activation of the navigationService and associated Managers
				navigationService.model.isActive = ('true' === 'true')
		                || ('true' === 'true')
		                || ('true' === 'true')
		                || ('true' === 'true');
				navigationService.paginationHelper.constants.MAX_PRODUCTS_PER_PAGE = Number('300') || 24;
			</script>
		
	






	
	
		<script src='/gid/js/common/layouts/en/iPad2.js'></script>
		<script type="text/javascript">
		if (navigator.userAgent.indexOf("iPad") != -1) {
			iPadInit();
			if (window.location.pathname.indexOf("/browse/") === 0) {
				window.addEventListener('touchstart', function(evt) { imageLoader.fetch(); }, false);
			}
		}
		</script>
	







	




<script type="text/javascript">
	// <![CDATA[

		Object.extend(brandConst, {

			UNIVERSAL_BUTTON_CONTENT_PATH : "/content/0005/771/822/",
			BRANDED_BUTTON_AND_ASSET_CONTENT_PATH : "/content/0002/444/294/",
			BRAND1_BADGE_CONTENT_PATH : "/content/0001/195/897/",
			BRAND2_BADGE_CONTENT_PATH : "/content/0001/195/955/",
			BRAND3_BADGE_CONTENT_PATH : "/content/0001/195/958/",
			BRAND4_BADGE_CONTENT_PATH : "/content/0008/703/911/",
			BRAND7_BADGE_CONTENT_PATH : "/content/0001/195/897/",
			BRAND8_BADGE_CONTENT_PATH : "/content/0001/195/955/",
			BRAND9_BADGE_CONTENT_PATH : "/content/0001/195/958/",
			BRAND34_BADGE_CONTENT_PATH : "/content/0001/195/897/",
			BRAND35_BADGE_CONTENT_PATH : "/content/0001/195/955/",
			BRAND10_BADGE_CONTENT_PATH : "/content/0008/723/283/",
			BRAND20_BADGE_CONTENT_PATH : "/content/0001/195/897/",
			BRAND21_BADGE_CONTENT_PATH : "/content/0001/195/955/",
			BRAND24_BADGE_CONTENT_PATH : "/content/0001/195/897/",
			BRAND25_BADGE_CONTENT_PATH : "/content/0001/195/955/",
			BRAND28_BADGE_CONTENT_PATH : "/content/0001/195/897/",
			BRAND29_BADGE_CONTENT_PATH : "/content/0001/195/955/",
			
			BRAND_LOCALE : "en_US",
			COUNTRY_NAME_UK : "United Kingdom",
            CATALOG_2_ACTIVE: "",
            INTERNATIONAL_SHIPPING_CURRENCY_CODE: "",
            INTERNATIONAL_SHIPPING_COUNTRY_CODE: "",
            PRODUCT_2_ACTION: "product.do",
            PRODUCTDATA_2_ACTION: "productData.do",
            DIVISION_2_ACTION: "division.do",
            SUBDIVISION_2_ACTION: "subdivision.do",
            HOME_2_ACTION: "home.do",
            DATE_IN_USE: "10/11/2016 02:43 PM",
            PREVIOUS_LOCALE : "en_US",
            
            IS_NAV2_ENABLED: 'false',
            IS_FACET_ENABLED: 'true',
            IS_OPTIMIZED_PRODUCT_PAGE_ACTIVE: 'false' ==  "true"
            
		});

		/** 
		 * Call to setBrandSites must occur AFTER the various brand BADGE_CONTENT_PATH variables are set.
		 * Prior to this call, other brand information will not be available via gidBrandSiteConstruct.  
		 **/
		if (window["gidBrandSiteConstruct"] != undefined) {
			gidBrandSiteConstruct.setBrandSites();
		}
		
	// ]]>
</script>	
	
<!-- reportingServiceType = h -->
<!-- catalogServiceType = 2 -->
<!-- catalogCacheType = 0 -->
<!-- catalogDormantTesting = false -->
<!-- catalogRemoteCacheActive =  -->
<!-- catalogNavigationActive = true -->
<!-- catalogSwatchesActive =  -->
<!-- catalogCategoryActive = true -->
<!-- catalogCategorySearchActive = true -->
<!-- catalogSearchActive = true -->
<!-- catalogMppActive = true -->
<!-- InternationalShippingCurrencyCode =  -->
<!-- InternationalShippingCountryCode=  -->
<!-- InternationalForeignExchangeRate =  -->
<!-- InternationalForeignExchangeRateQuoteId =  -->
<!-- InternationalForeignExchangeRoundUpValue =  -->
<!-- InternationalShippingPremiumPriceValues =  -->
<!-- isProductCategoryFacetedSearchActive = true -->
<!-- searchEnabled = true -->
<!-- isFacetedCategoryActive = true -->
<!-- isFacetedCategorySearchActive = true -->
<!-- brandTemplateServiceActive = true -->
<!-- categoryPageCachingActive = true -->
<!-- isStoreLocationsActive  = true -->
<!-- isMerchLocatorActive  = true -->
<!-- shippingOptionsFeatureActive  = true -->
<!-- isLoggingServiceActive  = false -->
<!-- catalogCategoryFeaturesEnabled  =  -->
<!-- localCacheActive  =  -->
<!-- isLocalCacheDisabled  =  -->
<!-- isPageContentDataActive  = true -->
<!-- isKeywordSearchDrivenByEaskAsk  =  -->

<!-- pageTemplateInfo: pageId: null
			isTileOverrideDefinedFromParameter: false
			isTileOverrideDefinedFromPageContent: false
			isTemplateTileNameDefined: true
			templateTileName (tile definition inserted): gid.customerService.error.info.variant.10000774
			templateTileNameFromPageContent: null
			templateTileNameSuffix: null
			overrideTemplateTileNameFromPageContent: null
			templateTileNameFromParameter: null
			pageMode: default -->

<!-- faceted category white list =  -->
<!-- faceted category black list =  -->
<!-- isSolrEnabled =  -->
<!-- isFaceted = true -->
<!-- isCategorySearchFaceted  = true -->
<!-- isOptimizedProductPageActive  = false -->
<!-- surveyPopupDistribution  =  -->
<!-- isClientStateManagementActive  = true -->

<!-- isMobileProxyActive  =  -->
<!-- pageBreakpoint  = default -->
<!-- enhancedCheckoutActive  = false -->


<script type="text/javascript">
	// <![CDATA[
 	// Output gidConfig property here for s_account:
	reportingService.controller.reportingManager.reportingAccount = "gapproduction,gapgidproduction";
	reportingService.controller.reportingManager.mobileReportingAccount = "gapgapmobile,gapgidmobile";

	(function(reportSuiteJsObjectDefinition) {
		reportingService.controller.reportingManager.brandReportSuites  = reportSuiteJsObjectDefinition || {};
	})({brandSuites:{1:"gapproduction",2:"gapbananaproduction",3:"gapoldnavyproduction",10:"gapathletaproduction"}, globalSuite:"gapgidproduction"});

	(function(reportSuiteJsObjectDefinition) {
		reportingService.controller.reportingManager.brandMobileReportSuites  = reportSuiteJsObjectDefinition || {};
	})({brandSuites:{1:"gapgapmobile",2:"gapbananamobile",3:"gapoldnavymobile",10:"gapathletamobile"}, globalSuite:"gapgidmobile"});
	
	reportingService.controller.reportingManager.currencyType = "USD";
	reportingService.controller.reportingManager.marketSpecificOmnitureUrl =  "metrics.gap.com";
	reportingService.controller.reportingManager.marketSpecificSecureOmnitureUrl =  "securemetrics.gap.com";

	browserService = new BrowserService();
	browserService.controller.managers.mobileBrowserManager.model.isMobileProxyActive =
		'' == 'true';
	browserService.controller.managers.mobileBrowserManager.model.currentBusinessUnitMobileUrl =
		"http://m.gap.com";

	browserService.controller.managers.mobileBrowserManager.model.isMobileBrowserManagerActive =
		"" === "true";
			
	
	browserService.controller.managers.mobileBrowserManager.constants.MOBILE_BROWSERS_TO_REDIRECT = ["iphone","ipod","android:mobile"];
	browserService.controller.init.main();
	

	contentService = new ContentService();

	responsiveService.model.pageBreakpoint = "default";
 	// ]]>
</script>


	
	
		<script type="text/javascript" src="/gid/js/common/layouts/en/pixelManagement/pixelManagementService.js"></script>
	

	
<script type="text/javascript">
// <![CDATA[
	
		
            
	            searchCID = "";
	            with (reportingService.controller.viewManagers.commonViewManager.model) {
					commonCurrentPageName = unUnicode("gp:customerService:Home");
					commonCurrentBusinessId = (searchCID != "" ? searchCID : "");
					commonBrandPrefix = unUnicode("gp");
					commonChannelName = unUnicode("customerService");
					commonCurrentPath = "/cookieFailure";
				}
				
				omni.strCurrentPageName = reportingService.controller.viewManagers.commonViewManager.model.commonCurrentPageName;
				
            
		
		
			var channel=reportingService.controller.viewManagers.commonViewManager.model.commonChannelName;
			if (channel=="home"){
				setCookieVar("omniSessionProducts","strProductsInBag","");
			}
		

	
		
		
			
			
			
				
			
		
		objSearchBox.strDefaultText = 'Keyword / Style #';

		

		
		
		 
			
			
        
        
		RockbridgeSurvey.brandsVisited = "1";
	// ]]>
</script>
<script type="text/javascript">
// <![CDATA[
		
		   if(location.protocol == "http:"){
			  domain = "http://www.gap.com";
			  domain = domain.replace("http://","");
			  index = domain.lastIndexOf (":");
			  if(index > 0){
			  	domain = domain.substring(0,index);
			  }
			  
			  cdDomain = "http://www.gap.com";
			  cdDomain = cdDomain.replace("http://","");
			  index = cdDomain.lastIndexOf (":");
			  if(index > 0){
			  	cdDomain = cdDomain.substring(0,index);
			  }
			  if(location.hostname == cdDomain){
				  deleteDomainCookies(location.hostname,'false');
			  }
			}
		
		
		if (window["personalizationService"] != undefined) {
			with (personalizationService.model) {
				globalShipping.isGlobalShippingActive = "true";
				globalShipping.shippingOptionsActive = "true";
				parentCategoryBusinessCatalogItemId = "";
			}
			personalizationService.controller.init.main();
		}
		
		
		if (window["categoryService"] != undefined) {
			if (window["categoryInfo"] != undefined) {
				categoryService.controller.init.main();
			}
		}
		
		 
		
		if (window["storeLocationsService"] != undefined) {
			storeLocationsService.model.isStoreLocationsServiceActive = "true";
		}
		
 // ]]>	
 </script>	

<script type="text/javascript">
	var _checkoutFlowStateMachine = checkoutFlowStateMachine();
</script>

	




	
		
	
	
			


	
			
			
	
	
	
	






<script type="text/javascript" src="/gid/js/customerService/layouts/en/customerServiceApplicationFunctions.js"></script>



	




	
		
	
	
			


	
			
			
	
	
	
	








<script type="text/javascript" src="/gid/js/common/layouts/en/reporting/viewManagers/errorViewManager.js"></script>

<script type="text/javascript">

    function fireOmni() {
        reportingService.controller.viewManagers['errorViewManager'].controller.getReportRequest(false);
    }

    Event.observe(window,'load', fireOmni);


</script>
	




	
		
	
	
			


	
			
			
	
	
	
	







<!-- @TemplateContentLayout(templateRegionName:"gid.common.siteWide.businessCode.regionTop") -->

<!-- BEGIN - WCD Sitewide Container 1 -->
<!-- BEGIN Content Item File: /content/0012/053/447/cn12053447.html -->


<!-- WCD Shared Code - this codebase is to remain consistent across all market brands -->

<!-- BEGIN: SOASTA Integration for US -->
<script type="text/javascript">
if (location.hostname.indexOf(".gidapps.") == -1) {
  (function(){
    if (window.BOOMR && window.BOOMR.version) { return; }
    var dom,doc,where,iframe = document.createElement("iframe"),win = window;

    function boomerangSaveLoadTime(e) {
      win.BOOMR_onload=(e && e.timeStamp) || new Date().getTime();
    }
    if (win.addEventListener) {
      win.addEventListener("load", boomerangSaveLoadTime, false);
    } else if (win.attachEvent) {
      win.attachEvent("onload", boomerangSaveLoadTime);
    }

    iframe.src = "javascript:void(0)";
    iframe.title = ""; iframe.role = "presentation";
    (iframe.frameElement || iframe).style.cssText = "width:0;height:0;border:0;display:none;";
    where = document.getElementsByTagName("script")[0];
    where.parentNode.insertBefore(iframe, where);

    try {
      doc = iframe.contentWindow.document;
    } catch(e) {
      dom = document.domain;
      iframe.src="javascript:var d=document.open();d.domain='"+dom+"';void(0);";
      doc = iframe.contentWindow.document;
    }
    doc.open()._l = function() {
      var js = this.createElement("script");
      if (dom) { this.domain = dom; }
      js.id = "boomr-if-as";
      js.src = "//c.go-mpulse.net/boomerang/" +
      "DM7TH-XKMCT-F3G64-KM9S3-JE3SV";
      BOOMR_lstart=new Date().getTime();
      this.body.appendChild(js);
    };
    doc.write('<body onload="document._l();">');
    doc.close();
  })();
}

var abTestsSerialized = "";
jQuery(document).on('personalizationData:ready', function() {

  try {
    var tests = personalizationService.model.personalizationData.personalizationInfoV1.featureSelections.Abtests;

    tests.sort(function (a, b){
      var aId = parseInt(a.Id);
      var bId = parseInt(b.Id);
      return ((aId < bId) ? -1 : ((aId > bId) ? 1 : 0));
    });

    tests.each(function(t){
        if (t && t.Id && t.Segment) abTestsSerialized += t.Id + ":" + t.Segment + ",";
    });

  } catch(e) {
    if (console && console.log) console.log(e);
  }

});

</script>
<!-- END: SOASTA Integration for US -->


<!-- WCD Utility Library - shared WCD utility function codebase -->
<script type="text/javascript" src="/Asset_Archive/GPWeb/content/0012/053/447/assets/wcdLib.js?v=4"></script>

<!-- Shared CSS Overrides -->
<style type="text/css">

/*** Chrome map area outline fix ***/
area { outline:none }

/*** jBox CSS ***/
#jbox { overflow:auto; }
#jbox #backdrop { width:100%; height:100%; left:0; background:#000; overflow:auto; opacity:0.75; filter:alpha(opacity = 75); z-index:999; position:fixed; _position:absolute; top:0; _top:expression(eval(document.body.scrollTop)); }
#jbox #box { background:transparent; left:50%; z-index:1000; position:fixed; _position:absolute; top:50%; box-shadow:4px 4px 25px rgba(0, 0, 0, .5); -moz-box-shadow:4px 4px 25px rgba(0,0,0,.5); -webkit-box-shadow:4px 4px 25px rgba(0, 0, 0, .5); border:1px solid #333; }
#jbox #topbar { position:absolute; top:-25px; width:100%; }
#jbox #title { position:absolute; left:0; font-family:Arial, Helvetica, Sans-serif; font-size:14px; color:#fff; }
#jbox #close { position:absolute; right:0; }
#jbox #close a { display:block; color:#fff; text-decoration:none; font-family:Arial, Helvetica, Sans-serif; font-size:14px; }
#jbox #close a:hover { text-decoration:underline; }
#jbox #iframeContainer, #jbox #iframeContainer #iframe { margin:0; padding:0; background:#fff; overflow:hidden; }
#jbox #loading { position:absolute; color:#000; top:15px; left:15px; font-family:Arial, Helvetica, sans-serif; font-size:14px; }
#jbox #loading img { margin-right:10px; }

/*** Global Gateway CSS ***/
/* CSS to hide PL from Intl Shipping popup itself */
#shippingOptions #bg_us_ol { display:none }
/* North America/US case */
#shippingOptions #nativeShippingContainer div, #shippingOptions #globalShippingContainer div { margin:0 0 0 67px }
/* Canada case */
#nativeAndGlobalRegion #regionSpecificGlobal #globalContainer_CA { left:84px }
/* Asia case */
#shippingOptionsBusinessUnitsContainer #globalShippingContainer { left:63px }
/* EU shippable case */
#regionSpecificGlobal #globalContainer #globalUnits { left:58px }
#regionSpecificGlobal #globalContainer #globalUnits #at_us_ol { margin:0 0 0 45px }

/*#shippingOptionsPopUp {z-index:101 !important;}*//*  FIX THE OVERLAPPING OF THE SHIPPING OPTIONS WINDOW WITH THE NEW BRAND BAR */

#shippingOptionsPopUp #regionSpecificNative #currencyForEurope .currencyBritish { font-size:11px }
#shippingOptionsPopUp #regionSpecificNative #currencyForEurope .britishPoundText { font-size:11px }
#shippingOptionsPopUp #regionSpecificGlobal .currency { font-size:11px }

#gatewayBackdrop { background: #000000; width: 100%; height: 100%; overflow: auto; left: 0; opacity: 0.65; filter: alpha(opacity = 65); z-index: 97; position: fixed; _position: absolute; top: 0; _top: expression(eval(document.body.scrollTop)); }

/* CSS fix for CZ/HU selection */
#nativeShippingContainer .gap_eu_ol, #nativeShippingContainer .gap_e2_ol { float:left; width:60px; height:60px }
#nativeShippingContainer .gap_eu_ol a, #nativeShippingContainer .gap_e2_ol a { display:block; float:left; color:#828282; padding-top:48px; text-decoration:none; width:60px; background-image:url("/assets/common/shippingOptions/gap_unselected.png"); background-repeat:no-repeat; text-align:center }
#nativeShippingContainer .gap_eu_ol_Selected, #nativeShippingContainer .gap_e2_ol_Selected { background-image: url("/assets/common/shippingOptions/gap_selected.png") !important; background-repeat:no-repeat }
#nativeShippingContainer .gap_eu_ol_Selected a, #nativeShippingContainer .gap_e2_ol_Selected a { background-image:none }

#nativeShippingContainer .br_eu_ol, #nativeShippingContainer .br_e2_ol { float:left; width:80px; height:60px; margin:0 0 0 52px; }
#nativeShippingContainer .br_eu_ol a, #nativeShippingContainer .br_e2_ol a { display:block; float:left; color:#828282; padding-top:48px; text-decoration:none; width:80px; background-image:url("/assets/common/shippingOptions/br_unselected.png"); background-repeat:no-repeat; background-position:10px 0; text-align:center }
#nativeShippingContainer .br_eu_ol_Selected, #nativeShippingContainer .br_e2_ol_Selected { background-image: url("/assets/common/shippingOptions/br_selected.png") !important; background-repeat:no-repeat; background-position:10px 0 }
#nativeShippingContainer .br_eu_ol_Selected a, #nativeShippingContainer .br_e2_ol_Selected a { background-image:none }

#nativeOrGlobalRegion #nativeShippingContainer { top:59px; left:63px }
#nativeOrGlobalRegion #globalGatewayCurrency .currencyBritish { font-size:11px; color: #828282; font-family: "Helvetica Neue",Helvetica,Arial,sans-serif; height: 22px; bottom: 0; left: 12px; position: absolute; text-align: left; width: 51px; }
#nativeOrGlobalRegion #globalGatewayCurrency .britishPoundText { font-size: 11px; color: #000000; font-family: "Helvetica Neue",Helvetica,Arial,sans-serif; height: 22px; bottom: 0; left: 70px; position: absolute; text-align: left; width: 100px; }

#rollOverNative, #rollOverGlobal { display:none }
</style>

<script type="text/javascript">
///////////////////
// WCD Override Namespaces - stored in jQuery object
// - wcdSharedOverride_ - Shared override - should exist across brands within market
// - wcdBrandOverride[brand]_ - Brand-specific override
///////////////////

// WCD disruptor-fired flag -->
var wcdBrandDisrupterDidFire = false;
</script>

<!-- BEGIN Rewards in Checkout - TO BE RE-WRAPPED; CHECK IF STILL NEEDED WITH PDM -->
<script type="text/javascript">
if( location.pathname == '/checkout/order.do' ) {

jQuery.wcdSharedOverride_rewardsInCheckout = function() {
	jQuery(window).load( function(e) {
		if( jQuery('#summaryRewardReminder').length > 0 ) jQuery('#summaryRewardReminder').show().delay(1);
		if( jQuery('#billingRewardCodeInput').length > 0 ) jQuery('#billingRewardCodeInput').show().delay(1);

		if( window["checkout"] != null && checkout.controller && checkout.controller.modules && checkout.controller.modules.signIn && checkout.controller.modules.signIn.setSignInResponse ) {
			checkout.controller.modules.signIn.setSignInResponse = checkout.controller.modules.signIn.setSignInResponse.wrap( function( om, responseVo ) {
				om( responseVo );
				var signInModuleController = checkout.controller.modules.signIn;
				if( signInModuleController.getModuleCompleteStatus("signIn") == true ) {
					if( jQuery('#summaryRewardReminder').length > 0 ) jQuery('#summaryRewardReminder').show().delay(1);
					if( jQuery('#billingRewardCodeInput').length > 0 ) jQuery('#billingRewardCodeInput').show().delay(1);
				}
			});
		}
	});
}
jQuery.wcdSharedOverride_rewardsInCheckout();

}
</script>
<!-- END Rewards in Checkout - TO BE RE-WRAPPED; CHECK IF STILL NEEDED WITH PDM -->

<!-- BEGIN Gift Card DeValue copy (CNOV-101) -->
<script type="text/javascript">
if( location.pathname == '/checkout/order.do' ) {

jQuery.wcdSharedOverride_giftCardDevalueCopy = function() {
	jQuery(window).load( function(e) {
		jQuery("#billingSummaryInputGiftCardPin, #billingInputGiftCardPin").after("<div id='giftCardCopyAdded' style='margin-left:15px;margin-bottom:15px;color:#736967;font-size: 87.5%;'>Please note: when using multiple gift cards, gift card values will be applied in order of decreasing value.</div>").delay(1);
		jQuery("#billingGiftCardBalanceCardPin").after("<div id='giftCardCopyPopUpAdded' style='margin-top:10px;margin-left:15px;margin-bottom:15px;font-size: 87.5%;'>Please note: when using multiple gift cards, gift card values will be applied in order of decreasing value.</div>").delay(1);
	});
}
jQuery.wcdSharedOverride_giftCardDevalueCopy();

}
</script>
<!-- END Gift Card DeValue copy (CNOV-101) -->

<!-- BEGIN Global Gateway overrides -->
<script type="text/javascript">
if( location.pathname != "/checkout/order.do" ) {

jQuery.wcdSharedOverride_globalGatewayOverrides = {
	model: {
		wcdAssetPath:'/Asset_Archive/GPWeb/content/0012/053/447/assets/',
		showTranslatedExperienceToEU: true,
		businessUnit:'GP_US',
		brandName:'Gap',
		brandURL:'www.gap.com',
		countryCode:'',
		trackingId:'',
		autoPoppedFlag:false,
		wcdRootDomain:'',

		// Which countries launch which intercept - array of coutnry codes
		wcdInterceptCoutnries:['CN','HK','TW'],
		globalGatewayCountries:['AE','AR','AT','AU','BB','BD','BE','BG','BH','BN','BO','BR','CA','CH','CL','CO','CR','CY','CZ','DE','DK','DO','EC','EE','EG','ES','FI','FR','GB','GR','GT','HN','HT','HU','ID','IE','IL','IN','IT','JM','JO','JP','KH','KR','KW','LI','LK','LT','LU','LV','MA','MO','MT','MX','NI','NL','NO','NZ','OM','PA','PE','PH','PK','PL','PT','PY','QA','RO','SA','SE','SG','SI','SK','SV','TH','TR','TT','UK','ZA','BG','HR','PL','RO'],

		// Life of intercept cookie by region
		interceptCookieLife: {
			oneDayCookie: [],
			thirtyDayCookie: ['GLOBAL']
		},

		// Personalization Data check, needed for origin country
		isPersonalizationDataReady:false
	},
	controller: {
		init: function() {
			var model = jQuery.wcdSharedOverride_globalGatewayOverrides.model;
			var controller = jQuery.wcdSharedOverride_globalGatewayOverrides.controller;
			// Set root domain for cookieing
			if( location.hostname.indexOf('.wip.gidapps.com') > -1 ) { model.wcdRootDomain = '.wip.gidapps.com'; }
			else if( location.hostname.indexOf('.app.gidapps.com') > -1 ) { model.wcdRootDomain = '.app.gidapps.com'; }
			else if( location.hostname.indexOf('.gap.com') > -1 ) { model.wcdRootDomain = '.gap.com'; }
			var isSetDontDisplayCookie = gidLib.getCookieVar('mktUniversalPersist','globalInterceptDontShow');
			var isSetSeenAlreadyCookie = gidLib.getCookieVar('mktInterceptPersist','globalInterceptSeenAlready');
			model.countryCode = marketMessageService.requestOriginCountryCode;
			var forceVariable = gidLib.getQuerystringParam('intercept',true);
			// Do NOT show if kwid=1 in URL (biz dev link)
			var isKwidPage = gidLib.getQuerystringParam('kwid',true);

			// Check for valid force parameter and override country code
			if( forceVariable != '' && ( jQuery.inArray( forceVariable, model.wcdInterceptCoutnries ) > -1 || jQuery.inArray( forceVariable, model.globalGatewayCountries ) > -1 ) ) {
				model.countryCode = forceVariable;
			}

			// If gatewayPassed parameter in URL then user just came from a gateway popup so mimic cookie settings and set flag
			var gatewayPassed = gidLib.getQuerystringParam('gatewayPassed',true);
			if( gatewayPassed != '' ) {
				gidLib.setCookieVar( 'mktUniversalPersist', 'globalInterceptDontShow', 'true' );
				gidLib.setCookie( 'mktInterceptPersist', 'globalInterceptSeenAlready=true', gidLib.getFutureDate({'days':'1'}), '/', model.wcdRootDomain );
				isSetDontDisplayCookie = 'true';
				isSetSeenAlreadyCookie = 'true';
			}

			// If on shopping bag/checkout pages, do not auto-launch
			var bagCheckoutDomainCheck = location.pathname;
			if( bagCheckoutDomainCheck.indexOf('/buy/') > -1 || bagCheckoutDomainCheck.indexOf('/checkout/') > -1 ) {
				gidLib.setCookieVar( 'mktUniversalPersist', 'globalInterceptDontShow', 'true' );
				gidLib.setCookie( 'mktInterceptPersist', 'globalInterceptSeenAlready=true', gidLib.getFutureDate({'days':'1'}), '/', model.wcdRootDomain );
				isSetDontDisplayCookie = 'true';
				isSetSeenAlreadyCookie = 'true';
			}

			// Check that 'don't show' cookie has not been set, 'already seen' cookie has not been set and that country code is valid, else launch!
			if( ( isSetDontDisplayCookie == '' && isSetSeenAlreadyCookie == '' && isKwidPage != '1' && ( jQuery.inArray( model.countryCode, model.wcdInterceptCoutnries ) > -1 || jQuery.inArray( model.countryCode, model.globalGatewayCountries ) > -1 ) || forceVariable != '' ) ) {

				// Construct TID
				model.trackingId = model.businessUnit + '_INT_' + model.countryCode;

				if( model.showTranslatedExperienceToEU && jQuery.wcdSharedOverride_globalGatewayTranslator ) {
					jQuery.wcdSharedOverride_globalGatewayTranslator.model.countryCode = model.countryCode;
				}

				// Launch WCD Intercept
				if( jQuery.inArray( model.countryCode, model.wcdInterceptCoutnries ) > -1 ) {
					controller.launchWCDIntercept( model.countryCode, model.trackingId );
				}

				// Launch Global Gateway intercepr
				else if( jQuery.inArray( model.countryCode, model.globalGatewayCountries ) > -1 ) {
					siteNavigation.showShippingOptionsOverlay( true, model.countryCode, model.trackingId, 'notHeavy', true );
				}

				// Set 'already seen' cookie lifespan - 1 or 30 days (Global Gateway countries are 30 days)
				var globalPopupSeenExpireTime;
				if( jQuery.inArray( model.countryCode, model.interceptCookieLife.oneDayCookie ) > -1 ) {
					globalPopupSeenExpireTime = gidLib.getFutureDate({'days':'1'});
				}
				else if( jQuery.inArray( model.countryCode, model.interceptCookieLife.thirtyDayCookie ) > -1 || ( jQuery.inArray( 'GLOBAL', model.interceptCookieLife.thirtyDayCookie ) > -1 && jQuery.inArray( model.countryCode, model.globalGatewayCountries ) > -1 ) ) {
					globalPopupSeenExpireTime = gidLib.getFutureDate({'days':'30'});
				}
				gidLib.setCookieVar( 'mktInterceptPersist', 'globalInterceptSeenAlready', 'true', globalPopupSeenExpireTime );

				// Send data to Omniture
				s.pageName = model.businessUnit.toLowerCase() + ":" + model.countryCode + ":launch_intercept";
				s.tl( this, 'o', model.businessUnit.toLowerCase() + ":" + model.countryCode + ":launch_intercept");
			}
		},

		// Launch WCD intercept - unique layout by applicable country code: CN, HK, TW
		launchWCDIntercept: function( countryCode, trackingId ) {
			var model = jQuery.wcdSharedOverride_globalGatewayOverrides.model;
			var controller = jQuery.wcdSharedOverride_globalGatewayOverrides.controller;

			// Check for CN/HK/TW redirect case
			var cnRedirectCookie = gidLib.getCookieVar('mktUniversalPersist','globalInterceptRememberChoice');
			if( cnRedirectCookie != '' ) {
				if( cnRedirectCookie == 'cn' ) { location.href = 'http://www.gap.cn/'; }
				else if( cnRedirectCookie == 'hk' ) { location.href = 'http://www.gap.hk/'; }
				else if( cnRedirectCookie == 'tw' ) { location.href = 'http://www.gap.tw/'; }
			}
			// Show China/HK/Taiwan intercept
			else if( model.countryCode == 'CN' || model.countryCode == 'HK' || model.countryCode == 'TW' ) {
				gap.UniversalModal.publishModal({
					modalSize: 'standard',
					actionSheet: 'small',
					url: model.wcdAssetPath + model.countryCode.toLowerCase() + 'Intercept_new.html' 
				}); 
			}
		},

		// Process WCD for applicable countries - if in CN/HK/TW and gap.com selected, continue to show WCD intercept
		processWCDIntercept: function( brandLink ) {
			if( jQuery('#wcdInterceptDontShow:checked') && ( brandLink.indexOf('gap.cn') == -1 || brandLink.indexOf('gap.hk') == -1 ) ) {
				gidLib.setCookieVar('mktUniversalPersist','globalInterceptDontShow','true');
			}
			else {
				gidLib.removeCookieVar('mktUniversalPersist','globalInterceptDontShow');
				gidLib.removeCookieVar('mktInterceptPersist','globalInterceptSeenAlready');
			}
		},

		// Add 'save prefs' checkboxes to Global Gateway intercepts
		addSavePrefsCheck: function() {
			var savePrefsStr = '<p style="float:right; width:194px; padding-top:3px">&nbsp;&nbsp;&nbsp;<input type="checkbox" id="savePrefsCheck" style="vertical-align:text-top" /> Save preferences</p>';
			if( jQuery('#shippingOptionsCancelButtons') ) {
			  jQuery('#shippingOptionsCancelButtons').html( jQuery('#shippingOptionsCancelButtons').html() + savePrefsStr );
			  jQuery('#shippingOptionsCancelButtons').css({ 'width':'255px', 'text-align':'left' });
			}
			if( jQuery('#shippingOptionsCurrencySelect') ) {
				jQuery('#shippingOptionsCurrencySelect').css({ 'font-size':'11px' });
			}
			if( jQuery('#shippingOptionsCancelButton') ) {
				jQuery('#shippingOptionsCancelButton').on('click', function() { siteNavigation.closeShippingOptionsOverlay(); });
			}
		}
	}
};

jQuery(document).on('personalizationData:ready', function() {
	jQuery.wcdSharedOverride_globalGatewayOverrides.model.isPersonalizationDataReady = true;
	jQuery.wcdSharedOverride_globalGatewayOverrides.controller.init();
});

// Global Gateway Euro/.co.uk display fix - to be removed with euro site launch -->
if( window["shippingOptionsService"] ) {
	if( shippingOptionsService && shippingOptionsService.view ) {
		if( shippingOptionsService.view.regionAndCountrySelect ) {
			shippingOptionsService.view.regionAndCountrySelect = shippingOptionsService.view.regionAndCountrySelect.wrap( function( om, nativeSize, globalSize ) {
				om( nativeSize, globalSize );
				var euCountryCodeArray = ['AT','BE','CZ','DK','EE','FI','FR','DE','HU','IE','IT','LV','LT','LU','MT','NL','PT','SK','SI','ES','SE','GB','BG','HR','PL','RO'];
				var currentCountry = shippingOptionsService.model.shippingOptionsInfo.requestedShippingCountryCode;
				if( jQuery.inArray( currentCountry, euCountryCodeArray ) > -1 ) {
					if( jQuery('#britishPoundText').length > 0 ) jQuery('#britishPoundText').html('British Pounds');
					if( jQuery('#orderProcessingPounds').length > 0 ) jQuery('#orderProcessingPounds').hide();
				}
			});
		}

		if( shippingOptionsService.view.countrySelected ) {
			shippingOptionsService.view.countrySelected = shippingOptionsService.view.countrySelected.wrap( function( om ) {
				om();
				var euCountryCodeArray = ['AT','BE','CZ','DK','EE','FI','FR','DE','HU','IE','IT','LV','LT','LU','MT','NL','PT','SK','SI','ES','SE','GB','BG','HR','PL','RO'];
				var currentCountry = shippingOptionsService.model.shippingOptionsInfo.requestedShippingCountryCode;
				if( jQuery.inArray( currentCountry, euCountryCodeArray ) > -1 ) {
					if( jQuery('#britishPoundText').length > 0 ) jQuery('#britishPoundText').html('British Pounds');
					if( jQuery('#orderProcessingPounds').length > 0 ) jQuery('#orderProcessingPounds').hide();
				}
			});
		}

		if( shippingOptionsService.view.displayingBusinessUnits ) {
			shippingOptionsService.view.displayingBusinessUnits = shippingOptionsService.view.displayingBusinessUnits.wrap( function( om, container, brnadsInOrder, innerContainer, businessUnitUrls, brandsDotCom, brandDivs ) {
				om( container, brnadsInOrder, innerContainer, businessUnitUrls, brandsDotCom, brandDivs );

				// Update Borderfree to Borderfree
				if( jQuery('#globalInstructionText').length > 0 ) {
					var BorderfreeTxt = jQuery('#globalInstructionText').html();
					BorderfreeTxt = BorderfreeTxt.replace('Borderfree','Borderfree');
					jQuery('#globalInstructionText').html( BorderfreeTxt );
				}
				if( jQuery('#bottomGlobalInstruction').length > 0 ) {
					var BorderfreeTxt = jQuery('#bottomGlobalInstruction').html();
					BorderfreeTxt = BorderfreeTxt.replace('Borderfree','Borderfree');
					jQuery('#bottomGlobalInstruction').html( BorderfreeTxt );
				}

				var euCountryCodeArray = ['AT','BE','CZ','DK','EE','FI','FR','DE','HU','IE','IT','LV','LT','LU','MT','NL','PT','SK','SI','ES','SE','GB','BG','HR','PL','RO'];
				var currentCountry = shippingOptionsService.model.shippingOptionsInfo.requestedShippingCountryCode;

				if( jQuery.inArray( currentCountry, euCountryCodeArray ) > -1 && currentCountry != 'GB' ) {
					if( jQuery('#gap_eu_ol_a').length > 0 && jQuery('#gap_eu_ol_a').html().indexOf('.co.uk') > -1 ) jQuery('#gap_eu_ol_a').html('gap.eu');
					if( jQuery('#br_eu_ol_a').length > 0 && jQuery('#br_eu_ol_a').html().indexOf('.co.uk') > -1 ) jQuery('#br_eu_ol_a').html('bananarepublic.gap.eu');

					if( currentCountry == 'CZ' || currentCountry == 'HU' || currentCountry == 'PL' ) { jQuery('#orderProcessingPoundsCZHU').show(); }

					// Show legal message
					jQuery('#orderProcessingPounds').css({ 'display':'block', 'padding':'0 5px 0 0' });
				}
				else if( currentCountry == 'GB' ) {
					if( jQuery('#gap_eu_ol_a').length > 0 && jQuery('#gap_eu_ol_a').html().indexOf('.eu') > -1 ) jQuery('#gap_eu_ol_a').html('gap.co.uk');
					if( jQuery('#br_eu_ol_a').length > 0 && jQuery('#br_eu_ol_a').html().indexOf('.eu') > -1 ) jQuery('#br_eu_ol_a').html('bananarepublic.gap.co.uk');

					// Hide legal message
					jQuery('#orderProcessingPounds').css('display','none');
				}
				else {
					jQuery('#orderProcessingPounds').css('display','none');
					if( jQuery('#orderProcessingPoundsCZHU').length > 0 ) {
						if( currentCountry == 'CZ' || currentCountry == 'HU' ) { jQuery('#orderProcessingPoundsCZHU').show(); }
						else { jQuery('#orderProcessingPoundsCZHU').hide(); }
					}
				}
			});
		}

		if( shippingOptionsService.view.constructUrlAndAddTid ) {
			shippingOptionsService.view.constructUrlAndAddTid = shippingOptionsService.view.constructUrlAndAddTid.wrap( function( om, url, brandName, domainName ) {
				om( url,brandName,domainName );

				if( shippingOptionsService.model.brandURL.indexOf('.eu') > -1 && shippingOptionsService.model.brandURL.indexOf('tid=') == -1 ) {
					if( shippingOptionsService.model.brandURL.indexOf('bananarepublic.gap.eu')  > -1 || shippingOptionsService.model.brandURL.indexOf('brol.app.gidapps.eu') > -1 || shippingOptionsService.model.brandURL.indexOf('brol.wip.gidapps.eu') > -1 ) {
						shippingOptionsService.model.brandURL = shippingOptionsService.model.brandURL + '/?tid=BRINTLSHIP';
					}
					else if( shippingOptionsService.model.brandURL.indexOf('gap.eu')  > -1 || shippingOptionsService.model.brandURL.indexOf('gol.app.gidapps.eu') > -1 || shippingOptionsService.model.brandURL.indexOf('gol.wip.gidapps.eu') > -1 ) {
						shippingOptionsService.model.brandURL = shippingOptionsService.model.brandURL + '/?tid=GOINTLSHIP';
					}
				}

				// Adjust domain if needed
				var countrySelected = shippingOptionsService.model.shippingOptionsInfo.requestedShippingCountryCode;
				if( countrySelected == 'GB' && shippingOptionsService.model.brandURL.indexOf('.eu') > -1 ) {
					shippingOptionsService.model.brandURL = shippingOptionsService.model.brandURL.replace('.eu','.co.uk');
				}
				else if( countrySelected != 'GB' && shippingOptionsService.model.brandURL.indexOf('.co.uk') > -1 ) {
					shippingOptionsService.model.brandURL = shippingOptionsService.model.brandURL.replace('.co.uk','.eu');
				}

				// Turkey domain adjustment
				if( countrySelected == 'TR' ) {
					shippingOptionsService.model.brandURL = shippingOptionsService.model.brandURL.replace('www.gol.wip.gidapps.eu','www.gap.com.tr').replace('www.gol.app.gidapps.eu','www.gap.com.tr').replace('www.gap.eu','www.gap.com.tr').replace('www.brol.wip.gidapps.eu','bananarepublic.gap.com.tr').replace('www.brol.app.gidapps.eu','bananarepublic.gap.com.tr').replace('bananarepublic.gap.eu','bananarepublic.gap.com.tr');
				}

				// Add 'came through gateway from' and locale URL parameters
				if( jQuery.wcdSharedOverride_globalGatewayOverrides.model.businessUnit != '' ) {
					//var gatewayTracker = gidBrandSiteConstruct.currentBrandSiteId + gidBrandSiteConstruct.cookieDomain.replace('.gap','').replace('.gapcanada','').replace('.wip.gidapps','').replace('.app.gidapps','');
					var gatewayTracker = jQuery.wcdSharedOverride_globalGatewayOverrides.model.businessUnit;
					var gatewayLinkURL = shippingOptionsService.model.brandURL;
					if( gatewayLinkURL.indexOf('?') > -1 ) { gatewayLinkURL = gatewayLinkURL + '&'; }
					else { gatewayLinkURL = gatewayLinkURL + '?'; }
					gatewayLinkURL = gatewayLinkURL + 'gatewayPassed=' + gatewayTracker;

					// Pass locale variable if not English
					//if( jQuery.wcdSharedOverride_globalGatewayTranslator && jQuery.wcdSharedOverride_globalGatewayTranslator.model && jQuery.wcdSharedOverride_globalGatewayTranslator.model.currentLanguage != 'en_GB' ) {
						gatewayLinkURL = gatewayLinkURL + '&preferredLocale=' + jQuery.wcdSharedOverride_globalGatewayTranslator.model.currentLanguage;
					//}

					// Pass country through to other site
					gatewayLinkURL = gatewayLinkURL + '&gatewayCountry=' + countrySelected;

					shippingOptionsService.model.brandURL = gatewayLinkURL;
				}
			});
		}

		if( shippingOptionsService.controller && shippingOptionsService.controller.continuePressed ) {
			shippingOptionsService.controller.continuePressed = shippingOptionsService.controller.continuePressed.wrap( function( om ) {
				var euCountryCodeArray = ['AT','BE','CZ','DK','EE','FI','FR','DE','HU','IE','IT','LV','LT','LU','MT','NL','PT','SK','SI','ES','SE','GB','BG','HR','PL','RO'];
				var countryCodeCheck = '';
				if( shippingOptionsService.view.shippingOptionsCountrySelect() ) {
					if( shippingOptionsService.view.shippingOptionsCountrySelect().getValue !== undefined ) {
						countryCodeCheck = shippingOptionsService.view.shippingOptionsCountrySelect().getValue();
					}
					else if( shippingOptionsService.view.shippingOptionsCountrySelect().value ) {
						countryCodeCheck = shippingOptionsService.view.shippingOptionsCountrySelect().value;
					}
					
					if( countryCodeCheck != '' ) {
						if( jQuery.inArray( countryCodeCheck, euCountryCodeArray ) > -1 ) {
							shippingOptionsService.model.brandButtonClicked = true;
						}
					}
				}
				om();
			});
		}

		if( shippingOptionsService.view && shippingOptionsService.view.updateAndShowBusinessUnitsContainer ) {
			shippingOptionsService.view.updateAndShowBusinessUnitsContainer = shippingOptionsService.view.updateAndShowBusinessUnitsContainer.wrap( function( om ) {
				om();

				var countryCode = '';
				if( shippingOptionsService.view.shippingOptionsCountrySelect ) {
					if( shippingOptionsService.view.shippingOptionsCountrySelect().getValue !== undefined ) {
						countryCode = shippingOptionsService.view.shippingOptionsCountrySelect().getValue();
					}
					else if( shippingOptionsService.view.shippingOptionsCountrySelect().value ) {
						countryCode = shippingOptionsService.view.shippingOptionsCountrySelect().value;
					}
					
					if( countryCode != '' ) {

						var translatedCopyArray = jQuery.wcdSharedOverride_globalGatewayTranslator.model.currentTranslatedCopy;
						var currentLanguage = jQuery.wcdSharedOverride_globalGatewayTranslator.model.currentLanguage;
		
						if( countryCode == 'CZ' || countryCode == 'HU' ) {
		
							if( jQuery('#bottomNativeInstruction').length > 0 ) {
								jQuery('#bottomNativeInstruction').html( translatedCopyArray[6] );
								jQuery('#bottomNativeInstruction').css({ 'top':'5px' });
							}
		
							if( jQuery('#shippingOptionsBottomFlag').length > 0 ) {
								var imgToUpdate = jQuery('#shippingOptionsBottomFlag img');
								if( imgToUpdate.length > 0 ) {
									 imgToUpdate.attr('src','/assets/common/shippingOptions/' + countryCode + '.gif');
								}
							}
		
							if( jQuery('#globalGatewayCurrency').length > 0 ) jQuery('#globalGatewayCurrency').hide();
							if( jQuery('#shippingCurrencySelect').length > 0 ) jQuery('#shippingCurrencySelect').hide();
		
							if( jQuery('#globalGatewayCurrency').length > 0 ) {
								jQuery('#globalGatewayCurrency').html( translatedCopyArray[7] );
								jQuery('#globalGatewayCurrency').show();
		
								if( jQuery('#orderProcessingPoundsCZHU').length > 0 ) {
									jQuery('#orderProcessingPoundsCZHU').html( translatedCopyArray[16] );
								}
								else {
									jQuery('#globalGatewayCurrency').after('<div id="orderProcessingPoundsCZHU" style="display: block; padding: 0px 5px 0px 0px; bottom:4px; color: #933; font-family: Arial; font-weight: bold; left: 12px; position: absolute;">' + translatedCopyArray[16] + '</div>');
								}
							}
						}
						else if( countryCode == 'BG' || countryCode == 'HR' || countryCode == 'PL' || countryCode == 'RO' ) {
		
							if( jQuery('#bottomNativeInstruction').length > 0 ) {
								jQuery('#bottomNativeInstruction').html( translatedCopyArray[6] );
								jQuery('#bottomNativeInstruction').css({ 'top':'5px' });
								jQuery('#bottomNativeInstruction').show();
							}
		
							// Changes US flag to country-specific flag
							if( jQuery('#shippingBottomFlagAndInstruction').length > 0 ) {
								var imgToUpdate = jQuery('#shippingBottomFlagAndInstruction img');
								if( imgToUpdate.length > 0 ) {
									 imgToUpdate.attr('src','/assets/common/shippingOptions/' + countryCode + '.gif');
								}
								jQuery('#shippingBottomFlagAndInstruction').show();
							}
		
							// Set currency to British Pounds
							if( jQuery('#globalGatewayCurrency').length > 0 ) jQuery('#globalGatewayCurrency').hide();
							if( jQuery('#shippingCurrencySelect').length > 0 ) jQuery('#shippingCurrencySelect').hide();
		
							if( jQuery('#globalGatewayCurrency').length > 0 ) {
								jQuery('#globalGatewayCurrency').html( translatedCopyArray[7] );
								jQuery('#globalGatewayCurrency').show();
		
								if( jQuery('#orderProcessingPoundsCZHU').length > 0 ) {
									jQuery('#orderProcessingPoundsCZHU').html( translatedCopyArray[16] );
								}
								else {
									jQuery('#globalGatewayCurrency').after('<div id="orderProcessingPoundsCZHU" style="display: block; padding: 0px 5px 0px 0px; bottom:4px; color: #933; font-family: Arial; font-weight: bold; left: 12px; position: absolute;">' + translatedCopyArray[16] + '</div>');
								}
		
								// Romania has different placement of messaging
								if( countryCode == 'RO' ) {
									jQuery('#orderProcessingPounds').show();
								}
		
							}
		
							jQuery('#shippingOptionsBusinessUnitsContainer').show();
		
						}
						else {
							if( jQuery('#shippingOptionsBottomFlag').length > 0 ) {
								var imgToUpdate = jQuery('#shippingOptionsBottomFlag img');
								if( imgToUpdate.length > 0 ) {
									 imgToUpdate.attr('src','/assets/common/shippingOptions/US.gif');
								}
							}
						}
					}
				}
			});
		}
	}
}


if( window["shippingOptionsService"] ) {
	if( shippingOptionsService && shippingOptionsService.view ) {

jQuery.wcdSharedOverride_globalGatewayTranslator = {
	model: {
		wcdAssetPath:'/Asset_Archive/GPWeb/content/0012/053/447/assets/',
		initialLaunch: false,
		currentLanguage: 'en_GB',
		currentTranslatedCopy: {},
		euCountryCodeArray: ['AT','BE','CZ','DK','EE','FI','FR','DE','HU','IE','IT','LV','LT','LU','MT','NL','PT','SK','SI','ES','SE','GB','BG','HR','PL','RO'],
		euTranslateCountryCodeArray: ['AT','BE','DE','LU','NL','ES'],
		translatedCopyByElt: {
			'en_GB' : ['International Shipping', 'Where are you shipping to?', 'Region', 'Country', 'Language', 'Please choose a shipping destination above to see store options', 'Shop these <span id="nativeCountryName" class="nativeCountryName" style="color:#000000">EU sites</span> directly', '<div class="currencyBritish">Currency:</div> <div id="britishPoundText" class="britishPoundText">Euros</div>', 'While prices display in Euros, your order will be processed in British Pounds.', 'Currency:', 'Continue', 'Cancel', 'Save preferences', 'Shop these <span style="color:#000000">US sites</span> with international shipping from Borderfree, our global e-commerce provider:', 'Please note: all prices on gap.eu are displayed in Euros but orders will be charged in British Pounds. Final pricing is determined by the current conversion rate at the time of your order and may vary slightly from the price displayed. Your credit card company may also apply a conversion fee to your transaction.', '<div class="currencyBritish">Currency:</div> <div id="britishPoundText" class="britishPoundText">British Pounds</div>', 'Please note: all prices on gap.eu are displayed in Euros but orders will be charged in British Pounds.'],

			'de_DE' : ['International Versand', 'In welche LÃ¤nder wird geliefert?', 'Region', 'Land', 'Sprache', 'WÃ¤hlen Sie oben einen Bestimmungsort aus, um die Filialoptionen anzuzeigen.', 'Kaufen Sie auf diesen <span id="nativeCountryName" class="nativeCountryName" style="color:#000000">EU-Sites</span> direkt ein in', '<div class="currencyBritish">WÃ¤hrung:</div> <div id="britishPoundText" class="britishPoundText">Euro</div>', 'Die Preise der Artikel werden zwar in Euro angezeigt, doch Ihre Bestellung wird in britischen Pfund bearbeitet.', 'WÃ¤hrung:', 'Fortfahren', 'LÃ¶schen', 'Einstellungen speichern', 'Kaufen Sie auf diesen <span style="color:#000">US-Sites</span>, die internationalen Versand durch unseren globalen E-Commerce-Anbieter Borderfree anbieten.', 'Bitte beachten Sie: Alle Preise auf gap.eu werden in Euro angezeigt, doch Bestellungen werden in britischen Pfund berechnet. Der Endpreis hÃ¤ngt jeweils von dem Wechselkurs zum Zeitpunkt der Bestellung ab und kann sich leicht von dem angezeigten Preis unterscheiden. Es besteht die MÃ¶glichkeit, dass Ihr Kreditkartenunternehmen zusÃ¤tzlich eine UmrechnungsgebÃ¼hr fÃ¼r die Transaktion in Rechnung stellt.', '<div class="currencyBritish">WÃ¤hrung:</div> <div id="britishPoundText" class="britishPoundText">British Pounds</div>', 'Bitte beachten Sie: Alle Preise auf gap.eu werden in Euro angezeigt, doch Bestellungen werden in britischen Pfund berechnet.'],

			'nl_NL' : ['Internationale verzending', 'Waar moet uw pakket bezorgd worden?', 'Regio', 'Land', 'Taal', 'Kies hierboven een bestemming om de winkelopties te bekijken.', 'Winkel direct op deze <span id="nativeCountryName" class="nativeCountryName" style="color:#000000">EU-sites</span>', '<div class="currencyBritish">Valuta:</div> <div id="britishPoundText" class="britishPoundText">Euro</div>', 'Hoewel productprijzen worden weergegeven in euro\'s, zal uw bestelling worden verwerkt in Britse ponden.', 'Valuta:', 'Verder gaan', 'Annuleren', 'Voorkeuren opslaan', 'Winkel op deze <span style="color:#000000">US-sites</span> en maak gebruik van internationale verzending via Borderfree, onze wereldwijde elektronische handelspartner.', 'Opmerking: alle prijzen op gap.eu worden weergegeven in euro\'s, maar bestellingen worden verwerkt in Britse ponden. De uiteindelijke prijs wordt bepaald door de actuele wisselkoers ten tijde van uw bestelling en kan enigszins afwijken van het getoonde bedrag. Daarnaast kan het zijn dat uw creditcardmaatschappij een omzettingstaks berekent.', '<div class="currencyBritish">Valuta:</div> <div id="britishPoundText" class="britishPoundText">British Pounds</div>', 'Opmerking: alle prijzen op gap.eu worden weergegeven in euro\'s, maar bestellingen worden verwerkt in Britse ponden.'],

			'es_ES' : ['EnvÃ­os internacionales', 'Â¿DÃ³nde desea enviarlo?', 'Provincia', 'PaÃ­s', 'Idioma', 'Seleccione un destino de envÃ­o para consultar las opciones de las tiendas.', 'Compre en este <span id="nativeCountryName" class="nativeCountryName" style="color:#000000">sitio web de la UE</span> directamente.', '<div class="currencyBritish">Moneda:</div> <div id="britishPoundText" class="britishPoundText">Euros</div>', 'Aunque los precios se muestren en euros, su pedido se procesarÃ¡ en libras esterlinas.', 'Moneda:', 'Continuar', 'Cancelar', 'Guardar preferencias', 'Compra en este <span style="color:#000000">sitio web de U.S.</span> con posibilidad de envÃ­o internacional con Borderfree, nuestro proveedor global de comercio electrÃ³nico.', 'Tenga en cuenta lo siguiente: Todos los precios de gap.eu se muestran en euros, aunque los pedidos se cobrarÃ¡n en libras esterlinas. El precio final viene determinado por el tipo de cambio en el momento en que realice el pedido y puede variar ligeramente del precio que se muestra. La compaÃ±Ã­a emisora de su tarjeta de crÃ©dito podrÃ­a aplicar una tasa de conversiÃ³n a su transacciÃ³n.', '<div class="currencyBritish">Moneda:</div> <div id="britishPoundText" class="britishPoundText">British Pounds</div>', 'Tenga en cuenta lo siguiente: Todos los precios de gap.eu se muestran en euros, aunque los pedidos se cobrarÃ¡n en libras esterlinas.']
		}
	},

	// Translates main elements of Gateway popup (before country selection made)
	translateGatewayInitialElts: function() {
		var translatedCopyArray = jQuery.wcdSharedOverride_globalGatewayTranslator.model.currentTranslatedCopy;
		var currentLanguage = jQuery.wcdSharedOverride_globalGatewayTranslator.model.currentLanguage;
		var wcdAssetPath = jQuery.wcdSharedOverride_globalGatewayTranslator.model.wcdAssetPath;

		// Update each text element
		if( jQuery('#internationalRegion').length > 0 ) {
			var headerText = jQuery('#internationalRegion h1');
			if( headerText.length > 0 ) { headerText.html( translatedCopyArray[0] ); }

			var whereToText = jQuery('#internationalRegion div.whereToShipText');
			if( whereToText.length > 0 ) { whereToText.html( translatedCopyArray[1] ); }
		}

		if( jQuery('#regionSpecific').length > 0 ) {
			var header2Text = jQuery('#regionSpecific h1');
			if( header2Text.length > 0 ) { header2Text.html( translatedCopyArray[0] ); }

			// Did you know text hidden in English
			if( jQuery('#favouriteText').length > 0 && jQuery.wcdSharedOverride_globalGatewayTranslator.model.currentLanguage != 'en_GB' ) {
				jQuery('#favouriteText').css({ 'visibility':'hidden' });
			}
			else {
				jQuery('#favouriteText').css({ 'visibility':'visible' });
			}

			var whereTo2Text = jQuery('#regionSpecific div.whereToShipText');
			if( whereTo2Text.length > 0 ) { whereTo2Text.html( translatedCopyArray[1] ); }
		}

		if( jQuery('#whereToShipRegion').length > 0 ) {
			var regionText = jQuery('#whereToShipRegion div.regionToShip');
			if( regionText.length > 0 ) { regionText.html( translatedCopyArray[2] ); }

			var countryText = jQuery('#whereToShipRegion div.countryToShip');
			if( countryText.length > 0 ) { countryText.html( translatedCopyArray[3] ); }
		}

		if( jQuery('#languageSelectText').length > 0 ) jQuery('#languageSelectText').html( translatedCopyArray[4] );

		if( jQuery('#shippingOptionsChooseDestinationContainer').length > 0 ) jQuery('#shippingOptionsChooseDestinationContainer').html( translatedCopyArray[5] );

		
	},

	// Translate elements created when country is selected
	translateGatewayBrandLinkElts: function() {
		var translatedCopyArray = jQuery.wcdSharedOverride_globalGatewayTranslator.model.currentTranslatedCopy;
		var currentLanguage = jQuery.wcdSharedOverride_globalGatewayTranslator.model.currentLanguage;
		var countryCode = '';
		if( shippingOptionsService.view.shippingOptionsCountrySelect ) { 
			if( shippingOptionsService.view.shippingOptionsCountrySelect().getValue !== undefined ) {
				countryCode = shippingOptionsService.view.shippingOptionsCountrySelect().getValue();
			}
			else if( shippingOptionsService.view.shippingOptionsCountrySelect().value ) {
				countryCode = shippingOptionsService.view.shippingOptionsCountrySelect().value;
			}
			
			if( countryCode != '' ) {
	
				if( jQuery('#regionSpecificNative').length > 0 ) {
					var shopInstructEUText = jQuery('#regionSpecificNative div.nativeInstructionText');
					if( shopInstructEUText.length > 0 ) {
						var instructTextToReplace = translatedCopyArray[6];
						if( countryCode == 'US' ) { instructTextToReplace = instructTextToReplace.replace('EU','US') + ': <a id="rollOverPopupNative" href="#" style="display: none" onmouseover="gidLib.shippingRolloverBubble.openBubble(event,{content:\'SHOP THE US SITES <br>Selecting this option redirects you to the U.S. site. However, items in your shopping bag will not automatically transfer to your U.S. shopping bag.\'});" onmouseout="gidLib.shippingRolloverBubble.closeBubble();" onclick="return false;"><img src="/assets/common/shippingOptions/icon_bubble.gif" id="NativeInformationIcon" height="10" width="12"></a><a id="rollOverNative" href="#" style=""><img src="/assets/common/shippingOptions/icon_bubble.gif" id="NativeInformationIcon" height="10" width="12"></a>'; }
						
						else if( countryCode == 'CA' ) { instructTextToReplace = instructTextToReplace.replace('EU','CA') + ': <a id="rollOverPopupNative" href="#" onmouseover="gidLib.shippingRolloverBubble.openBubble(event,{content:\'SHOP THE CANADA SITES <br>Selecting this option redirects you to the Canada site. However, items in your shopping bag will not automatically transfer to your Canada shopping bag.\'});" onmouseout="gidLib.shippingRolloverBubble.closeBubble();" onclick="return false;"><img src="/assets/common/shippingOptions/icon_bubble.gif" id="NativeInformationIcon" height="10" width="12"></a><a id="rollOverNative" href="#" style=""><img src="/assets/common/shippingOptions/icon_bubble.gif" id="NativeInformationIcon" height="10" width="12"></a>'; }
		
						else if( countryCode == 'JP' ) { instructTextToReplace = instructTextToReplace.replace('EU','JP') + ': <a id="rollOverPopupNative" href="#" onmouseover="gidLib.shippingRolloverBubble.openBubble(event,{content:\'SHOP THE JAPAN SITES <br>Selecting this option redirects you to the Japan site. However, items in your shopping bag will not automatically transfer to your Japan shopping bag.\'});" onmouseout="gidLib.shippingRolloverBubble.closeBubble();" onclick="return false;"><img src="/assets/common/shippingOptions/icon_bubble.gif" id="NativeInformationIcon" height="10" width="12"></a><a id="rollOverNative" href="#" style=""><img src="/assets/common/shippingOptions/icon_bubble.gif" id="NativeInformationIcon" height="10" width="12"></a>'; }
		
						else { instructTextToReplace = instructTextToReplace + ': <a id="rollOverPopupNative" href="#" onmouseover="gidLib.shippingRolloverBubble.openBubble(event,{content:\'SHOP THE EU SITES <br>Selecting this option redirects you to the EU site. However, items in your shopping bag will not automatically transfer to your EU shopping bag.\'});" onmouseout="gidLib.shippingRolloverBubble.closeBubble();" onclick="return false;"><img src="/assets/common/shippingOptions/icon_bubble.gif" id="NativeInformationIcon" height="10" width="12"></a><a id="rollOverNative" href="#" style=""><img src="/assets/common/shippingOptions/icon_bubble.gif" id="NativeInformationIcon" height="10" width="12"></a>'; }
		
						shopInstructEUText.html( instructTextToReplace );
					}
		
					if( jQuery('#currencyForEurope').length > 0 ) {
						var countrySelected = shippingOptionsService.model.shippingOptionsInfo.requestedShippingCountryCode;
						if( countrySelected == 'GB' ) { jQuery('#currencyForEurope').html( translatedCopyArray[15] ); }
						else { jQuery('#currencyForEurope').html( translatedCopyArray[7] ); }
		
						jQuery('#currencyForEurope').css({ 'bottom':'32px' });
					}
				}
		
				if( jQuery('#regionSpecificGlobal').length > 0 ) {
					var shopInstructGlobalText = jQuery('#regionSpecificGlobal div.globalInstructionText');
					if( shopInstructGlobalText.length > 0 ) {
						shopInstructGlobalText.html( translatedCopyArray[13] + ': <a href="#" id="rollOverPopupGlobal" onmouseover="gidLib.shippingRolloverBubble.openBubble(event,{content:\'SHOP THE US SITES<br>By placing an international order, you acknowledge that your transaction will be with Borderfree. Your customer service needs will be handled directly with Gap Inc. International orders are not eligible for free shipping or free returns. Your order total is guaranteed at the exchange rate set when your order is placed.\'});" onmouseout="gidLib.shippingRolloverBubble.closeBubble();" onclick="return false;"><img src="/assets/common/shippingOptions/icon_bubble.gif" id="globalInformationIcon" height="10" width="12"></a><a href="#" id="rollOverGlobal" style=""><img src="/assets/common/shippingOptions/icon_bubble.gif" id="globalInformationIcon" height="10" width="12"></a>');
					}
		
					if( jQuery('#regionCurrency').length > 0 ) { jQuery('#regionCurrency').html( translatedCopyArray[9] ); }
				}
		
				if( jQuery('#bottomGlobalInstruction').length > 0 ) {
					var shopInstructAllGlobalText = jQuery('#bottomGlobalInstruction p');
					if( shopInstructAllGlobalText.length > 0 ) {
						shopInstructAllGlobalText.html( translatedCopyArray[13] + ': <a onclick="return false;" onmouseout="gidLib.shippingRolloverBubble.closeBubble();" onmouseover="gidLib.shippingRolloverBubble.openBubble(event,{content:\'SHOP THE US SITES&lt;br&gt;By placing an international order, you acknowledge that your transaction will be with Borderfree. Your customer service needs will be handled directly with Gap Inc. International orders are not eligible for free shipping or free returns. Your order total is guaranteed at the exchange rate set when your order is placed.\'});" href="#"><img width="12" height="10" id="InformationIcon" src="/assets/common/shippingOptions/icon_bubble.gif"></a>');
					}
		
					if( jQuery('#globalGatewayCurrency').length > 0 ) {
						if( countryCode == 'CZ' || countryCode == 'HU' ) {
							jQuery('#globalGatewayCurrency').html( translatedCopyArray[15] );
							if( jQuery('#orderProcessingPoundsCZHU').length > 0 ) jQuery('#orderProcessingPoundsCZHU').html( translatedCopyArray[16] );
						}
						else {
							jQuery('#globalGatewayCurrency').html( translatedCopyArray[9] );
						}
					}
				}
		
				if( jQuery('#orderProcessingPounds').length > 0 ) { jQuery('#orderProcessingPounds').html( translatedCopyArray[16] ); }
		
				if( jQuery('#bottomNativeInstruction').length > 0 ) {
					var bottomInstructionText = translatedCopyArray[6];
					if( countryCode == 'US' ) bottomInstructionText = bottomInstructionText.replace('EU','US');
					jQuery('#bottomNativeInstruction').html( bottomInstructionText );
				}
			}
		}
	},

	// Update 5/26/2016-Insert language dropdown into Global Gateway popup
    insertLanguageDropdown: function() {
        if( jQuery('#languageRegion').length == 0 ) {
            var currentLanguage = jQuery.wcdSharedOverride_globalGatewayTranslator.model.currentLanguage;
            var translatedCopyArray = jQuery.wcdSharedOverride_globalGatewayTranslator.model.currentTranslatedCopy;
            var languageRegionStr =
                '<div id="languageSelectText" class="languageToDisplay" style="font-size: 13px;width: 73px;text-align: left;padding-left: 0px;line-height: 22px;float: left;">' + translatedCopyArray[4] + '</div>' +
                '<div id="languageOptionsSelect" style="float: left;line-height: 22px;">' +
                    '<select style="width:148px;font-size:13px;" onchange="jQuery.wcdSharedOverride_globalGatewayTranslator.setLanguageOnSelectAndTranslate( this )">' +
                        '<option>Select</option>';
            languageRegionStr = languageRegionStr + '<option value="en_GB"';
            if( currentLanguage == 'en_GB' ) languageRegionStr = languageRegionStr + ' selected';
            languageRegionStr = languageRegionStr + '>English</option>';
            languageRegionStr = languageRegionStr + '<option value="de_DE"';
            if( currentLanguage == 'de_DE' ) languageRegionStr = languageRegionStr + ' selected';
            languageRegionStr = languageRegionStr + '>Deutsch</option>';
            languageRegionStr = languageRegionStr + '<option value="es_ES"';
            if( currentLanguage == 'es_ES' ) languageRegionStr = languageRegionStr + ' selected';
            languageRegionStr = languageRegionStr + '>EspaÃ±ol</option>';
            languageRegionStr = languageRegionStr + '<option value="nl_NL"';
            if( currentLanguage == 'nl_NL' ) languageRegionStr = languageRegionStr + ' selected';
            languageRegionStr = languageRegionStr + '>Nederlands</option>';
            languageRegionStr = languageRegionStr + '</select></div>';
            jQuery('#whereToShipRegion').append('<div id="languageRegion">' + languageRegionStr + '</div>');
        }
    },

	// Set language and translate on language dropdown toggle
	setLanguageOnSelectAndTranslate: function( languageVal ) {
		var languageValue = languageVal.options[languageVal.selectedIndex].value;

		// If not a change in language OR not a supported language, do nothing
		if( languageValue != jQuery.wcdSharedOverride_globalGatewayTranslator.model.currentLanguage && ( languageValue == 'de_DE' || languageValue == 'es_ES' || languageValue == 'nl_NL' || languageValue == 'en_GB' ) ) {
			jQuery.wcdSharedOverride_globalGatewayTranslator.setLangauge( languageValue );

			jQuery.wcdSharedOverride_globalGatewayTranslator.translateGatewayInitialElts();

			if( shippingOptionsService.model.shippingOptionsInfo && shippingOptionsService.model.shippingOptionsInfo.requestedShippingCountryCode ) {
				jQuery.wcdSharedOverride_globalGatewayTranslator.translateGatewayBrandLinkElts();
			}

			// Pass locale variable if not English
			var gatewayLinkURL = shippingOptionsService.model.brandURL;
			if( gatewayLinkURL.indexOf('preferredLocale') == -1 ) {
				gatewayLinkURL = gatewayLinkURL + '&preferredLocale=' + jQuery.wcdSharedOverride_globalGatewayTranslator.model.currentLanguage;
			}
			else {
				gatewayLinkURL = gatewayLinkURL.substr( 0, gatewayLinkURL.indexOf('preferredLocale=') + 16 ) + jQuery.wcdSharedOverride_globalGatewayTranslator.model.currentLanguage;
			}

			var countrySelected = shippingOptionsService.model.shippingOptionsInfo.requestedShippingCountryCode;
			gatewayLinkURL = gatewayLinkURL + '&gatewayCountry=' + countrySelected;

			shippingOptionsService.model.brandURL = gatewayLinkURL;
		}
	},

	// Language setter function, language value passed in and this sets the current language and translated copy array variables
	setLangauge: function( languageValue ) {
		if( languageValue == 'de_DE' || languageValue == 'es_ES' || languageValue == 'nl_NL' || languageValue == 'en_GB' ) {
			jQuery.wcdSharedOverride_globalGatewayTranslator.model.currentLanguage = languageValue;
			if( languageValue == 'de_DE' ) { jQuery.wcdSharedOverride_globalGatewayTranslator.model.currentTranslatedCopy = jQuery.wcdSharedOverride_globalGatewayTranslator.model.translatedCopyByElt.de_DE; }
			else if( languageValue == 'nl_NL' ) { jQuery.wcdSharedOverride_globalGatewayTranslator.model.currentTranslatedCopy = jQuery.wcdSharedOverride_globalGatewayTranslator.model.translatedCopyByElt.nl_NL; }
			else if( languageValue == 'es_ES' ) { jQuery.wcdSharedOverride_globalGatewayTranslator.model.currentTranslatedCopy = jQuery.wcdSharedOverride_globalGatewayTranslator.model.translatedCopyByElt.es_ES; }
			else { jQuery.wcdSharedOverride_globalGatewayTranslator.model.currentTranslatedCopy = jQuery.wcdSharedOverride_globalGatewayTranslator.model.translatedCopyByElt.en_GB; }
		}
		else {
			jQuery.wcdSharedOverride_globalGatewayTranslator.model.currentLanguage = 'en_GB';
			jQuery.wcdSharedOverride_globalGatewayTranslator.model.currentTranslatedCopy = jQuery.wcdSharedOverride_globalGatewayTranslator.model.translatedCopyByElt.en_GB;
		}
	},

	// Called upon auto-launch of Gateway, sets language based on country of origin, translates popup
	setLangueageAndTranslateLaunch: function() {
		if( window["jQuery.wcdSharedOverride_globalGatewayOverrides"] != null ) {
			// Find current country code, either selected OR as intercepted by globalIntercept
			var currentCountry = jQuery.wcdSharedOverride_globalGatewayOverrides.model.countryCode;
			if( currentCountry == 'DE' || currentCountry == 'AT' || currentCountry == 'LU' ) { jQuery.wcdSharedOverride_globalGatewayTranslator.setLangauge('de_DE'); }
			else if( currentCountry == 'NL' || currentCountry == 'BE' ) { jQuery.wcdSharedOverride_globalGatewayTranslator.setLangauge('nl_NL'); }
			else if( currentCountry == 'ES' ) { jQuery.wcdSharedOverride_globalGatewayTranslator.setLangauge('es_ES'); }
			else { jQuery.wcdSharedOverride_globalGatewayTranslator.setLangauge('en_GB'); }
		}
	}
}

// Translate elements created subsequent to a country selection
if( jQuery.wcdSharedOverride_globalGatewayOverrides && jQuery.wcdSharedOverride_globalGatewayOverrides.model && jQuery.wcdSharedOverride_globalGatewayOverrides.model.showTranslatedExperienceToEU && shippingOptionsService.view.displayingBusinessUnits ) {
	shippingOptionsService.view.displayingBusinessUnits = shippingOptionsService.view.displayingBusinessUnits.wrap( function( om, container, brnadsInOrder, innerContainer, businessUnitUrls, brandsDotCom, brandDivs ) {
		om( container, brnadsInOrder, innerContainer, businessUnitUrls, brandsDotCom, brandDivs );
		jQuery.wcdSharedOverride_globalGatewayTranslator.translateGatewayBrandLinkElts();
	});
}

// Add language dropdown when Europe region selected, remove/translate to English when non-Europe region selected
if( jQuery.wcdSharedOverride_globalGatewayOverrides && jQuery.wcdSharedOverride_globalGatewayOverrides.model && jQuery.wcdSharedOverride_globalGatewayOverrides.model.showTranslatedExperienceToEU && shippingOptionsService.view.showCountriesForRegionAndEnableSelection ) {
	shippingOptionsService.view.showCountriesForRegionAndEnableSelection = shippingOptionsService.view.showCountriesForRegionAndEnableSelection.wrap( function( om, region ) {
		om( region );

		var translatedCountriesArr = [''];
		if( jQuery.wcdSharedOverride_globalGatewayOverrides.model.autoPoppedFlag && region != 'Europe' && jQuery.wcdSharedOverride_globalGatewayTranslator.model.currentLanguage != 'en_GB' ) {

		}
		else {
			if( region == 'Europe' ) {
				/* added 4/15/16 to fix EU copy not showing up - jermaine */
				jQuery.wcdSharedOverride_globalGatewayTranslator.setLangauge('en_GB');
				
				jQuery.wcdSharedOverride_globalGatewayTranslator.insertLanguageDropdown();
				jQuery.wcdSharedOverride_globalGatewayTranslator.translateGatewayInitialElts();
				jQuery.wcdSharedOverride_globalGatewayTranslator.translateGatewayBrandLinkElts();
			}
			else {
				// Remove language dropdown
				if( jQuery('#languageRegion').length > 0 ) jQuery('#languageRegion').remove();

				// Set translator to English
				jQuery.wcdSharedOverride_globalGatewayTranslator.setLangauge('en_GB');
				jQuery.wcdSharedOverride_globalGatewayTranslator.translateGatewayInitialElts();
				jQuery.wcdSharedOverride_globalGatewayTranslator.translateGatewayBrandLinkElts();
			}
		}
			// If auto-launched and not wrong site user, first-time visitor is assumed, set language by country code
			if( jQuery.wcdSharedOverride_globalGatewayOverrides.model.autoPoppedFlag && gidLib.getCookieVar('mktInterceptPersist','globalInterceptEUUKSiteCheck') == '' ) {
				var currentCountry = jQuery.wcdSharedOverride_globalGatewayOverrides.model.countryCode;
				if( currentCountry == 'DE' || currentCountry == 'AT' || currentCountry == 'LU' ) { jQuery.wcdSharedOverride_globalGatewayTranslator.setLangauge('de_DE'); }
				else if( currentCountry == 'NL' || currentCountry == 'BE' ) { jQuery.wcdSharedOverride_globalGatewayTranslator.setLangauge('nl_NL'); }
				else if( currentCountry == 'ES' ) { jQuery.wcdSharedOverride_globalGatewayTranslator.setLangauge('es_ES'); }
				else { jQuery.wcdSharedOverride_globalGatewayTranslator.setLangauge('en_GB'); }
			}
			// Else set to English
			else {
				jQuery.wcdSharedOverride_globalGatewayTranslator.setLangauge('en_GB');
			}
	});
}

// Override showShippingOptionsOverlay function to call translate-at-launch function and add checkbox
if( jQuery.wcdSharedOverride_globalGatewayOverrides && jQuery.wcdSharedOverride_globalGatewayOverrides.model && jQuery.wcdSharedOverride_globalGatewayOverrides.model.showTranslatedExperienceToEU && siteNavigation.showShippingOptionsOverlay ) {
	// TO BE REWRAPPED
	siteNavigation.showShippingOptionsOverlay = function( shouldSelectCurrentSettings, interceptCountryCode, interceptTID, heavyOrNo, autoPopped ) {

		shippingOptionsService.model.shouldSelectCurrentSettings = shouldSelectCurrentSettings;
		function getLeftMargin() {
			return ((document.body.clientWidth ? document.body.clientWidth : window.innerWidth) / 2) - (width / 2);
		}
		var url = "";
		if (typeof interceptCountryCode == 'undefined' && typeof interceptTID == 'undefined')
			url = '/profile/shippingOptions.do';
		else
			url = '/profile/shippingOptions.do'+'?interceptCountyCode='+interceptCountryCode+'&interceptTID='+interceptTID;
		var width = 665;
		var top = 55;
		var height = 459;

		jQuery.ajax( url ).always( function(response) {

			var currentPopUp = jQuery('#shippingOptionsPopUp');
			if( currentPopUp.length > 0 ) currentPopUp.remove();

			var responseString = '';
			if( response.responseText ) {
				responseString = response.responseText;
			}
			else {
				responseString = response;
			}
			responseString = responseString.replace('Borderfree','Borderfree');

			jQuery('body').append('<div id="shippingOptionsPopUp" style="top:' + top + 'px;left:' + getLeftMargin() + 'px;width:' + width + 'px;height: ' + height + 'px">' + responseString + '</div>');

			window.onresize = function () {
				div.style.left = getLeftMargin() + 'px';
			};

			if( autoPopped == true ) {
				jQuery.wcdSharedOverride_globalGatewayOverrides.model.autoPoppedFlag = true;
			}

			// WCD translation call
			jQuery.wcdSharedOverride_globalGatewayTranslator.setLangueageAndTranslateLaunch();
		});
		return false;
	};
}

	}
}

}
</script>
<!-- END Global Gateway overrides -->

<!-- BEGIN iPad Patches
<script type="text/javascript">
/*if( navigator.userAgent.indexOf('iPad') > -1 && location.pathname.indexOf('checkout/order') == -1 && location.pathname.indexOf('buy/shopping_bag') == -1 ) {
	document.write('<meta name = "viewport" content = "width = 1024">');
}*/
</script>
<!-- END iPad Patches -->

<!-- BEGIN WCD Category Hooks & scrollToCid -->
<script type="text/javascript">
if( location.pathname == '/browse/category.do' && window["categoryPage"] == null ) {
	
var wcdCategoryHooks = {
	debugMode: false,
	scrollToAnimationSpeed: 1000, 
	init: function() {
		if( location.search.indexOf('wcdCatHookDebug=true') > -1 ) { wcdCategoryHooks.debugMode = true; }
		
		// Wait for categoryData:ready event
		jQuery(document).ready(function(e) {
			ps.subscribe('categoryData:ready', function() {
				if( wcdCategoryHooks.debugMode ) { console.info('categoryData:ready fired'); }
				
				// Kill any previous listeners
				jQuery(document).off('wcdCategoryHooks:gridRendered');
				
				// Wait for our event that tells us grid rendered
				jQuery(document).on('wcdCategoryHooks:gridRendered', function() {
					// Update grid with our hooks
					wcdCategoryHooks.updateProductGrids();
					
					// Check for scrollToCid for scroll to funx
					if( location.search.indexOf('scrollToCid=') > -1 ) {
						if( wcdCategoryHooks.debugMode ) { console.info('scrollToCid detected'); }

						var scrollToCidTarget = location.search.substr( location.search.indexOf('scrollToCid=') + 12 );
						if( scrollToCidTarget.indexOf('&') > -1 ) scrollToCidTarget = scrollToCidTarget.substr( 0, scrollToCidTarget.indexOf('&') );
						
						setTimeout( function() {
							wcdCategoryHooks.scrollToCid( scrollToCidTarget );
						}, 1500 );
					}
					
					// Trigger catHook:ready event for ISMs
					jQuery(document).trigger('wcdCategoryHooks:ready');
				});
				
				// Wait for grid to render
				var catHookAttempts = 0;
				var catHookMaxAttempts = 5;
				var catGridRendered = function() {
					var gridRoot = jQuery('.product-card-grid--group .grid-root');
					if( gridRoot.length > 0 ) {
						jQuery(document).trigger('wcdCategoryHooks:gridRendered');
					}
					else if( catHookAttempts < catHookMaxAttempts ) {
						setTimeout( function() {
							catHookAttempts++;
							catGridRendered();
						}, 250 );
					}
				}
				catGridRendered();			
			});
		});
	},

	// Updates product grids so WCD can hook into them - to move to OneSite codebase(?)
	updateProductGrids: function() {
		var pageGrids = jQuery('.product-card-grid--group');
		var gridElt;
		var firstProdCard;
		var firstProdCid;
		if( pageGrids.length > 0 ) {
			pageGrids.each( function( idx, elt ) {
				gridElt = jQuery( elt );
				firstProdCard = gridElt.find('.product-card--link:first');
				// Adds data attribute of the CID of the subcat
				if( firstProdCard.length > 0 ) {
					if( firstProdCard.attr('href') !== undefined ) {
						firstProdCid = firstProdCard.attr('href');
						if( firstProdCid != '' && firstProdCid.indexOf('cid=') > -1 ) {
							firstProdCid = firstProdCid.substr( firstProdCid.indexOf('cid=') + 4 );
							if( firstProdCid.indexOf('&') > -1 ) {
								firstProdCid = firstProdCid.substr( 0, firstProdCid.indexOf('&') );
							}
							gridElt.attr( 'data-cid', firstProdCid );
						}
					}
				}
			});
		}
		if( wcdCategoryHooks.debugMode ) { console.info('Product grids updated with WCD hooks'); }
	},

	// Scrolls user down to rendered category grid
	scrollToCid: function( subcatTarget ) {
		if( wcdCategoryHooks.debugMode ) { console.info('Scrolling to ' + subcatTarget ); }

		var targetOffset = jQuery('.product-card-grid--group[data-cid="' + subcatTarget + '"]');
		if( targetOffset.length > 0 ) {
			targetOffset = targetOffset.offset().top;
			if( wcdCategoryHooks.debugMode ) { console.info('Offset ' + targetOffset ); }
			
			// Adjust for brand bar on small/med breakpoints
			if( window["gap"] !== undefined && gap.Mediaqueries && gap.Mediaqueries.currentBP && gap.Mediaqueries.currentBP.size ) {
				if( gap.Mediaqueries.currentBP.size == 'small' || gap.Mediaqueries.currentBP.size == 'medium' ) {
					targetOffset = targetOffset - jQuery('.brand-bar').outerHeight();
				}				
			}
			
			// Check if Sticky nav present and adjust for height
			if( jQuery('.wcdStickyCatNav:visible').length > 0 ) {
				targetOffset = targetOffset - jQuery('.wcdStickyCatNav:visible').outerHeight();
			}
			
			jQuery('html, body').animate({ scrollTop: targetOffset }, wcdCategoryHooks.scrollToAnimationSpeed ); 
		}
	}
}
wcdCategoryHooks.init();

}
</script>
<!-- END scrollToCid -->

<!-- BEGIN Shopping Bag Override -->
<!-- Hide the Grid/List toggle on iPhone Chrome browser - Requested by Roja Imani 2016.09.29 -->
<script>
jQuery(document).ready(function() {
  var agent = navigator.userAgent;
  // alert(agent);
  if ( agent.indexOf('CriOS') > -1 && jQuery('.savedBagCol.listAndGridViewButtonContainer').length > 0 ) {
    jQuery('.savedBagCol.listAndGridViewButtonContainer').hide();
    jQuery('.listAndGridViewButtonContainer .listViewButton').click();
  }
});
</script>
<!-- END Shopping Bag Override -->

<!-- END Content Item File: /content/0012/053/447/cn12053447.html -->

<!-- END - WCD Sitewide Container 1 -->

<!-- BEGIN - WCD Sitewide Container 2 -->
<!-- BEGIN Content Item File: /content/0012/161/059/cn12161059.html -->

<!-- WCD Brand Code - Gap -->
<style type="text/css">

/*Onesite : Hiding the Division Name in new World OSHDROS-490; */
.onesiteCatPage .divisionName,.onesiteSubDivPage  .divisionName
 ,.onesiteDivPage  .divisionName{
    visibility: hidden;
}

/** took out the brand-bar override to localized the proper fix for the checkout header overlap **/
body.orderPage .brand-bar--right {
	top: 0;
	margin-top: 0;
}
body.orderPage .brand-bar {
    height: 4.25em;
}

/* Global CSS overrides */
body { background: none repeat scroll 0 0 #fff;}

/* black Gap logo update */
.brand-bar .icon-gap {
  background-image: url('/Asset_Archive/GPWeb/content/0012/075/796/assets/GAP_logo-retina.gif');
}


/* Checkout Promo Details Legal Pop-up Styling override: add padding GOL request */
body.popup #bodyContainer .shortDescMsg { padding:5px; line-height: 16px; }
body.popup #bodyContainer .promoCode { padding-left:5px; }
body.popup #bodyContainer p{ padding:5px; }
body.popup, body.popup #bodyContainer { background: none repeat scroll 0 0 #fff !important; }

/* Main Content and Category page overrides - no longer needed once globalOptimized.css is removed*/

/* Outfit and Product page main content: override globalOptimized.css to remove vertical keyline*/
.outfitPage #mainContent, .productPage #mainContent { background-color:#fff }

/* override globalOptimize.css mainContent border keyline to white/reassign keyline */
#mainContent { border:none; background-color:#fff }
#mainContentContainer { border:none; border-left:none; border-right:none; background-color:#fff !important; }
#mainContentContainer #mainContent { background-color:#fff; border:medium none; background-image:none; }

.onesiteCatPage #mainContent, .onesiteSearchPage #mainContent, .onesiteProdPage #mainContent { background-color:transparent }


/* outfit.do: Update Add to Bag  button states, black for on state, grey for off state JP 11/26/12 */
.brand1 #addToBagContent input.addToBagBtn, .brand1 #confirmationContentTop input.addToBagBtn, .brand1 #confirmationContentBottom input.addToBagBtn { background: url("/Asset_Archive/GPWeb/content/0002/444/294/brand_buttons_and_assets_sprite.gif") repeat scroll 0 -732px transparent; height: 17px; width: 72px; }
.brand1 #addToBagContent input.off, .brand1 #confirmationContentTop input.off, .brand1 #confirmationContentBottom input.off { background-position: 0 -732px; }
.brand1 #addToBagContent input.on, .brand1 #confirmationContentTop input.on, .brand1 #confirmationContentBottom input.on { background: url("/Asset_Archive/GPWeb/content/0002/444/294/brand_buttons_and_assets_sprite.gif") repeat scroll 0 -665px transparent; height: 17px; width: 72px; }

/* END no longer needed once globalOptimized.css is removed*/

/*** CS page CSS ***/
#mainContent .csContentPage {padding:10px 10px 10px 35px;}
#mainContent .header1 {margin:10px 0px 10px 0px; color:#000;}

/*** Responsive Checkout CSS ***/
.promoDetail {width:85%;}
dl.promoContent {overflow: hidden;color: #999;}
.promoItem >  dd:nth-of-type(1){ width:34%;}
.promoItem > dd:nth-of-type(2){  width:63%;}
html.breakpoint-mobile #shoppingBagDetail.collapsed dl.promoItem {display:none;}

</style>


<!-- BEGIN Override src of Close Window button in the View Larger popup: from outfit.do page view larger pop up launch-->
<script type="text/javascript">
jQuery(window).load( function() {
	if( jQuery('#close_button').length > 0 ) {
	 	jQuery('#close_button').attr('src','/Asset_Archive/GPWeb/content/0002/581/055/assets/button_close_window.gif');
	}	
});
</script>
<!-- END Override src of Close Window button in the View Larger popup -->




<!-- BEGIN: hide topnav on checkout - OneSite fix -->
<script type="text/javascript">
if( location.pathname == '/checkout/order.do' ) {
	document.write('<style type="text/css"> #topNav { display:none !important } </style>');
}
</script>
<!-- END: hide topnav on checkout - OneSite fix -->

<!-- BEGIN force launch of EDFS popup-->
<script type="text/javascript">
if( location.pathname != '/checkout/order.do' ) {
	jQuery(window).load( function(){
		var showEDFSLegalPop = gidLib.getQuerystringParam("freeShipLegalPop");
		if( showEDFSLegalPop == 'true' ) {
			gap.UniversalModal.publishModal({
				modalSize: 'standard',
				actionSheet: 'small',
				url: '/Asset_Archive/GPWeb/content/0010/690/059/assets/edfsLegal.html' 
			}); 
		} 
	});
}
</script>
<!-- END force launch of EDFS popup -->


<!-- BEGIN Email Sign-up Pop-up on HP with PAS -->
<script type="text/javascript">
/******************************************

    Email Sign-up Pop-up on HP
    (with PAS check) 09/09/15

******************************************/
if( location.pathname == '/browse/home.do' || location.pathname == '/' ) {


var wcdEmailPopupGOL = {
	init: function() {

		var emailCookieName = "GOL_hasSeenEmailpop";
		var hasTIDparam = gidLib.getQuerystringParam('tid');
		var hasMDTSparam = gidLib.getQuerystringParam('mdts');
		var hasdesktopActive = gidLib.getQuerystringParam('desktopSiteActive'); 
		var getTIDstring = hasTIDparam.substr(0, 4);
        var suppressPopUp = gidLib.getQuerystringParam("noPopup"); //forcemode to suppress email pop up

			/* check remind me cookie */
			  var retVal = false;
			  var lastSeen = gidLib.getCookieVar("mktUniversalPersist",emailCookieName);
			
			  if(lastSeen == "1"){
				retVal = true;
			  }else if(lastSeen != "" && lastSeen != "1"){
				//must be a timestamp...
				var today = new Date();
				if( personalizationService.model.personalizationData.personalizationInfoV1.userContext.viewDate ) {
				  today = new Date(personalizationService.model.personalizationData.personalizationInfoV1.userContext.viewDate);
				}
			
				today = today.getTime();
				var oneWeek = parseInt(lastSeen) + (60 * 60 * 24 * 7 * 1000);
				if(today < oneWeek){
				  retVal = true;
				}
			  }
			  
			  var hasSeenRecently = retVal;
			/* end check remind me cookie */

		var hasSeenEmailPop = gidLib.getCookieVar("mktUniversalPersist", emailCookieName);
		if( location.hostname.indexOf('m.gap') > -1 || location.hostname.indexOf('m.secure-www.gap.com') > -1 || hasMDTSparam == "true" || hasdesktopActive == "true" || hasSeenRecently || suppressPopUp == "true") hasSeenEmailPop = 1;

		// Exclude if &EV param
		if( hasSeenEmailPop != '1' && ( hasTIDparam == "" || hasTIDparam == undefined || getTIDstring != 'gpem' ) ) { 
			jQuery(document).on('personalizationData:ready', wcdEmailPopupGOL.launchEmailPopUpHP );
		}
	},
	launchEmailPopUpHP: function() {
		var emailCookieName = "GOL_hasSeenEmailpop";


		// If within US and is on HP and has NOT seeing the popup, show it!
		if( window["marketMessageService"] != null && marketMessageService.requestOriginCountryCode ) {
			// Only show pop-up to US and WIP
			if( ( marketMessageService.requestOriginCountryCode == 'US' || marketMessageService.requestOriginCountryCode == '' ) && ( location.pathname == '/browse/home.do' || location.pathname == '/' ) ) {

                    gap.UniversalModal.publishModal({
                        modalSize: 'standard',
                        actionSheet: 'small',
                        url: '/Asset_Archive/GPWeb/content/0011/849/275/cn11849275_emailpop.html?v=1'  //BizID  /browse/info.do?cid=1000698
                    }); 
					gidLib.setCookieVar("mktUniversalPersist", emailCookieName, "1"); 
			}
		}
	}
}

	var isGPSubsriber = false;
	var isCardStatus = false;

	//EMAIL STATUS PERSONALIZATION
	personalizationService.api.onPersonalization(function(event) {

	    var emailStatusAttributeWeCareAbout = "EMAILUS";
	    var emailStatus = event[emailStatusAttributeWeCareAbout];

	    if (emailStatus) { //email status recognized

	      personalizationService.api.personalizationDone([emailStatus, {}]);

	      var isGPSubscriber = emailStatus.indexOf("GP") >= 0 ? true : false;

	      if (!isGPSubscriber){
	        wcdEmailPopupGOL.init();
	      }
	      
	    } else {
	      //unrecognized email status/ launch popup = ' + emailStatus);
	        wcdEmailPopupGOL.init();
	    }  

	}); //END CARD STATUS PERSONALIZATION

} //end if HP

/******************************************
    End Sign-up Pop-up on HP
******************************************/
</script>

<!-- BEGIN GOL leftnav overrides -->
<script type="text/javascript">
/*******************************************************************

  THESE ARE REDIRECTS THAT REDIRECT USER ON PAGES THAT HAVE MOVED
  OR ARE LINKING INCORRECTLY IN LEFT NAV

*******************************************************************/
var WCD_CID_Redirector = function(){
  var CIDS_TO_REDIRECT = {
    '1051764'   : '/browse/category.do?cid=1047942', //Men
    '1052090'   : '/browse/category.do?cid=1050384', //Maternity
    '1052091' : '/browse/category.do?cid=1051487', //Girls
    '1052089' : '/browse/category.do?cid=1050851' //Boys
  };
  var thisCID = gidLib.getQuerystringParam("cid");
  if(typeof CIDS_TO_REDIRECT[thisCID] != "undefined"){
    //do redirect
    location.replace(CIDS_TO_REDIRECT[thisCID]);
  };
};

WCD_CID_Redirector();

////// Hide "You Saved" in checkout
/*
if (location.pathname.indexOf("checkout/order.do") > -1){
	jQuery(document).ready(function() {
		if(jQuery("#orderSummaryTotalDiscountGainedRow")) {
			jQuery("#orderSummaryTotalDiscountGainedRow").hide();
		}
	});
}
*/
</script>
<script type="text/javascript"> 
/*
* rwdImageMaps jQuery plugin v1.5
*
* Allows image maps to be used in a responsive design by recalculating the area coordinates to match the actual image size on load and window.resize
*
* Copyright (c) 2013 Matt Stow
* https://github.com/stowball/jQuery-rwdImageMaps
* http://mattstow.com
* Licensed under the MIT license
*/
;(function($) {
  $.fn.rwdImageMaps = function() {
    var $img = this;
    
    var rwdImageMap = function() {
      $img.each(function() {
        if (typeof($(this).attr('usemap')) == 'undefined')
          return;
        
        var that = this,
          $that = $(that);
        
        // Since WebKit doesn't know the height until after the image has loaded, perform everything in an onload copy
        $('<img />').load(function() {
          var attrW = 'width',
            attrH = 'height',
            w = $that.attr(attrW),
            h = $that.attr(attrH);
          
          if (!w || !h) {
            var temp = new Image();
            temp.src = $that.attr('src');
            if (!w)
              w = temp.width;
            if (!h)
              h = temp.height;
          }
          
          var wPercent = $that.width()/100,
            hPercent = $that.height()/100,
            map = $that.attr('usemap').replace('#', ''),
            c = 'coords';
          
          $('map[name="' + map + '"]').find('area').each(function() {
            var $this = $(this);
            if (!$this.data(c))
              $this.data(c, $this.attr(c));
            
            var coords = $this.data(c).split(','),
              coordsPercent = new Array(coords.length);
            
            for (var i = 0; i < coordsPercent.length; ++i) {
              if (i % 2 === 0)
                coordsPercent[i] = parseInt(((coords[i]/w)*100)*wPercent);
              else
                coordsPercent[i] = parseInt(((coords[i]/h)*100)*hPercent);
            }
            $this.attr(c, coordsPercent.toString());
          });
        }).attr('src', $that.attr('src'));
      });
    };
    $(window).resize(rwdImageMap).trigger('resize');
    
    return this;
  };
})(jQuery);

/*Responsive Image Map*/
jQuery( window ).load(function() {
    jQuery('.respImgMap img[usemap]').rwdImageMaps();
});
</script>



<!-- scroll Tracking -->
<script type="text/javascript">
if(window.location.pathname=='/' || window.location.pathname=='/browse/subDivision.do' || window.location.pathname=='/browse/division.do' ||window.location.pathname=='/browse/home.do'){
  // Homepage scroll tracking
  var windowSearch;
  var pageName;
  var bizID;
  var regex = /=([0-9.]+)/;

    windowSearch=window.location.search;
    bizID=windowSearch.match(regex);

  if(windowSearch.length>0 && bizID!=null){
    switch(bizID[1]) {
      case '83062':
          pageName="GapFit DP"
          break;
      case '5646':
          pageName="Womens DP"
          break;
      case '5065':
          pageName="Mens DP"
          break;
      case '5997':
          pageName="Maternity DP"
          break;
      case '6256':
          pageName="Girls DP"
          break;
      case '6172':
          pageName="Boys DP"
          break;
      case '6413':
          pageName="Toddler DP"
          break;
      case '6487':
          pageName="Baby DP"
          break;
      default:
          pageName="Division Page"
          break;
    }
    
  }
  else{
    pageName="Homepage"
  }

  // console.log(pageName);



  var wcdScrollOmniTracker = {
    model : {
      pageNameForOmni : '',
      divToMeasure : '',
      scrolled25 : false,
      scrolled50 : false,
      scrolled75 : false,
      scrolled100 : false,
      height0 : 0,
      height25 : 0,
      height50 : 0,
      height75 : 0,
      height100 : 0,
      debug : false
    },    

    init: function( pageNameForOmni, divToMeasure, debug ) {
      if( pageNameForOmni && divToMeasure && $(divToMeasure)) {
        var model = wcdScrollOmniTracker.model;
        model.divToMeasure = divToMeasure;
        model.pageNameForOmni = pageNameForOmni;
        if( debug ) model.debug = debug;
        
        // Add clear div at bottom to force measure to work
        jQuery('#' + divToMeasure ).append('<div style="clear:both"></div>');
        
        // Find top of element to scroll track
        var height0 = $( divToMeasure ).cumulativeOffset()[1];
        model.height0 = height0;

        // Find total height of elt and calculate 25,50,75 increments
        var totalHeight = $( divToMeasure ).getStyle('height');
        totalHeight = totalHeight.replace('px');
        totalHeight = parseInt( totalHeight );
        var quarterHeight = Math.round( totalHeight / 4 );
        model.height25 = quarterHeight + height0;
        model.height50 = ( quarterHeight * 2 ) + height0;
        model.height75 = ( quarterHeight * 3 ) + height0;
        model.height100 = totalHeight + height0;
        
        // Initialize scroll tracking
        wcdScrollOmniTracker.scrollTracker();
        Event.observe(window, 'scroll', function() {
          wcdScrollOmniTracker.scrollTracker();
        });     
      }
      else {
        if( debug ) console.info('Page name and div to measure must be specified');
      }
      
    },
    
    scrollTracker: function() {
      var model = wcdScrollOmniTracker.model;
      var totalOffsetReached = $( model.divToMeasure ).cumulativeScrollOffset();
      var heightReached = totalOffsetReached.top;
      var heightOfBrowser = document.viewport.getDimensions().height;
      heightReached = heightReached + heightOfBrowser;
      var scrollOmniText = model.pageNameForOmni + ': scroll tracking: reached ';
      
      if( heightReached > model.height25 && ! model.scrolled25 ){
        model.scrolled25 = true;
        scrollOmniText = scrollOmniText + '25';
        s.tl( model.pageNameForOmni , 'o', scrollOmniText );
        if( model.debug ) console.info( '25 reached - ' + heightReached );
      }
      
      else if( heightReached > model.height50 && ! model.scrolled50 ){
        model.scrolled50 = true;
        scrollOmniText = scrollOmniText + '50';
        s.tl( model.pageNameForOmni , 'o', scrollOmniText );
        if( model.debug ) console.info( '50 reached - ' + heightReached );
      }
      
      else if( heightReached > model.height75 && ! model.scrolled75 ){
        model.scrolled75 = true;
        scrollOmniText = scrollOmniText + '75';
        s.tl( model.pageNameForOmni , 'o', scrollOmniText );
        if( model.debug ) console.info( '75 reached - ' + heightReached );
      }
      
      else if( heightReached > model.height100 && ! model.scrolled100 ){
        model.scrolled100 = true;
        scrollOmniText = scrollOmniText + '100';
        s.tl( model.pageNameForOmni , 'o', scrollOmniText );
        if( model.debug ) console.info( '100 reached - ' + heightReached );
      }
    }
  }

  jQuery(document).ready(function(e) {
    wcdScrollOmniTracker.init( pageName, 'mainContent', false );
  });
}

</script>


<!-- END Content Item File: /content/0012/161/059/cn12161059.html -->

<!-- END - WCD Sitewide Container 2 -->

<!-- BEGIN - WCD Sitewide Container 3 -->
<!-- BEGIN Content Item File: /content/0008/792/725/cn8792725.html -->

<!-- begin CSS Hot Fix contentOverride  -->
<style type="text/css">

/* BEGIN temp fix for limit-width */
#bodyContainer.limit-width { max-width:100%; }
/* END temp fix for limit-width */

/* -- contentOverride130 begin remove associated JS override -- */
#noCookie {display:none;}
.siteErrorSpacer {display:none;}
/* -- contentOverride130 end remove associated JS override -- */

/* Begin CNOV-89 - Rewards in Checkout */
#rewardPanel .rewardsListContainer {width: 101%;}
/* End CNOV-89 - Rewards in Checkout */


/* Begin CNOV-117 CSS overrides */
.primaryButtonA, .primaryButtonB, 
.secondaryButtonA, .secondaryButtonB, 
.tertiaryButtonA, .tertiaryButtonB, .tertiaryButtonC { font-family: Arial, Helvetica, sans-serif; }

.breakpoint-small .responsiveShoppingBag .securityAndPoliciesSM { display: block }
.breakpoint-small .responsiveShoppingBag .securityAndPoliciesLXL { display: none }
.breakpoint-medium .responsiveShoppingBag .securityAndPoliciesSM { display: block }
.breakpoint-medium .responsiveShoppingBag .securityAndPoliciesLXL { display: none }

.breakpoint-large .responsiveShoppingBag .securityAndPoliciesSM { display: none }
.breakpoint-large .responsiveShoppingBag .securityAndPoliciesLXL { display: block }
.breakpoint-xlarge .responsiveShoppingBag .securityAndPoliciesSM { display: none }
.breakpoint-xlarge .responsiveShoppingBag .securityAndPoliciesLXL { display: block }
/* End CNOV-117 CSS overrides */

/* BEGIN favorites showing topnav/footer on small breakpoint fix */
@media (max-width: 567px) and (max-aspect-ratio: 1/1) {
	.favoritesPage #topNav { display:none }
	.favoritesPage #footer { display:none }
	.favoritesPage #productBagError { width:auto }
}
/* END favorites showing topnav/footer on small breakpoint fix */

/* BEGIN Value Center Points popup fix */
.customer_valuePage modal .modal--close-button:after { content:"X" }
/* END Value Center Points popup fix */

/* BEGIN OSCAT-532 outfitPage fix - 032116 */
.outfitPage #mainContentContainer #mainContent
 {
	width: 1400px;
	float:none;
}
/* END OSCAT-532 outfitPage fix */

</style>
<!-- end CSS Hot Fix contentOverride  -->




<!-- ONESITE fix modal functionality on category page 012615 -->
<script type="text/javascript">

function searchText() {};
function autoCorrectText() {};

// yoshi fix
jQuery(function() { jQuery('#popupLayeredContent').removeClass('universal-modal show-modal') });

</script>
<style type="text/css">
	/*.has-open-component {position: inherit;}*/
</style>
<!-- end ONESITE fix modal functionality on category page -->

  <!-- begin contentOverride23 -->
  <script type="text/javascript">
// FEDEX TRACKING	
(function() {
    if (location.pathname == "/profile/shipment_detail.do") {
        Event.onDOMReady(function() {
            var as = $$('a[href*=http://fedex.com/Tracking?action=track&language=english&cntry_code=us&initial=x&tracknumbers]');
            as.each(function(a){
                if (a && a.href) {
                    var url = a.href;
                    if (url.indexOf("tracknumbers=") == -1) {
                        url = url.replace("tracknumbers","tracknumbers=");
                        a.href = url;
                    }
                }
            });
        });
    }
})();
</script>
  <!-- end contentOverride23 -->

<!-- override 36 - account order status help link fix -->
<!-- add returns link to headerLinks -->
<script type="text/javascript">
// <![CDATA[
/* MODIFY CS RETURNS link 11.13.12 JP */
if( ( location.pathname == '/profile/order_status_detail.do' ) || ( location.pathname == '/profile/shipment_detail.do' ) || ( location.pathname == '/profile/order_history.do' ) || (location.pathname == '/profile/single_order_detail.do')) {
  var OrderStatusHelpLinkOverride = Class.create({
	initialize:function() {
	},
	model: {
		orderStatusLinkFixed:'/customerService/info.do?cid=81266',
		
		orderReturnsLinkContent:'<a href="/customerService/info.do?cid=81264">Returns</a>'
	},
	controller:{
		init:{
			main:function() {
				var model = orderStatusHelpLinkOverride.model;
				// Find order status link
				var orderStatusLink = $('mainContent');
				orderStatusLink = orderStatusLink.select('div.headerLinks');
				if( orderStatusLink && orderStatusLink.length > 0 ) {
					orderStatusLink = orderStatusLink[0];
					orderStatusLink = orderStatusLink.select('a');
					if( orderStatusLink && orderStatusLink.length > 1 ) {
						orderStatusLink = orderStatusLink[1];
						orderStatusLink.href = model.orderStatusLinkFixed;
					}
					if((location.pathname == '/profile/single_order_detail.do') && orderStatusLink.length == 1) {
						orderStatusLink = orderStatusLink[0];
						orderStatusLink.href = model.orderStatusLinkFixed;
					}
				}	
				
				// Add order returns link
				
				var orderReturnsLink = $('mainContent');
				
				orderReturnsLink = orderReturnsLink.select('div.headerLinks');
				
				if( orderReturnsLink && orderReturnsLink.length > 0 ) {
					orderReturnsLink = orderReturnsLink[0];
					
					orderReturnsLink.insert({top: model.orderReturnsLinkContent});
				}
			}
		}
	}
  });
  var orderStatusHelpLinkOverride = new OrderStatusHelpLinkOverride();
  Event.observe( window, 'load', function() {
	orderStatusHelpLinkOverride.controller.init.main();
  });
}	
// ]]>
</script>
<!-- BEGIN: content override 97 -->
<script type="text/javascript">
document.observe('dom:loaded',function() {
	if (location.pathname == "/customerService/storeLocator.do") {
		if ($('iFrameContent')) $('iFrameContent').setStyle({
			width : "988px",
			height : "560px"
		});
	}
});
</script>
<!-- END: content override 97 -->
<!-- BEGIN: content override 100 Global Gateway -->
<script type="text/javascript">
if(window['resourceBundleValues'] &&
resourceBundleValues.intlShipSiteRedirectContent.ca.contentMessage1){
   resourceBundleValues.intlShipSiteRedirectContent.ca.contentMessage1 = 'Free shipping on orders of $50 or more';
   resourceBundleValues.intlShipSiteRedirectContent.ca.contentMessage2 = ''; 
}
</script>
<!-- END: content override 100 Global Gateway -->

<!--5/2/2016 Begin limit product count on tablet size -->
<script type="text/javascript">
(function($) {
    $(function() {
      $(window).width() < 1025 &&
        gap.FacetFeatureSwitch.setConfig({ pageProductCount: 200 });
      gap.pageProductData && document.fire('productPage:ready');
    });
})(jQuery);
</script>
<!-- End limit product count on tablet size -->

<!-- Begin Content Override 107 please remove css-->
<script type="text/javascript">
document.observe("dom:loaded", function() {
	var parentEle = $('completeRegistrationPanel');
	if (parentEle) {
		var badElements = parentEle.getElementsBySelector('img[class="universalButtonSprite universalButtonSpriteQuickLookClose"]');
		badElements.each(function(ele) {
			ele.className = ele.className + 'On';
		});
	}
});
</script>
<!-- End Content Override 107 please remove css-->
<!-- contentOverride113 begin -->
<script type="text/javascript">
if (window['checkout'] && checkout.controller && checkout.controller.modules.billing ) {
	checkout.controller.modules.billing.getBillingRequest = checkout.controller.modules.billing.getBillingRequest.wrap(
		function(old) {
			var status = false;
			try { status = old(); }
			catch(e) { status = false; }
			finally { status = false; }
			return status;
		}
	);
}
if (window['checkout'] && checkout.controller && checkout.controller.modules.signIn ) {
	checkout.controller.modules.signIn.getSignInRequest = checkout.controller.modules.signIn.getSignInRequest.wrap(
		function(old) {
			var status = false;
			try { status = old(); }
			catch(e) { status = false; }
			finally { status = false; }
			return status;
		}
	);
}
</script>
<!-- contentOverride113 end -->
<!-- begin contentOverride130 with associated CSS override -->
<script type="text/javascript">
	if (location.pathname == "/cookieFailure.do") {
		Event.observe(window,'load',function() {
			$('noCookie').style.display = "block";
			$$('.siteErrorSpacer').invoke('setStyle',{"display":"block"});
		});
	}
</script>
<!-- end contentOverride130 with associated CSS override-->

<!-- BEGIN IT Override - disable responsiveNav calls 12/10/2015 edited 01/25/2016-->
<script type="text/javascript">
/** commented out 021916
if (reportingService && reportingService.controller && reportingService.controller.reportingManager) {
    reportingService.controller.reportingManager.getReportingRequest = function(viewManagers) {
        var reportingManager = reportingService.controller.reportingManager;
        var reportRegistry = reportingService.model.reportRegistry;
        var viewManager = null ;
        if (viewManagers instanceof Array) {
            for (var viewManagerCount = 0; viewManagerCount < viewManagers.length; viewManagerCount++) {
                viewManager = viewManagers[viewManagerCount];
                reportingManager.setViewManagerToReportRegistry(viewManager);
            }
        } else if (viewManagers instanceof Object && reportingService.controller.viewManagers && 
          reportingService.controller.viewManagers.responsiveNav && 
          reportingService.controller.viewManagers.responsiveNav.responsiveNavViewManager &&
          viewManagers !== reportingService.controller.viewManagers.responsiveNav.responsiveNavViewManager) {
            viewManager = viewManagers;
            reportingManager.setViewManagerToReportRegistry(viewManager);
        }
        reportingManager.inspectReportRegistry();
    };
}
**/
if (reportingService && reportingService.controller && reportingService.controller.viewManagers &&
    reportingService.controller.viewManagers.productpageViewManager && reportingService.controller.viewManagers.productpageViewManager.controller) {

    reportingService.controller.viewManagers.productpageViewManager.controller.getReportRequest = function() {
        var reportingManager = reportingService.controller.reportingManager;
        var viewManager = reportingService.controller.viewManagers.productpageViewManager;
        var productReviewService = window["productReviewService"];
        var productReviewStatus = reportingService.controller.viewManagers.productpageViewManager.controller.productReviewStatus;
        if (typeof productReviewService !== "undefined" && productReviewService.constants.bvReviews.BV_REVIEW_ENABLED == "true") {
            var apiUrl = productReviewService.constants.bvApiUrl.BV_API_URL;
            var styleColorId = productReviewService.constants.legacyStyleColor.BV_LEGACY_STYLECOLOR;
            viewManager.isWaitComplete = true;
            if (window.XDomainRequest) {
                var transport = new XDomainRequest();
                if (transport) {
                    transport.onload = function() {
                        var data = transport.responseText.evalJSON();
                        if (data.Results[0] && data.Results[0].ProductStatistics) {
                            productReviewStatus.totalReviewCount = data.Results[0].ProductStatistics.ReviewStatistics.TotalReviewCount;
                            productReviewStatus.bvRatingRange = data.Results[0].ProductStatistics.ReviewStatistics.OverallRatingRange;
                            productReviewStatus.bvAvgRating = data.Results[0].ProductStatistics.ReviewStatistics.AverageOverallRating;
                        }
                        reportingManager.getReportingRequest();
                    };
                    transport.onerror = function() {
                        reportingManager.getReportingRequest();
                    };
                    transport.open("get", apiUrl + styleColorId);
                    transport.send();
                }
            }  else {
                jQuery.ajax({type: "GET",url: apiUrl + styleColorId,data: {},async: true,contentType: "application/json; charset=utf-8",dataType: "jsonp",success: function(data) {
                    if (data.Results[0] && data.Results[0].ProductStatistics) {
                        productReviewStatus.totalReviewCount = data.Results[0].ProductStatistics.ReviewStatistics.TotalReviewCount;
                        productReviewStatus.bvRatingRange = data.Results[0].ProductStatistics.ReviewStatistics.OverallRatingRange;
                        productReviewStatus.bvAvgRating = data.Results[0].ProductStatistics.ReviewStatistics.AverageOverallRating;
                    }
                    reportingManager.getReportingRequest();
                },error: function() {
                    reportingManager.getReportingRequest();
                }});
            }
        } else {
            viewManager.isWaitComplete = true;
            reportingManager.getReportingRequest(); 
        }
    };
}
</script>
<!-- END IT Override - disable responsiveNav calls -->


<!-- Disabling certain Omni Calls 11/23/2015-->
<!--
<script type="text/javascript">
if( window["reportingService"] != null && reportingService.controller && reportingService.controller.reportingManager ) {

   reportingService.controller.reportingManager.sendAnalyticsEventForOmniReport = function () {
       var reportingManager = reportingService.controller.reportingManager;
       var isOmnitureTransmissionRequired = reportingManager.isOmnitureTransmissionRequired();

       var omniDiv = document.getElementById('omniSendAnalytics');

       if (!omniDiv) {
           omniDiv = document.createElement('div');
           omniDiv.id = "omniSendAnalytics";
           omniDiv.setAttribute('omniIndex', 0);
           document.body.appendChild(omniDiv);
       }

       if (isOmnitureTransmissionRequired) {
           try {
               if (!(s.channel == "GAP:responsiveNavChannel" && s.pageName == "gp:browse:Home"))
                   s_code = s.t();
               var index = parseInt(omniDiv.getAttribute('omniIndex') || 0, 10);
               var indexStr = '';
               if (index != null) {
                   indexStr = index + '_';
               }
               var omniPixel = window['s_i_' + indexStr + s.visitorNamespace];
               if (omniPixel || s_code) {
                   index = index + 1;
                   omniDiv.innerHTML = (omniPixel.src || s_code);
                   omniDiv.setAttribute('omniIndex', index);
               }
           } catch (ex) { }
       }
   };

}
</script> -->
<!--End Disabling certain Omni Calls -->




<!-- BEGIN IT Override #138 - excessive omniture call mitigation -->
<script type="text/javascript">
if (reportingService && reportingService.controller.viewManagers.rewardBannerViewManager && reportingService.controller.viewManagers.rewardBannerViewManager.controller) {
reportingService.controller.viewManagers.rewardBannerViewManager.controller.getReportRequest = function() {};
}
</script>
<!-- END IT Override #138 - excessive omniture call mitigation -->

<!-- BEGIN IT Override #139 = Omniture Product Page calls for Speciality store-->

<script type="text/javascript">
if( window["reportingService"] != null && reportingService.controller && reportingService.controller.reportingManager ) {

    reportingService.controller.reportingManager.getReportingRequest = function(viewManagers) {
        if (!(typeof viewManagers === "object" && viewManagers.reportName === "responsive product page")){
            var reportingManager = reportingService.controller.reportingManager;
            var reportRegistry = reportingService.model.reportRegistry;
            var viewManager = null ;
            if (viewManagers instanceof Array) {
                for (var viewManagerCount = 0; viewManagerCount < viewManagers.length; viewManagerCount++) {
                    viewManager = viewManagers[viewManagerCount];
                    reportingManager.setViewManagerToReportRegistry(viewManager);
                }
            } else if (viewManagers instanceof Object) {
                viewManager = viewManagers;
                reportingManager.setViewManagerToReportRegistry(viewManager);
            }
            reportingManager.inspectReportRegistry();
        }
    };

    reportingService.controller.reportingManager.inspectReportRegistry = function () {
        if (!window['s']) {
            return;
        }
        var reportingManager = reportingService.controller.reportingManager;
        var reportRegistry = reportingService.model.reportRegistry;
        reportingManager.registryHasWaitReports = false;
        for (var i = 0; i < reportRegistry.length; i++) {
            if (reportRegistry[i].reportName === 'responsive product page') {
                reportRegistry[i].isWaitReport = false;
            }
            reportingManager.registryIterator(reportRegistry[i], i);
        }
        if (!reportingManager.registryHasWaitReports) {
            reportingManager.setABTestingOverrideVariables();
            reportingManager.transmitRequest();
        }
    };

}
</script>



<!-- End IT Override #139 -->


<!-- BEGIN content override CNOV-9 JS -->
<script type="text/javascript">
function swapSignInFormTarget() {
	var signInFormTargetLocation = location.search;
		if (signInFormTargetLocation.indexOf('.jsp') > -1) {
			 var currentSignInTargetURL = $('existing_targetURL').value;
			 var currentRegisterTargetURL = $('new_targetURL').value;
			 if (currentSignInTargetURL.indexOf('www') == -1) {
				 if (currentSignInTargetURL && currentSignInTargetURL.indexOf('.jsp') > -1) {
					 var newSignInTargetURL = 'http://www.gap.com' + currentSignInTargetURL;
				 } else {
					 var newSignInTargetURL = '/';
				 }
				 // set target URL value
				 $('existing_targetURL').value = newSignInTargetURL;
			 }
			 if (currentRegisterTargetURL.indexOf('www') == -1) {
				 if (currentRegisterTargetURL && currentRegisterTargetURL.indexOf('.jsp') > -1) {
					 var newRegisterTargetURL = 'http://www.gap.com' + currentRegisterTargetURL;
				 } else {
					 var newRegisterTargetURL = '/';
				 }
				 $('new_targetURL').value = newRegisterTargetURL;
			 }
		}
}
	if (location.pathname =='/profile/sign_in.do') {
		document.observe("dom:loaded",function() {
			swapSignInFormTarget();																 
		});
}
</script>
<!-- END content override CNOV-9 JS -->


<!-- BEGIN content override CNOV-WCD-Quicklinks-Removal-Override -->
<script type="text/javascript">
 
if( window["crossLink"] ) {
  crossLink.wct = '';
}
 
</script>
<!-- END content override CNOV-WCD-Quicklinks-Removal-Override -->


<!-- Begin CNOV-79 - responsive checkout release -->

<script type="text/javascript">

(function() {

    // config stuff
    var wcdName = 'chkoutMode50',
        wcdSuite = 'mktUniversalPersist',
        codeName = 'checkoutMode',
        codeVar = 'isEnhanced',
        wcdSegPrefix = 'SEG_',
        forceModeName = 'forceMode',
        isUSMarket = /\.com$/.test(location.host),
        segments = isUSMarket ? '50-50' : '100-0',
        eVar = '42',
        isCheckoutPage = window.location.pathname === '/checkout/order.do' && window.checkout,
        domain = (window.gidBrandSiteConstruct || {}).cookieDomain || null;

    CheckoutABTest();



    function CheckoutABTest() {

        function fixCheckoutShoppingBag() {
        	if (!isCheckoutPage) return;

            jQuery(window).load(function() {
            	var shouldFix = window.responsiveService && !responsiveService.api.isMobileBrowser();
            	if (!shouldFix) return;

            	jQuery('#shoppingBagDetail').css({'overflow': 'visible', 'height': 'auto', 'max-height':'none'});
            });
      
        }


        function fixIE7Crash() {
            if (!clientBrowser.isIE7) return;
            if (!window.gidLib ) return;

            gidLib.inProgressIndicator.open = function(args) {
                this.args = args;
                var requestInProgressMaskNode = this.createRequestInProgressNode();
                this.setInProgressNodeMessage();
                this.setPosition();
                
                this.hiddenDropDownNodes = gidLib.hideDropDownsUnderElement(requestInProgressMaskNode); // IE 6x layer bug - select inputs show through layers.
                Event.observe(window,"resize",gidLib.inProgressIndicator.setPosition);
                
            };
        }

        (function fixInterstitial() {
            if (!window.gidLib || (window.gidLib && !gidLib.layeredPopup)) return;

            gidLib.layeredPopup.openInterstitialDisplay = function(args) {
                var color = (args.color ? args.color : "#fff");
                var opacity = (args.opacity ? args.opacity : "0.65");
                var rgbColors;

                if (clientBrowser.isIE9Up && color[0] === '#') {
                    rgbColors = gidLib.hex2rgb(color);
                    color = 'rgba(' + rgbColors.red + ',' + rgbColors.green + ',' + rgbColors.blue + ',' + opacity + ')';
                } else if ((clientBrowser.isIE8 || clientBrowser.isIE7) && color.indexOf('rgba') >= 0){
                    color = '#ccc';
                }

                this.hasBuzz = (args.buzz != undefined ? args.buzz : true);
                var id = "layeredPopupInterstitial";
                var interstitial = $(id);
                if (!interstitial) {
                    interstitial = $(document.createElement("div"));
                    interstitial.id = id;
                    document.body.appendChild(interstitial);
                    Event.observe(interstitial,"click",this.interstitialBuzzEffect.bind(this));
                }

                var clientWidth = (document.documentElement && document.documentElement.clientWidth ? document.documentElement.clientWidth : document.body.clientWidth);
                var clientHeight = (document.documentElement && document.documentElement.clientHeight ? document.documentElement.clientHeight : document.body.clientHeight);
                var scrollLeft = (document.documentElement && document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft);
                var scrollTop = (document.documentElement && document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop);
                var docW = clientWidth + scrollLeft;
                var docH = (clientBrowser.isIE ? document.body.offsetHeight : (document.documentElement ? document.documentElement.offsetHeight : document.body.offsetHeight));
                if (clientHeight > docH) docH = clientHeight;
                interstitial.setStyle({
                    position:"absolute",
                    top:"0px",
                    left:"0px",
                    width:docW+"px",
                    height:docH+"px",
                    display:"block",
                    background:color,
                    zIndex:"98",
                    opacity:opacity,
                    filter:"alpha(opacity=" + (opacity*100) + ")"
                });
            };
        })();

        function handleSegB() {
            var codeValue = escape(codeVar + '=true');
            gidLib.setCookie(codeName, codeValue, null, '/', domain);

            fixIE7Crash();
            fixCheckoutShoppingBag();
        }

        handleSegB();
    }

})();


</script>
<!-- End CNOV-79 - responsive checkout release -->

<!-- Begin CNOV-87 v4b -->
<script type="text/javascript">

(function() {

	var orderBrandsCookie = 'strOrderBrands';
    var agentDescription = browserService.api.agentDescription().toLowerCase();
    var isSafari = false;
    if (agentDescription.indexOf('safari') != -1) {
          isSafari = true; 
    }

	function isMobileShoppingBag() {
		return (window.location.host.indexOf('m.') >= 0
		                && (window.location.pathname.indexOf('/buy/shopping') >= 0 ||
		                	window.location.pathname.indexOf('edit_shipping_method_bag') >= 0))
		                && window.shoppingBag &&
		                !shoppingBag.controller.checkoutManager.shouldUseAbsoluteCheckoutPath();
	}

	function isCheckout() {
		return window.location.pathname.indexOf('/checkout/') >= 0 && window.checkout != null; 
	}

	function isOrderConfirm() {
		return window.location.pathname.indexOf('/checkout/orderConfirm.do') >= 0;	
	}


	function setOrderBrands(brands) {
		if (!isSafari && window.localStorage) {
			if (brands === '') {
				localStorage.removeItem(orderBrandsCookie);
			} else {
				localStorage.setItem(orderBrandsCookie, brands);
			}
			
		}
		setCookieVar("omniSession",orderBrandsCookie,brands);
	}

	function getOrderBrandsViaStorage() {
		var orderBrands = "";
		if (!isSafari && window.localStorage) {
			orderBrands = (localStorage.getItem(orderBrandsCookie) || '');
		} else {
			orderBrands = (getCookieVar("omniSession",orderBrandsCookie) || '');
		}
        return orderBrands;
	}

	function getOrderBrands() {
		var orderBrands = "";
		if (isOrderConfirm()) {
			if (orderConfirm.productBrands) {
				orderBrands = orderConfirm.productBrands;
			} else {
				orderBrands = getOrderBrandsViaStorage();
			}
		} else {
			orderBrands = getOrderBrandsViaStorage();
		}
        return orderBrands;
	}

	function trackOrderBrandsOnOrder() {
		if (!window.reportingService || !(
			window.reportingService 
			&& reportingService.controller.viewManagers.orderViewManager
			&& reportingService.controller.viewManagers.orderViewManager.controller)) return;
		
		var oldSetPlaceOrderValues = reportingService.controller.viewManagers.orderViewManager.controller.helper.setPlaceOrderReportingValues;
		reportingService.controller.viewManagers.orderViewManager.controller.helper.setPlaceOrderReportingValues = function() {
			oldSetPlaceOrderValues();

			var isOrderBrandsEmpty = (getCookieVar("omniSession","strOrderBrands") || '').length === 0;

			var helper = reportingService.controller.viewManagers.orderViewManager.controller.helper;
			var productInfo = helper.getPlaceOrderReportingProductsHelper(); 
			var productBrands = productInfo.productBrands;

			setOrderBrands(productBrands);
			
			var isOrderBrandsEmptyAfterReset = (getOrderBrands() || '').length === 0;

			var cookieLimit = browserService.controller.getCookieLimits();
			var isCookieSizeTooLarge = (document.cookie.length > cookieLimit.totalMaxSize) || (document.cookie.split(';').length > cookieLimit.maxCount);
			s.eVar0 = 'orderPlacement: brandsEmpty=' + isOrderBrandsEmpty + ', brandsEmptyAfterReset=' + isOrderBrandsEmptyAfterReset + ', cookieTooLarge: ' + isCookieSizeTooLarge;
			s.t();
		} ;	
	}

	function trackOrderBrandsOnOrderConfirm() {
		if (!window.reportingService || !(window.reportingService
			&& reportingService.controller.viewManagers.orderConfirmViewManager
			&& reportingService.controller.viewManagers.orderConfirmViewManager.controller)) return;
		
		reportingService.controller.viewManagers.orderConfirmViewManager.controller.setReportModel = function() {
			var commonViewManager = reportingService.controller.viewManagers.commonViewManager;
			var orderConfirmViewManager = reportingService.controller.viewManagers.orderConfirmViewManager;
			var commonModel = commonViewManager.model;
			var orderConfirmModel = orderConfirmViewManager.model;
			var order = orderConfirmModel.order;
			var reportName = orderConfirmViewManager.reportName;
			var sAccount = null;
			
			// get product bag contents:
			// updated: correct info at (orderController.js)getPlaceOrderReportingProductsHelper:function()
			order.products = orderConfirm.productsInBag;			

			order.zip = (orderConfirm.shippingZipCode || getCookieVar("omniSession","strOrderZip"));
			order.state = (orderConfirm.shippingState || getCookieVar("omniSession","strOrderState"));
			order.countryCode = (orderConfirm.shippingCountryCode || getCookieVar("omniSession","strOrderCountryCode"));
			order.cardTypeName = (orderConfirm.cardTypeName || getCookieVar("omniSession","strCardTypeName"));
			order.orderBrands = getOrderBrands();


			/* 
			1) omni.objOrder.strOrderId is set on the page - depends on server side datum.
			2) Check to confirm order exists with data based on order id check.
			Only if order exists should the "s" values be set.
			*/
			if (order.orderId != "") {
				orderConfirmModel.sProducts = commonModel.getSProductsFromBag(order.products, reportName);
				
				try {
					orderConfirmModel.events = orderConfirmViewManager.controller.getEventsFromsProduct(orderConfirmModel.sProducts);
				} catch (error) {
					// Default to all events if an error occurs
					orderConfirmModel.events = "purchase, event3, event4, event5, event6, event7, event16, event18, event43, event44, event45, event48";
				} 
				
				// set on orderViewManager.js
				if (commonModel.backordered) {
					orderConfirmModel.events += ", event31, event30, event29";
				}
				orderConfirmModel.viewType = reportingService.constants.viewTypes.ORDER_CONFIRM_VIEW;
			}

			// Purge all values to prevent a re-read of the data.
			setCookieVar("omniSession","strOrderZip","");
			setCookieVar("omniSession","strOrderState","");
			setCookieVar("omniSession","strOrderCountryCode","");
			setCookieVar("omniSessionProducts","strOrderProducts","");
			setCookieVar("omniSession","strOrderId","");
			setCookieVar("omniSession","strCardTypeName", "");
			setCookieVar("omniSession","hasOpenBag","");
			setCookieVar("omniSession","strOrderBrands","");

			// var suite = omni.environmentSuites[omni.objCurrentServer.suite];
			var suite = reportingService.controller.reportingManager.brandReportSuites;
			if (suite && window["gidBrandSiteConstruct"]) {
				var reportingSuites = [];
				var brandSuiteIterator = function(brandSite) {
					if (brandSite && order.orderBrands.include(brandSite.brandAbbr)
							&& suite.brandSuites[brandSite.brandCode] != undefined) {
						reportingSuites.push(suite.brandSuites[brandSite.brandCode]);
					}
				};
				gidBrandSiteConstruct.gidBrandSites.each(brandSuiteIterator);
				reportingSuites.push(suite.globalSuite);
				responsiveService.api.whenMobile(function(){
					var mobileSuite = reportingService.controller.reportingManager.brandMobileReportSuites;
					reportingSuites.push(mobileSuite.brandSuites[gidBrandSiteConstruct.currentBrandCode]);	
					reportingSuites.push(mobileSuite.globalSuite);					
				});
				sAccount = reportingSuites.join(",");
				orderConfirmModel.sAccount = sAccount;
			}     	
		};
        
        var oldOrderConfirmTransmission = reportingService.controller.viewManagers.orderConfirmViewManager.controller.setReportTransmissionVars;
        reportingService.controller.viewManagers.orderConfirmViewManager.controller.setReportTransmissionVars = function() {
			oldOrderConfirmTransmission();

			var cookieLimit = browserService.controller.getCookieLimits();
			var isBrandsEmpty = (s.eVar34 || '').length === 0;

			if (isBrandsEmpty) {
				s.eVar34 = getOrderBrands();
				isBrandsEmpty = (s.eVar34 || '').length === 0;
			}

			var isCookieTooLarge = (document.cookie.length > cookieLimit.totalMaxSize) || (document.cookie.split(';').length > cookieLimit.maxCount);
			s.eVar0 = reportingService.controller.viewManagers.orderConfirmViewManager.model.sAccount;
            s.prop57 = 'orderConfirm: brandsEmpty=' + isBrandsEmpty + ', cookieTooLarge: ' + isCookieTooLarge;

			setOrderBrands('');
		} ;	
	}

	function fixCookieLimit() {
		if (!window.browserService || responsiveService.controller.getViewport) return;

		browserService.controller.getCookieLimits = function() {
			var userAgent = navigator.userAgent;
			var isIE = userAgent.indexOf('MSIE') >= 0;
			var isChrome = userAgent.indexOf('Chrome/') >= 0;
			var isFirefox = userAgent.indexOf('Firefox/') >= 0;
			var isSafari = userAgent.indexOf('Safari/') >= 0;
			var self = browserService;

			var cookieFunc = null,
                cookieObj = null,
				cookieLimitApi = self.model.cookieLimits.api;
			if (isIE) {
				cookieObj = cookieLimitApi.Explorer(8);
			} else if (isChrome) {
				cookieObj = cookieLimitApi.Chrome();
			} else if (isFirefox) {
				cookieObj = cookieLimitApi.Firefox();
			} else if (isSafari) {
				cookieObj = cookieLimitApi.Safari();
			} else {
				cookieObj = cookieLimitApi.defaultLimits();
			}

			return cookieObj;	
		};

	}

	if (isMobileShoppingBag()) {
		fixCookieLimit();
		window.ABTestVariables.eVar0 = window.location.pathname;	
	} else if (isCheckout()) {
		fixCookieLimit();
		window.ABTestVariables.eVar0 = window.location.host;

		trackOrderBrandsOnOrder();
	} else if (isOrderConfirm()) {
		fixCookieLimit();
		trackOrderBrandsOnOrderConfirm();
	}
	

})();

</script>
<!-- End CNOV-87 -->

<!-- Begin CNOV-93 - cookie purge test - CHANGED TO CENTRALIZED, EXTERNAL CALL -->
<script type="text/javascript" src="/Asset_Archive/GPWeb/content/0008/792/725/assets/cnov93.js"></script>
<!-- End CNOV-93 - cookie purge test -->


<!-- Begin CNOV-110 -->
<script type="text/javascript">
jQuery(document).ready(
	function() {
		var shoppingBagAnchors = jQuery("a[href='/buy/shopping_bag.do']");
		if (gidBrandSiteConstruct && shoppingBagAnchors.length > 0) {
			/* Elements are present on display, so collect the hrefs. */
			var currentBrandCode = gidBrandSiteConstruct.currentBrandCode;
			var secureUrl = gidBrandSiteConstruct.gidBrandSites[currentBrandCode].secureUrl;
			var secureShoppingBagUrl =  secureUrl + "/buy/shopping_bag.do";
			jQuery.each(shoppingBagAnchors, function(i, shoppingBagAnchor) {
				shoppingBagAnchor.href = secureShoppingBagUrl;
			});
		}
	}
);
// Update to fix 'your bag' text link in shopping bag area
document.observe('personalizationData:ready', function() {
	var shoppingBagAnchors = jQuery("#universalInlineBagContainer a[href='/buy/shopping_bag.do']");
	if (gidBrandSiteConstruct && shoppingBagAnchors.length > 0) {
		var currentBrandCode = gidBrandSiteConstruct.currentBrandCode;
		var secureUrl = gidBrandSiteConstruct.gidBrandSites[currentBrandCode].secureUrl;
		var secureShoppingBagUrl =  secureUrl + "/buy/shopping_bag.do";
		jQuery.each(shoppingBagAnchors, function(i, shoppingBagAnchor) {
			shoppingBagAnchor.href = secureShoppingBagUrl;
		});
	}
});
</script>
<!-- End CNOV-110 -->

<!-- Begin CNOV-112 -->
<script type="text/javascript">
if (window.location.pathname.indexOf('/buy/shopping_bag.do') != -1) {
	if (window["shoppingBagPage"]) {
		shoppingBagPage.loadProductData = function(strProductId,dataLoaderAction,strVariantId,strStyleColorId,productBrandCode) {
			if (strProductId == 0) return;
			this.productId = strProductId; this.variantId = strVariantId;
			this.dataLoaderAction = dataLoaderAction;
			var currentLocale = personalizationService.model.personalizationData.personalizationInfoV1.userContext.localeCode;
			var productDataUrl = this.getProductDataUrl(strProductId, strVariantId, strStyleColorId, currentLocale);
			if (!productBrandCode || productBrandCode == gidBrandSiteConstruct.currentBrandCode ) {

				document.fire("productPage:dataRequest");
				if (typeof this.processInlineProductData == 'function' && brandConst.IS_OPTIMIZED_PRODUCT_PAGE_ACTIVE && dataLoaderAction == "initial") {
					this.processInlineProductData();
				}
				else {
					new Ajax.Request(
						productDataUrl,
						{
							method: 'get',
							onComplete: this.parseProductDataAjaxResponse.bind(this),
							onException: this.productDataExceptionHandler
						}
					);
				}
			} else {
				var gidBrand = gidBrandSiteConstruct.gidBrandSites[parseInt(productBrandCode, 10)];
				if (gidBrand) {
					var args = {strProductId:strProductId};
					gidLib.loadScript({
						callerObject:this,
						src:gidBrand.secureUrl + productDataUrl,
						timeout:{
							handler:this.loadScriptTimeoutHandler.bind(this),
							args:args,
							timeDelay:20
						},
						callback:{
							handler:this.loadScriptCallbackHandler.bind(this),
							args:args,
							timeDelay:0.1
						}
					});
				}
			}
		}
	}
}
</script>
<!-- End CNOV-112 -->

<!-- Begin CNOV-113 - shopping bag Learn More popup fix -->
<script type="text/javascript">
if( location.pathname == '/buy/shopping_bag.do' || location.pathname == '/buy/shopping_bag_delete_item.do' || location.pathname == '/buy/shopping_bag_save_item.do' || location.pathname == '/buy/shopping_bag_move_item.do' || location.pathname == '/buy/edit_shipping_method_bag.do' ) {

jQuery(document).ready(
	function() {
		// Addition from AS
		responsiveService.model.pageStrategies = {};
		// Popup link fix - change all /customerService & /browse popups to /buy
		var linkToUpdate = jQuery('.shippingOptionLearnMoreLink a[onclick], #contentItemContainer10000425 a[onclick]');
		if( linkToUpdate.length > 0 ) {
			linkToUpdate.each( function( index, linkElement ) {
				if( jQuery( linkElement ).attr('href').indexOf('/customerService/info.do') > -1 || jQuery( linkElement ).attr('onclick').indexOf('/customerService/info.do') > -1 || jQuery( linkElement ).attr('href').indexOf('/browse/info.do') > -1 || jQuery( linkElement ).attr('onclick').indexOf('/browse/info.do') > -1 ) {
					var linkHref = jQuery( linkElement ).attr('href');
					var linkOnClick = jQuery( linkElement ).attr('onclick');
					linkHref = linkHref.replace('/customerService/info','/buy/info').replace('/browse/info','/buy/info');
					linkOnClick = linkOnClick.replace('/customerService/info','/buy/info').replace('/browse/info','/buy/info');
					jQuery( linkElement ).attr('href', linkHref );
					jQuery( linkElement ).attr('onclick', linkOnClick );
				}
      });
		}
	}
);

}
</script>
<!-- End CNOV-113 - shopping bag Learn More popup fix -->

<!-- Begin CNOV-115 - shopping bag returns link fix -->
<script type="text/javascript">
if( location.pathname == '/buy/shopping_bag.do' || location.pathname == '/buy/shopping_bag_delete_item.do' || location.pathname == '/buy/shopping_bag_save_item.do' || location.pathname == '/buy/shopping_bag_move_item.do' || location.pathname == '/buy/edit_shipping_method_bag.do' ) {

/* Returns page CIDs by BU
GP US - 81264, ON US - 82724, BR US - 80735, PL US - 80975, AT US - 79311
GP CA - 2326, ON CA - 3325, BR CA - 1324
GP EU - 2326, BR EU - 1324
GP JP - 81264, BR JP - 80735 */

jQuery(document).ready(
	function() {
		var wcdReturnsLinkUpdater = {
			// Returns Link CIDs by brand code
			cidsByBrandCode : { 
				'1':'81264', '3':'82724', '2':'80735', '4':'80975', '10':'79311',
				'7':'2326', '9':'3325', '8':'1324',
				'20':'2326', '21':'1324', '28':'2326', '29':'1324',
				'24':'81264', '25':'80735'
			},
			updateLink: function() {
				if( gidBrandSiteConstruct && gidBrandSiteConstruct.currentBrandCode ) {
					// Determine CID to add by brand code
					var brandCode = gidBrandSiteConstruct.currentBrandCode;
					var returnLinkCid = '';
					for( var key in wcdReturnsLinkUpdater.cidsByBrandCode ) {
						if( key == brandCode ) returnLinkCid = wcdReturnsLinkUpdater.cidsByBrandCode[key];
					}

					// Update the link
					var linkToUpdate = jQuery('.shoppingInformationLinks a');
					linkToUpdate.each( function( index, element ) {
						var linkHtml = jQuery(element).html();
						if( linkHtml.toLowerCase().indexOf('return') > -1 ) {
							jQuery(element).attr('href','/customerService/info.do?cid=' + returnLinkCid );
						}
          });
				}
			}			
		}
		wcdReturnsLinkUpdater.updateLink();
	}
);

}

</script>
<!-- End CNOV-115 - shopping bag returns link fix -->

<!-- Begin CNOV-119 - Hide Private Policy link in signin page -->
<script type="text/javascript">
if ((location.pathname != '/profile/sign_in.do') || (location.pathname != '/profile/validate_sign_in.do')){
	jQuery(document).ready(function(){
		jQuery("#privacyPolicyLink").hide();
	});
};
</script>
<!-- End CNOV-119 - Hide Private Policy link in signin page -->

<!-- Begin CNOV-117 - Responsive Shopping Bag US launch -->
<script type="text/javascript">
// Responsive shopping bag enable
if( location.hostname.substr(0,2) != 'm.' ) {

	var responsiveBagCookieCheck = gidLib.getCookieVar('mktUniversalPersist','responsiveShoppingBagMode');
	var shoppingBagRedirect = false;
	if( responsiveBagCookieCheck != 'responsiveBag_SegB' ) {
		gidLib.removeCookieVar('mktUniversalPersist', 'responsiveShoppingBagMode');
		// setCookieVar doesn't work properly
		//gidLib.setCookieVar('mktUniversalPersist','responsiveShoppingBagMode','responsiveBag_SegB');

		var expDate = (expDate != null ? expDate : gidLib.getFutureDate({ "years": 5 }));
		var domain = (window.gidBrandSiteConstruct || {}).cookieDomain || null;
		
		var cookieStr = gidLib.getCookie('mktUniversalPersist');
		if (cookieStr != '') {
			var cookieArray = cookieStr.split('&');
			var newCookiStr = '';
			var cookieVar;

			cookieArray.each(function(cookieArrayPair, i) {
				cookieVar = cookieArrayPair.split('=');
				cookieVar = cookieVar[0];

				if (cookieVar != 'responsiveShoppingBagMode') {
					newCookiStr = newCookiStr + cookieArrayPair;
					if (i < cookieArray.length) {
						newCookiStr = newCookiStr + '&';
					}
				}
			});
			newCookiStr += 'responsiveShoppingBagMode=responsiveBag_SegB';

			// Reset cookie with new value

			/* Set cookie */
			gidLib.setCookie('mktUniversalPersist', escape(newCookiStr), expDate, '/', domain );
		}
		else {
			gidLib.setCookie('mktUniversalPersist', escape('responsiveShoppingBagMode=responsiveBag_SegB'), expDate, '/', domain );
		}
				
		if( location.pathname == '/buy/shopping_bag.do' || location.pathname == '/buy/shopping_bag_delete_item.do' || location.pathname == '/buy/shopping_bag_save_item.do' || location.pathname == '/buy/shopping_bag_move_item.do' || location.pathname == '/buy/edit_shipping_method_bag.do' ) {
			// Omni tracking of users in cart with no resp bag cookie
			//s.tl( this, 'o', "Desktop user in legacy bag, redirected");
			shoppingBagRedirect = true;
		}
	}
	if( shoppingBagRedirect == true ) {
		var alreadyRedirected = gidLib.getQuerystringParam('bagRedirect');
		if( alreadyRedirected != 'true' ) {
			window.location = '/buy/shopping_bag.do?bagRedirect=true';
		}
		else {
			//s.tl( this, 'o', "Desktop user in legacy bag, already redirected");
		}
	}

}

var responsiveBagAbTestOn = false;
if( location.pathname == '/buy/shopping_bag.do' || location.pathname == '/buy/shopping_bag_delete_item.do' || location.pathname == 'buy/shopping_bag_save_item.do' || location.pathname == '/buy/edit_shipping_method_bag.do' ) {
	// To be replaced by AB test var
	responsiveBagAbTestOn = ( gidLib.getCookieVar('mktUniversalPersist','responsiveShoppingBagMode') == 'responsiveBag_SegB' ) ? true : false;
}

// Responsive bag JS overrides
if( window["responsiveBagAbTestOn"] != null && responsiveBagAbTestOn ) {

	// iPad postage stamp fix
	if( navigator.userAgent.indexOf("iPad") > -1 ) {
		document.write('<style type="text/css">#universalBarContainer #universalMarketingContainerTop { width:auto !important }<\/style>');
		if( window["fixTopForiPad"] != null ) { 
			fixTopForiPad = fixTopForiPad.wrap( function( om ) { });
		}
	}
	
	// Pixman fix
	if (!pixelManagementService.constants.DATE_IN_USE) { 
		pixelManagementService.constants.DATE_IN_USE = brandConst.DATE_IN_USE;
	}
	// Fix to ensure if pixman misses shopping bag ready, it catches from the below. Doesn't re-fire pixman pixels
	jQuery(document).ready(function () {
		setTimeout(function () {
			//document.fire('shoppingBag:ready');
			jQuery(document).trigger('shoppingBag:ready');
		}, 2000);
	});
	
	// Update promo and return links to launch in new tab
	var app = angular.module('gid.app.shoppingBag.directives');
	app.config(function($provide) {
		$provide.decorator('shoppingBagAboutYourOrderDirective', function($delegate) {
			var directive = $delegate[0];
			directive.compile = function () {
				return function (scope, element, attrs) {
					var i = 0;
					scope.$watch('$parent.shoppingBagData.shoppingBag.activeItems', function (newActiveItems) {
						if( jQuery(window).width() < 569 ) {
							//console.log('ativeItems changed');
							var promoIds = [];
							angular.forEach(scope.upsellPromos, function (up) { promoIds.push(up.promoId); } );
							angular.forEach(scope.appliedPromos, function (ap) { promoIds.push(ap.promoId); } );
							jQuery('div.promos').each(function () {
								//console.log('inside  jquery');
								jQuery(this).unbind('click');
								var aEl = jQuery('.promo a', jQuery(this));
								aEl.unbind('click');
								var promoURL = scope.promoUrlPrefix + promoIds.shift();
								//console.log(promoURL);
								aEl.attr('href', promoURL);
								aEl.attr('target', '_blank');
							});
						}
					});
				};
			};
			return $delegate;
		});
	});

	// Update 7-9 day ship option text
	var shoppingBagTransformerModule = angular.module('gid.transformer.shoppingBagTransformer');
	shoppingBagTransformerModule.config(function($provide) {
		$provide.decorator('shoppingBagTransformer', function($delegate) {
			var oldTransformResponse    = $delegate.transformResponse;
			var oldTransformBagResponse = $delegate.transformBagResponse;

			var overrideShippingData = function(jsonData) {
				if (jsonData.shoppingBag && jsonData.shoppingBag.shippingInfo) {
					// Change isInternationalShipping flag from a boolean to a string to fix BorderFree checkout
					var isInternationalShipping = jsonData.shoppingBag.shippingInfo.isInternationalShipping;
					jsonData.shoppingBag.shippingInfo.isInternationalShipping = 
						(isInternationalShipping === true || isInternationalShipping === 'true') ? 'true' : 'false';

					if (jsonData.shoppingBag.shippingInfo.shippingOptions) {
						var shipOptions = jsonData.shoppingBag.shippingInfo.shippingOptions;
						
						// Remove 2096 (Windy City), 3000,3001 (Surge test) from array and set to JSON data
						/*shipOptions = shipOptions.filter( function (el) {
							return el.shippingId !== "2096" && el.shippingId !== "3000" && el.shippingId !== "3001";
						});
						jsonData.shoppingBag.shippingInfo.shippingOptions = shipOptions;*/
						
						// Change Description for standard option
						shipOptions.each( function( elt, idx ) {
							if( elt.description == '7-9 business days' ) elt.description = '7-9 business days - FREE Every Day ($50 min)'; 
						});
					} 
				}
				return jsonData;
			};

			$delegate.transformResponse = function(data, headers) {
				var jsonData = oldTransformResponse(data, headers);
				return overrideShippingData(jsonData);
			};

			$delegate.transformBagResponse = function(data) {
				var jsonData = oldTransformBagResponse(data);
				return overrideShippingData(jsonData);
			}

			return $delegate;
		});
	});
		
	// Double-click delete override
	var shoppingBagServiceModule = angular.module('gid.services.shoppingBagService');
	shoppingBagServiceModule.config(function($provide) {
		$provide.decorator('shoppingBagService', function($delegate, $q) {
			var asyncFuncPromises = [];
			$delegate.syncCall = function (asyncFunc) {
				var len = asyncFuncPromises.length;
				var lastAsyncFuncPromise = (len > 0) ? asyncFuncPromises[len - 1].promise : null;
				var asyncFuncArgs = Array.prototype.slice.call(arguments, 1);
				var asyncFuncDefer = $q.defer();
				var asyncFuncPromise = asyncFuncDefer.promise;
				var actionId = asyncFuncArgs[0];
				for (var i = asyncFuncPromises.length - 1; i >= 0; --i) {
					var afp = asyncFuncPromises[i];
					if (afp.id === actionId) { return afp.promise; }
				}
				asyncFuncPromises.push({ id: actionId, promise: asyncFuncPromise });
				var callAsyncFunc = function () {
					asyncFunc.apply(this, asyncFuncArgs)
					.then(function (response) { 
						asyncFuncPromises.shift();
						asyncFuncDefer.resolve(response);
					},function (reason) { 
						asyncFuncPromises.shift();
						asyncFuncDefer.reject(reason);
					});
				};
				if (lastAsyncFuncPromise) {       	    	   
					lastAsyncFuncPromise.then(function() {
					callAsyncFunc();
				});
				}
				else {
					callAsyncFunc();
				}
				return asyncFuncPromise;
			};
			return $delegate;
		});
	});	
	
	
}

// Android fix
if( location.pathname == '/checkout/order.do' ) {
	if( window.responsiveService ){
		responsiveService.controller.handlers.androidHandler = function(){}
	}
}

</script>
<!-- End CNOV-117 - Responsive Shopping Bag CA launch -->

<!-- Begin CNOV-123 IOS 8 PP Hover Events Patch -->
<script type="text/javascript">
////////////////////////////////////////////////// 
/////////  IOS 8 PP Hover Events Patch v3  ///////
//////////////////////////////////////////////////

//Begin adding Gap Kiosk Patch
var checkGapKiosk = (gidLib.getQuerystringParam("gapkiosk") == "true") || (gidLib.getCookieVar("mktUniversalPersist","gapkiosk") == "true");
if(checkGapKiosk){
	gidLib.setCookieVar('mktUniversalPersist', 'gapkiosk', 'true');
	jQuery(document).ready(function(){
		jQuery('#textFooterLinks1_10000515').hide();
		if (location.pathname == '/browse/product.do'){
			jQuery('#findInStoreTabWindow').hide();
		}
	});
}
//End adding Gap Kiosk Patch

var iOS8PPPatch = function() {
	var iOS8PPPatchURL = document.location.href;
	var iOS8PPPatchDevice = navigator.userAgent;
	if ( (gidLib.getCookieVar("mktUniversalPersist","gapkiosk") == "true") || (((iOS8PPPatchURL.indexOf("product.do") > 0) || (iOS8PPPatchURL.indexOf("outfit.do") > 0)) && ((iOS8PPPatchDevice.indexOf("Version/8") > 0) || (iOS8PPPatchDevice.indexOf("CPU OS 9") > 0) || (iOS8PPPatchDevice.indexOf("Version/9") > 0) || (iOS8PPPatchDevice.indexOf("CriOS") > 0) && (iOS8PPPatchDevice.indexOf("Mobile") > 0))) ) {		
//console.info("iOS 8 Patching...");				
		//// take action and remove the offending events on the first touch...
		var ColorSwatchArr = jQuery("#colorSwatchContent").children("input");
		var SizeChoiceArr1 = jQuery("#sizeDimension1Swatches").children("button");
		var SizeChoiceArr2 = jQuery("#sizeDimension2Swatches").children("button");
		var QLColorSwatchArr = jQuery("#quickLookColorSwatches").children("input");
		var QLSizeChoiceArr1 = jQuery("#quickLookSize1Swatches").children("button");
		var QLSizeChoiceArr2 = jQuery("#quickLookSize2Swatches").children("button");
		for (i = 0; i < ColorSwatchArr.length; i++) {
			var myButton = document.getElementById(ColorSwatchArr[i].id);
			myButton.removeAttribute('onfocus');
			myButton.removeAttribute('onmouseover');
			myButton.removeAttribute('onmouseout');
			myButton.setAttribute("onclick","productPage.swatchOver('color'," + i + ");productPage.setColor(" + i + ");");		
		}
		
		for (j = 0; j < SizeChoiceArr1.length; j++) {
			var myButton = document.getElementById(SizeChoiceArr1[j].id);
			myButton.removeAttribute('onfocus');
			myButton.removeAttribute('onmouseover');
			myButton.removeAttribute('onmouseout');		
		}
		
		for (k = 0; k < SizeChoiceArr2.length; k++) {
			var myButton = document.getElementById(SizeChoiceArr2[k].id);
			myButton.removeAttribute('onfocus');
			myButton.removeAttribute('onmouseover');
			myButton.removeAttribute('onmouseout');		
		}
		for (i = 0; i < QLColorSwatchArr.length; i++) {
			var myButton = document.getElementById(QLColorSwatchArr[i].id);
			myButton.removeAttribute('onfocus');
			myButton.removeAttribute('onmouseover');
			myButton.removeAttribute('onmouseout');	
			myButton.setAttribute("onclick","outfitPage.swatchOver('color'," + i + ");outfitPage.setColor(" + i + ");");		
	
		}
		
		for (j = 0; j < QLSizeChoiceArr1.length; j++) {
			var myButton = document.getElementById(QLSizeChoiceArr1[j].id);
			myButton.removeAttribute('onfocus');
			myButton.removeAttribute('onmouseover');
			myButton.removeAttribute('onmouseout');		
		}
		
		for (k = 0; k < QLSizeChoiceArr2.length; k++) {
			var myButton = document.getElementById(QLSizeChoiceArr2[k].id);
			myButton.removeAttribute('onfocus');
			myButton.removeAttribute('onmouseover');
			myButton.removeAttribute('onmouseout');		
		}
	}		
}

Event.observe(document,"productPage:ready",iOS8PPPatch);
Event.observe(document,"outfitPage:dataRequest", function() {
	if (document.location.href.indexOf("outfit.do") > 0) {
		var outfitArray = jQuery("div.sProductImage");
		for (i = 0; i < outfitArray.length; i++) {
			outfitArray[i].setAttribute("onclick","outfitPage.moduleToggle("+ i +"); iOS8PPPatch();");
		}
	}
});
if (document.location.href.indexOf("outfit.do") > 0) {
	if(outfitPage){
		if (outfitPage.openOutfit) {
			outfitPage.openOutfit = outfitPage.openOutfit.wrap(function(om,n) {
				om(n);
				iOS8PPPatch();
			});
		}
	}
}



</script>
<!-- End CNOV-123 IOS 8 PP Hover Events Patch -->


<script type="text/javascript">
//stop google auto complete from running 12-16-14
/*jQuery(document).ready(function() {
	jQuery('.pac-container').css('visibility','hidden!important');	
			//the code gets activated on key up after 3 characters, 50 char max in field, never get to 100, the code never gets activated
			jQuery ('#shippingAddressFieldGroup4-shippingAddressLine1').click(function() {
				setTimeout(function() {
	 				minChars = 100;	
					//autocomplete = 1;	   
					}, 1000);
Â  				});
			jQuery ('#shippingAddressFieldGroup4-shippingAddressLine1').focus(function() {
Â  				setTimeout(function() {
	 				minChars = 100;	
					//autocomplete = 1;		   
					},1000);
				});
			jQuery ('#shippingAddressFieldGroup4-shippingAddressLine1').keyup(function() {
Â  			setTimeout(function() {
	 				minChars = 100;	
					//autocomplete = 1;		   
					}, 1000);
				});
		});
		*/
				//END stop google auto complete from running 12-16-14
</script>

<!-- Begin Gift Message Emoji Errors 1/9 - by Ollie - contact Dilip & Cristina T for more info -->
<script type="text/javascript">
Event.observe(window,"load", function() {
	if(location.pathname == "/checkout/order.do"){ 
		jQuery("div#giftMessageSubSection > div.subHeadingCol").after("<span style='color:#993333;font-size: 75%;'>We can not accept emojis in gift messages.  Adding them may delay delivery of your item.</span>");}
	});
</script>
<!-- End Gift Message Emoji Errors 1/9 - by Ollie - contact Dilip & Cristina T for more info -->



<!-- BEGIN Fix for iPad, Safari checkout issue -->
<script type="text/javascript">

if( location.pathname == '/checkout/order.do' ) {
	var wcdIPadSafariCheckoutFixer = function() {
		var VolControlSegment = gidLib.getCookieVar("mktUniversalPersist", "GAC_AB07272015_004");
		if( VolControlSegment == "GAC_AB07272015_004_SegA" ) {
			// Check for iOS 8.3, iPad, and Safari (and not Chrome)
			var userAgent = navigator.userAgent;
			var iOS = parseFloat( ('' + (/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec( userAgent ) || [0,''])[1]).replace('undefined', '3_2').replace('_', '.').replace('_', '') ) || false;
			//console.log('iOS detect = ' + iOS );
			if( iOS.toString().indexOf('8.3') > -1 && userAgent.indexOf('iPad') > -1 && userAgent.indexOf('Safari') > -1 && userAgent.indexOf('Chrome') == -1 ) {
				jQuery('#billingCardNumber').attr('onchange','').attr('onblur','');
				jQuery('#billingCardNumber').on('change', function () {
					if( checkout.model.data.modules.registration.guest ) {
						//$('saveCreditCardAsDefault').checked = false;
						jQuery('#saveCreditCardAsDefault').attr('checked',false)
					}
				});
			}
		}
	}
	jQuery(document).ready(function(e) {
		wcdIPadSafariCheckoutFixer();
	});
}

</script>
<!-- END Fix for iPad, Safari checkout issue -->

<!-- BEGIN Fix shopping bag link for sem customers - Byung -->
<script type="text/javascript">
	if (location.href.indexOf("sem=true") != -1) {
		Event.observe(document,"updateDomWithPersonalizationData:completed", function () {
			jQuery('#universalInlineBagContainer').find('a').each(function(){
				if (this.href.indexOf('shopping_bag.do') != -1) this.href = "http://" + location.hostname + "/buy/shopping_bag.do";
			});
		});
	}
</script>
<!-- END Fix shopping bag link for sem customers - Byung -->


<!-- BEGIN Fix for Checkout -->
<script type="text/javascript">
if( location.pathname == '/checkout/order.do' ) {
	jQuery(document).ready(function(){
		jQuery('#billingCardNumber').on('change', function () {  
			if (checkout.model.data.modules.registration.guest && !checkout.model.data.modules.registration.visaGuest && !checkout.model.data.modules.shipping.billingSameAsShipping) {
				ccm.billing.view.openBillingAddressEditForm();
				jQuery('#billingAddressRightColReadOnly').hide();
		    }
		});
	});
}
</script>
<!-- END Fix for Checkout -->

<!-- BEGIN Checkout Enhancement fix -->
<script type="text/javascript">
if( location.pathname == '/checkout/order.do' ) {
	jQuery(document).ready(function(e) {
		jQuery('#billingExpirationMonth').on('focus', function(){
			if (checkout.model.enableBillingModuleEnhancements && jQuery('#billingExpirationMonth').val().trim() === '') {
				jQuery('#billingExpirationMonth').val('');
			}
		});
  });
}
</script>
<!-- END Checkout Enhancement fix -->

<!-- BEGIN: ONESITE2-87 -->
<script type="text/javascript">
if (location.pathname == "/checkout/order.do") {
	jQuery(document).ready(function() {
		jQuery('html').addClass("js");
	});
}
 </script>
<!-- END: ONESITE2-87 -->


<!-- BEGIN disable search in IE9 on product pages -->
<script type="text/javascript">
if( location.pathname == '/browse/product.do' && navigator.userAgent.indexOf('MSIE 9') > -1 ) {
	jQuery(document).ready(function(e) {
		jQuery('div[class~=js-search-component]').remove()
	});
}
</script>
<!-- END disable search in IE9 on product pages -->


<!-- should fix the spinner err due to 'template.match' is not a function error  - provided by Yoshi (1/29/16) -->
<script type="text/javascript">
(function fixTemplateMatch() {
    var oldFillTemplate = gidLib.fillTemplate;
    gidLib.fillTemplate = function(template, object) {
	    template = template.template ? template.template : template;
        return oldFillTemplate(template, object);
	};
})();
</script>

<!-- BEGIN: Fix referrer method -->
<script type="text/javascript">
gidLib.getReferrer = function() {
    return window.referrer || document.referrer
}
</script>
<!-- END: Fix referrer method -->


<script type="text/javascript">
//Begin adding GP Kiosk Patch - contact OT
var checkBRKiosk = (navigator.userAgent.indexOf('Gap Store Kiosk') > -1)
if(checkBRKiosk){
                gidLib.setCookieVar("mktUniversalPersist","GPStoreKioskFashionS","GPKIOSKFS");
                gidLib.setCookie( 'SurveyPersist', 'surveyType=RockbridgeSurvey' );
}
//End adding GP Kiosk Patch - contact OT
</script>


<!--Version2 - incase timing issues, we listen for outfit page ready event-->
<!-- BEGIN: New outfits, use high fidelity image -->
<script type="text/javascript">
if( window.location.pathname == '/browse/outfit.do' ) {
   var OutfitNgOverride = {
       initHighFidelityImages: function() {
           var imgPath,
             oid = gidLib.getQuerystringParam('oid') ? gidLib.getQuerystringParam('oid').substring(4) : '',
             selectedColor;

           if (window.outfitPage) {
               outfitPage.arrayProducts.forEach(function(ele){
                   if (ele.strDefaultColorId === oid) {
                       //imgPath = ele.objV.arrayVariantStyleColors[0].arrayVariantStyleColorImages.outfitCategoryLargeImage.strImagePath;
                       selectedColor = ele.selectedColor;
                       imgPath = ele.objV.arrayVariantStyleColors[selectedColor].styleColorImagesMap.SC_OUT_VLI;
                       if (imgPath && imgPath.length > 0) {
                           jQuery('#outfit_product_image_large').setSrc(imgPath);
                       }
                       return;
                   }
               });
           }
       }        

   }; 
   jQuery(document).on('outfitPage:ready', function(e) {
       OutfitNgOverride.initHighFidelityImages();
   });
}
</script>
<!-- END: New outfits, use high fidelity image -->

<!-- BEGIN: New outfits, product name click fix -->
<script type="text/javascript">
if (window.outfitPage) {
   window.outfitPage.goProductPage = function(n) {
       var objP = typeof n !== 'undefined' ? this.arrayProducts[n].objP : this.objP, 
         objV = typeof n !== 'undefined' ? this.arrayProducts[n].objV : this.objV,
         strURL = '',
         selectedColorNg = typeof n !== 'undefined' ? this.arrayProducts[n].selectedColor : this.selectedColor;
         
       var strCookieVal =  objV.arrayVariantStyleColors[selectedColorNg].strColorName + "," +
                           (this.arrayAllSizeDimension1[this.selectedSizeDimension1] ? this.arrayAllSizeDimension1[this.selectedSizeDimension1].strName : "") + "," +
                           (this.arrayAllSizeDimension2[this.selectedSizeDimension2] ? this.arrayAllSizeDimension2[this.selectedSizeDimension2].strName : "") + "," +
                           this.strSelectedQty;
       setCookieVar("globalSession","selectionData",strCookieVal);
       
       // Override to update product ID to 9-digit - 1) selected color, 2) default color, 3) product ID
       var outfitProductSelectedStyleColorId = '';
       // Selected color this.selectedColor (from outfit object)
       if( selectedColorNg && objV.arrayVariantStyleColors && objV.arrayVariantStyleColors[selectedColorNg] && objV.arrayVariantStyleColors[selectedColorNg].strColorCodeId ) {
           outfitProductSelectedStyleColorId = objV.arrayVariantStyleColors[selectedColorNg].strColorCodeId;
       }
       // Default color for variant - objV.defaultVariantStyleColor
       if( outfitProductSelectedStyleColorId == '' && objV.arrayVariantStyleColors && objV.arrayVariantStyleColors[ objV.defaultVariantStyleColor ] && objV.arrayVariantStyleColors[ objV.defaultVariantStyleColor ].strColorCodeId ) {
           outfitProductSelectedStyleColorId = objV.arrayVariantStyleColors[ objV.defaultVariantStyleColor ].strColorCodeId;
       }
       // 6-digit default product ID, objP.strProductId
       if( outfitProductSelectedStyleColorId == '' && objP.strProductId ) {
           outfitProductSelectedStyleColorId = objP.strProductId;
       }
       
       strURL = '/browse/product.do?' + (getQuerystringParam("cid") != "" ? 'cid=' + getQuerystringParam("cid") + '&' : '') + 'pid=' + outfitProductSelectedStyleColorId;
       if (this.isFromSBS) strURL += this.strSBSUrlSuffix;
       window.location.href = strURL;
   };
}
</script>

<!-- BEGIN: Convert PC91 Now $X.XX display to PC73 format -->
<script type="text/javascript">
jQuery(window).load(function () {
	var mupMsg = jQuery("p[class=buy-box--messaging_unit-promotion]");
	var mupText = mupMsg.text();
	if (mupText.indexOf("Now ") > -1) {
		var pp = jQuery("h5[class=product-price]");
		pp.addClass("product-price--markdown").removeClass("product-price");
		
		jQuery('<h5 class="product-price product-price--highlight">' + mupText + '</h5>').insertAfter(pp);
		mupMsg.hide();
	}
});
</script>
<!-- END: Convert PC91 Now $X.XX display to PC73 format -->


<!-- BEGIN: Fix customerAttribute code -->
<script type="text/javascript">
if (reportingService &&
	reportingService.controller.viewManagers.commonViewManager &&
	reportingService.controller.viewManagers.commonViewManager.model && 
	reportingService.controller.viewManagers.commonViewManager.model.profile && 
	reportingService.controller.viewManagers.commonViewManager.model.profile.getCustomerAttribute) {

	reportingService.controller.viewManagers.commonViewManager.model.profile.getCustomerAttribute = function(attrName) {
        var foundAttributeArr;
        var xpmConstants = personalizationService.constants.xpmConstants;
        var featureSelections = personalizationService.model.personalizationData.personalizationInfoV1.featureSelections || {};
        var customerAttributes = featureSelections[xpmConstants.EVERGREENS] || [];


        // ensure customerAttributes is an array ///////////////////////////
        if (customerAttributes && customerAttributes.constructor !== Array) customerAttributes = [customerAttributes];
        ////////////////////////////////////////////////////////////////////

        if (customerAttributes.length === 0)
            return "";
        foundAttributeArr = customerAttributes.filter(function(obj) {
            var beginsWith = new RegExp('^' + attrName);
            var endsWith = new RegExp(attrName + '$');
            return beginsWith.test(obj[xpmConstants.PERSONALIZATION_NAME]) || endsWith.test(obj[xpmConstants.PERSONALIZATION_NAME]);
        });
        if (foundAttributeArr.length) {
            return foundAttributeArr[0][xpmConstants.PERSONALIZATION_VALUE];
        }
        return '';
    };
}
</script>
<!-- END: Fix customerAttribute code -->

<!-- END Content Item File: /content/0008/792/725/cn8792725.html -->

<!-- END - WCD Sitewide Container 3 -->

<!-- BEGIN - WCD Sitewide Container 4 -->
<!-- BEGIN Content Item File: /content/0010/835/869/cn10835869.html -->


<!-- WCD Product Page overrides -->
<style type="text/css">
/* Ship/return marketing */
#newTabWindow { border:1px #c1c1c1 solid; border-top:0; font-size: 11px; margin: 0; padding: 1px 10px 10px; width: 308px; color:#000;}
#newTabWindow .italCopy {font-size:9px;font-style:italic;}
#newTabWindow ul { color:#666; font-size:10px; list-style-type:disc; margin-bottom:10px; padding:0; }
#newTabWindow li { margin-left:20px; }

/* PRODUCT PAGE MAIN CONTENT */
.mainContentWrapper {float:left;padding-top:12px;margin-top:0px;}
#productNameText, #productNameText h2, #productNameText h1 {color:#363636;font-family:arial,verdana,sans-serif;font-size:16px;line-height:14px;}
.productMarketingFlag {color:#707070;}

/* REVIEW SUMMARY BOX */
.brand10 #reviewSummaryHeaderGID {background-color:#B3B1AF;color:#FFFFFF;font-size:10px;padding:3px;text-align:center;}
#reviewSummary {color:#333333;font-size:10px;font-weight:normal;line-height:15px;}
#reviewSummary #reviewSummaryData #averageOverallRating {background-color:#F2F1F0;height:28px;padding:6px;}
#reviewSummary #reviewSummaryData #averageOverallRating #totalReviewCount {color:#363636;height:14px;text-align:center;}
#reviewSummary #reviewSummaryData .reviewSummaryFitTitle {color:#707070;float:left;font-weight:normal;text-align:right;width:72px;}
#reviewSummaryTagTitleActivities {color:#363636;}
#reviewSummary #reviewSummaryData #reviewLinks {border-top:1px solid #dddddd;margin:10px 20px;padding:10px 10px 5px;text-align:center;}
#reviewSummary a {color:#91278F;}

#newTabWindow .copyBlockHeader {
    font-weight: bold;
    margin: 9px 0px 9px 0px;
}
.social-links {
	text-align: left;
}
.social-links #pinItDiv {
	margin-left: 105px;
}
/* Fix for ONESITE 1497
* To override margin: auto; inline style 
*/

.onesiteCatPage #topNav {
	padding-left: 0.5em;
}
.onesiteProdPage #topNav {
	padding-left: 1.53em;
}
</style>

<!-- BEGIN FB Like button -->
<script type="text/javascript">
	// Facebook like button
	if( location.pathname == '/browse/product.do' && navigator.userAgent.indexOf("MSIE 8") == -1 && navigator.userAgent.indexOf("MSIE 9") == -1 ) {
		var fbProductPageLikeButton = {
			initialize: function() { },
			model: {
				searchDexPageStructure: 'http%3A%2F%2Fwww.gap.com%2Fproducts%2F'
			},
			controller: {
				init: function() {
					var model = fbProductPageLikeButton.model;
					if (jQuery('.social-links').length !== 0 && jQuery('#fb_like').length == 0) {
						/* Revised SearchDex URL implemented 06/28 */
					
						var searchDexProdName = gap.pageProductData.name;
						searchDexProdName = searchDexProdName.replace(/\s+/g, '-').toLowerCase();
						var searchDexStyleId = gap.pageProductData.styleId;
						var productName = escape(searchDexProdName + '-P' + searchDexStyleId + '.jsp?tid=atsm000000');

						jQuery('.social-links').append('<div id="fb_like" style="margin-top:7px"><iframe src="https://www.facebook.com/plugins/like.php?href=' + model.searchDexPageStructure + productName + '&send=false&layout=button_count&width=100&show_faces=false&action=like&colorscheme=light&font&height=21" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:100px; height:21px" allowTransparency="true"></iframe></div>');

					}
				}
			}
		}

		jQuery(document).ready(function(){
			if (jQuery('body').hasClass('onesiteProdPage')) {
				fbProductPageLikeButton.controller.init();
			}
		});
		
		jQuery(document).on('productPage:ready', function(e) {
			fbProductPageLikeButton.controller.init();
		});
	}
</script>
<!-- END FB Like button -->

<!-- BEGIN Product page insert Free Shipping link -->
<script type="text/javascript">
if(location.pathname == "/browse/product.do" && window["productPage"] && navigator.userAgent.indexOf("MSIE 8") == -1 && navigator.userAgent.indexOf("MSIE 9") == -1 ){
	var siteOverrides = {
		init : function(){
			//override product page "Free Shipping > learn more" link
			var freeShippingContainer = jQuery("#newTabWindow");
			if( freeShippingContainer.length > 0 ) {
				var htmlStr = freeShippingContainer.html();
				htmlStr = htmlStr.replace("/customerService/info.do?cid=68886","/customerService/info.do?cid=44959");
				freeShippingContainer.html( htmlStr );
			}
		}
	}
	
	jQuery(document).on('productPage:ready', function(e) {
		siteOverrides.init();
	});
}
</script>
<!-- END Product page insert Free Shipping link -->

<!-- BEGIN product page ship/return info insert -->
<script type="text/javascript">
if( location.pathname == "/browse/product.do" && window["productPage"] && navigator.userAgent.indexOf("MSIE 8") == -1 && navigator.userAgent.indexOf("MSIE 9") == -1  ) {
	
var wcdProductPageShipReturnInserter = {
	init: function() {
		var prodType = 'general';
		if( jQuery('#productMailOnlyReturn').display != 'none' ) { prodType = "generalExclusive"; }
		else if( jQuery('#productFreeReturn').display != 'none' ) { prodType = "selectExclusive"; }
		
		var shipReturnContent = '';
		switch( prodType ) {
			// case "general":
			// 	shipReturnContent = '<div class="copyBlock">shipping &amp; returns </div><ul><li>FREE shipping on all orders over $50<br /><span class="italCopy">Select  the "FREE" option in the shopping bag</span></li><li>$7 Flat Rate for orders under $50</li><li>FREE returns &amp; exchanges by mail &amp; to stores on all orders</li><li>No returns or exchanges on final sale items.</li></ul><a href="javascript:void(0)" onclick="return wcdProductPageShipReturnInserter.openPopAndSendToOmni()">Learn More</a><br/><br/>Print out a <a href="http://www.gap.com/profile/returns_address_entry.do">prepaid UPS label</a> or a <a href="/profile/returns_address_entry_usps.do">prepaid USPS return shipping label</a>.';
			// 	break;
			
			// case "generalExclusive":
			// 	shipReturnContent = '<div class="copyBlock">shipping &amp; returns </div><ul><li>FREE shipping on all orders over $50<br /><span class="italCopy">Select  the "FREE" option in the shopping bag</span></li><li>$7 Flat Rate for orders under $50</li><li>FREE returns &amp; exchanges by mail</li><li>No returns or exchanges on final sale items.</li></ul><a href="javascript:void(0)" onclick="return wcdProductPageShipReturnInserter.openPopAndSendToOmni()">Learn More</a><br/><br/>Print out a <a href="http://www.gap.com/profile/returns_address_entry.do">prepaid UPS label</a> or a <a href="/profile/returns_address_entry_usps.do">prepaid USPS return shipping label</a>.';
			// 	break;
			
			// case "selectExclusive":
			// 	shipReturnContent = '<div class="copyBlock">shipping &amp; returns </div><ul><li>FREE shipping on all orders over $50<br /><span class="italCopy">Select  the "FREE" option in the shopping bag</span></li><li>$7 Flat Rate for orders under $50</li><li>FREE returns &amp; exchanges by mail</li><li>No returns or exchanges on final sale items.</li></ul><a href="javascript:void(0)" onclick="return wcdProductPageShipReturnInserter.openPopAndSendToOmni()">Learn More</a><br/><br/>Print out a <a href="http://www.gap.com/profile/returns_address_entry.do">prepaid UPS label</a> or a <a href="/profile/returns_address_entry_usps.do">prepaid USPS return shipping label</a>.';
			// 	break;

			case "general":
				shipReturnContent += ''
				+ '<div class="copyBlock">shipping &amp; returns </div>'
				+ '<p class="copyBlockHeader">Shipping</p>'
				+ '<ul>'
				+ 	'<li>FREE on orders of $50 or more<br/><i>Select the \'FREE\' (5-7 business days) option</i></li>'
				+ 	'<li>$7 flat rate for orders under $50</li>'
				+ '</ul>'
				+ '<p class="copyBlockHeader">Returns</p>'
				+ '<ul>'
				+ 	'<li>Free returns on all orders</li>'
				+ 	'<li>No returns or exchanges on final sale items</li>'
				+ 	'<li>By mail: prepaid <a href="/profile/returns_address_entry.do" target="_blank">UPS Label</a> or <a href="https://secure-oldnavy.gap.com/profile/returns_address_entry_usps.do" target="_blank">USPS Label</a></li>'
				+ 	'<li>In store: with invoice and card used for purchase</li>'
				+ '</ul>'
				+ '<p><a href="#edos" onclick="return wcdProductPageShipReturnInserter.openEDOSModal(\'/Asset_Archive/GPWeb/content/0010/690/059/assets/edfsLegal.html\');">Learn More</a></p>';
				break;
			
			case "generalExclusive":
				shipReturnContent += ''
				+ '<div class="copyBlock">shipping &amp; returns </div>'
				+ '<p class="copyBlockHeader">Shipping</p>'
				+ '<ul>'
				+ 	'<li>FREE on orders of $50 or more<br/><i>Select the \'FREE\' (5-7 business days) option</i></li>'
				+ 	'<li>$7 flat rate for orders under $50</li>'
				+ '</ul>'
				+ '<p class="copyBlockHeader">Returns</p>'
				+ '<ul>'
				+ 	'<li>Free returns on all orders</li>'
				+ 	'<li>No returns or exchanges on final sale items</li>'
				+ 	'<li>By mail: prepaid <a href="/profile/returns_address_entry.do" target="_blank">UPS Label</a> or <a href="https://secure-oldnavy.gap.com/profile/returns_address_entry_usps.do" target="_blank">USPS Label</a></li>'
				+ 	'<li>In store: with invoice and card used for purchase</li>'
				+ '</ul>'
				+ '<p><a href="#edos" onclick="return wcdProductPageShipReturnInserter.openEDOSModal(\'/Asset_Archive/GPWeb/content/0010/690/059/assets/edfsLegal.html\');">Learn More</a></p>';
				break;
			
			case "selectExclusive":
				shipReturnContent += ''
				+ '<div class="copyBlock">shipping &amp; returns </div>'
				+ '<p class="copyBlockHeader">Shipping</p>'
				+ '<ul>'
				+ 	'<li>FREE on orders of $50 or more<br/><i>Select the \'FREE\' (5-7 business days) option</i></li>'
				+ 	'<li>$7 flat rate for orders under $50</li>'
				+ '</ul>'
				+ '<p class="copyBlockHeader">Returns</p>'
				+ '<ul>'
				+ 	'<li>Free returns on all orders</li>'
				+ 	'<li>No returns or exchanges on final sale items</li>'
				+ 	'<li>By mail: prepaid <a href="/profile/returns_address_entry.do" target="_blank">UPS Label</a> or <a href="https://secure-oldnavy.gap.com/profile/returns_address_entry_usps.do" target="_blank">USPS Label</a></li>'
				+ 	'<li>In store: with invoice and card used for purchase</li>'
				+ '</ul>'
				+ '<p><a href="#edos" onclick="return wcdProductPageShipReturnInserter.openEDOSModal(\'/Asset_Archive/GPWeb/content/0010/690/059/assets/edfsLegal.html\');">Learn More</a></p>';
				break;
						
		}
		var newTabWindowDiv = '<div id="newTabWindow">' + shipReturnContent + '</div>';
		if( jQuery('#tabWindow').length > 0 && jQuery('#newTabWindow').length == 0 ) {
			jQuery('#tabWindow').after( newTabWindowDiv );
		}
	},
	
	sendToOmni: function( elt, eventName ) {
		s.tl( elt , 'o', eventName);
	},
	
	openPopAndSendToOmni: function() {
		//productPageShipReturnInserter.controller.sendToOmni( 'shippingReturn', 'Product Page Shipping & Return' );
		// gidLib.layeredPopup.openLayeredPopup({str:'/customerService/info.do?cid=2019',id:'shippingOptions',width:398,height:265,style:{name:'universalPopup'}});
		var u = "/Asset_Archive/GPWeb/content/0010/690/059/assets/edfsLegal.html";
		gap.UniversalModal.publishModal({
			modalSize: 'standard',
			actionSheet: 'small',
			url: u
		});
		return false;
	},
	openEDOSModal : function(u){
		gap.UniversalModal.publishModal({
			modalSize: 'standard',
			actionSheet: 'small',
			url: u
		});
		return false;
	}
};

jQuery(document).on('productPage:ready', function() {
	var currentPID = gidLib.getQuerystringParam('pid');
	currentPID = currentPID.substr(0,6);
	// Here's where you check specific product ID, change this to whatever you want to exclude
	if( currentPID != '000066' && currentPID != '000079' && currentPID != '000138' && currentPID != '000173' && currentPID != '000066' ) {   
		wcdProductPageShipReturnInserter.init();
	}
});
	
}
</script>
<!-- END product page ship/return info insert -->

<!-- BEGIN - REVIEWS 2.0 CSS OVERRIDES -->
<script type="text/javascript">
if( location.pathname == "/browse/product.do" && window["productPage"] && navigator.userAgent.indexOf("MSIE 8") == -1 && navigator.userAgent.indexOf("MSIE 9") == -1  ){

	function CheckIE(){
		var Browser;
		Browser = navigator.userAgent;
		if (Browser.indexOf("Trident") != -1 || navigator.userAgent.indexOf("MSIE") > -1){
			jQuery(".mainContentWrapper").width(632);
		}
	}
	
	var reviews2Flag = {
		init: function(){
			//Add "Ratings" to the number of ratings in the top widget
			//"Rating" for 1 rating
			//"Ratings" for 0 or more than 1 rating
			//Do not fire if there is already a "Rating" string after # of reviews
			if( jQuery(".bv-rating-ratio-count:contains('Rating')").length < 1 ) {
				if(parseInt(jQuery( "[itemprop='reviewCount']" ).html()) === 1){
					jQuery( "[itemprop='reviewCount']" ).append(' Rating');
				}else{
					jQuery( "[itemprop='reviewCount']" ).append(' Ratings');
				}
	
				jQuery(".bv-prs-container .bv-write-container").attr('style', 'line-height: 0 !important; top: -5px !important; position: relative !important;');
	
				//Remove fit review sliders
				jQuery(".bv-content-details-container").attr('style', 'display: none !important');
	
				//Remove number next to "Overall" rating sliders
				jQuery(".bv-secondary-rating-summary-rating").attr('style', 'display: none !important');
	
				//Flush out review content across the review container
				jQuery(".bv-content-details-offset-on, .bv-content-details-offset-off").attr('style', 'width: 94% !important;left: 10px !important; position: relative !important;');
	
				//Space out the "Activities" container with the "Helpful?" container
				//jQuery(".bv-cleanslate .bv-content-actions-container").attr('style', 'padding: 20px 10px 10px !important;');
	
				//Align the author's name
				jQuery(".bv-author-location span").attr('style', 'position: relative !important; left: 5px !important;');
	
				//Reduce size of "Write a Review" button at the very top widget
				jQuery(".bv-prs-container .bv-submission-button").attr('style', 'font-size: 11px !important; padding: 0 0 10px !important;');
	
				//Remove borders on left-hand side individual reviews
				jQuery(".bv-author-userstats").attr('style', 'border-style: none !important;left: 3px !important;margin: 5px 7px !important;position: relative !important;');
	
				//Decrease width of left-hand side "Votes" data label
				jQuery(".bv-author-userstats-votes").attr('style', 'width: 50px !important;');
			}
			//console.log("REVIEWS 2.0 OVERRIDES ACTIVE");
		}
	}
	
	//Prevent doubling
	var productPageLoaded = false;
	
	jQuery(document).on('productPage:ready', function() {
		//console.log("EVENT OBSERVE FIRED");
		if(productPageLoaded == false){
			productPageLoaded = true;
			var browserType = navigator.userAgent;
			if( browserType.indexOf("MSIE 8") > -1 || browserType.indexOf("MSIE 9") > -1 ) {
				CheckIE();
			}
			reviews2Flag.init.delay(3);
		}
	});
	
	//Swatch Change
	productPage.setColor = productPage.setColor.wrap(function(om, i) {
		om(i);
		reviews2Flag.init.delay(1.5);
	});
	
	//Size Change
	productPage.setSizeDimension1 = productPage.setSizeDimension1.wrap(function(om, i) {
		om(i);
		reviews2Flag.init();
	});
	
	//Size Change
	productPage.setSizeDimension2 = productPage.setSizeDimension2.wrap(function(om, i) {
		om(i);
		reviews2Flag.init();
	});
}
</script>
<!-- END - REVIEWS 2.0 CSS OVERRIDES -->

<!-- BEGIN - WCD "Pin" button insert -->
<script type="text/javascript">
	if( location.pathname == "/browse/product.do" && navigator.userAgent.indexOf("MSIE 8") == -1 && navigator.userAgent.indexOf("MSIE 9") == -1  ) {	

		var wcdPinItButtonInsert = {
			pinItStr: '',
			pinItDiv: '',
			pinDesc: '',
			pinMedia: '',
			pinURL: '',
			pinItDivStr: '',
			pinItProductID: '',
			pinItProductIDImgPath:'',
			
			
			insert_pinIt_Btn : function() {
				if( jQuery('#fb_like').length > 0 && jQuery('#pinItDiv').length == 0 ) {
					// Onesite Segment B Styles
					if (jQuery('body').hasClass('onesiteProdPage')) {
						jQuery("#fb_like").css({ "margin-left" : "5px", "overflow" : " hidden", "width" : "100px", "margin-top" : "-24px"});
					} else {
						jQuery("#fb_like").css({ "margin-left" : "45px", "overflow" : " hidden", "width" : "200px", "margin-top" : "-22px"});
					}
					
					wcdPinItButtonInsert.pinURL = encodeURIComponent(window.location.href + '&tid=gpsm000137');

					if (window["productPage"]) {
						//Set Path for the Image To Pin
						wcdPinItButtonInsert.pinItProductID = productPage.objV.arrayVariantStyleColors[productPage.selectedColor].strColorCodeId;
						wcdPinItButtonInsert.pinItProductIDImgPath = "https://secure-www.gap.com/Asset_Archive/GPWeb/AUTO/p/" + wcdPinItButtonInsert.pinItProductID.substr(0,2) + "/" + wcdPinItButtonInsert.pinItProductID.substr(2,2) + "/" + wcdPinItButtonInsert.pinItProductID.substr(4,2) + "/gap_" + wcdPinItButtonInsert.pinItProductID + ".jpg";
						wcdPinItButtonInsert.pinMedia = encodeURIComponent( wcdPinItButtonInsert.pinItProductIDImgPath);
						
					} else if (gap.pageProductData !== undefined) {
						//Set Path for the Image To Pin
						wcdPinItButtonInsert.pinItProductIDImgPath = "https://secure-www.gap.com" + gap.pageProductData.currentColorMainImage;
						wcdPinItButtonInsert.pinMedia = encodeURIComponent( wcdPinItButtonInsert.pinItProductIDImgPath);
					}
					if( jQuery('#productNameText').length > 0 ) {
						wcdPinItButtonInsert.pinDesc = jQuery('.productName').html();
					}
					if (jQuery('.description').length > 0){
						if (jQuery('.description').html() != ''){
							wcdPinItButtonInsert.pinDesc = wcdPinItButtonInsert.pinDesc + ' - ' + jQuery('.description').html();
						}		
					}
					wcdPinItButtonInsert.pinDesc = encodeURIComponent(wcdPinItButtonInsert.pinDesc);
					wcdPinItButtonInsert.pinDesc = wcdPinItButtonInsert.pinDesc.replace("'","");
					
					wcdPinItButtonInsert.pinItStr = 'https://pinterest.com/pin/create/button/?url=' + wcdPinItButtonInsert.pinURL + '&media=' + wcdPinItButtonInsert.pinMedia + '&description=' + wcdPinItButtonInsert.pinDesc;
				
					jQuery('#fb_like').before('<div id="pinItDiv"><a href="javascript:void(0);" onclick="window.open(\'' + wcdPinItButtonInsert.pinItStr + '\',\'pinIt\',\'toolbar=0,status=0,width=620,height=500\');"><img src="/Asset_Archive/ATWeb/content/0006/555/712/assets/builder_pinit.png" /></a></div>');
					jQuery('#colorSwatchContent').on('click', function(e) { wcdPinItButtonInsert.updatePinIt(); });
					jQuery('#pinItDiv').on('click', function(e) { wcdPinItButtonInsert.pinItTracking(); });
				}
			},
			
			updatePinIt : function() {
				wcdPinItButtonInsert.pinURL = window.location.href;
				if (window["productPage"]) {
					if (wcdPinItButtonInsert.pinURL.indexOf("pid=") > 0){

						wcdPinItButtonInsert.pinURL = wcdPinItButtonInsert.pinURL.substring(0,wcdPinItButtonInsert.pinURL.indexOf("pid=") + 4);
						wcdPinItButtonInsert.pinURL = wcdPinItButtonInsert.pinURL + productPage.objV.arrayVariantStyleColors[productPage.selectedColor].strColorCodeId;
					}
				}
				
				wcdPinItButtonInsert.pinURL = encodeURIComponent(Â wcdPinItButtonInsert.pinURLÂ + '&tid=gpsm000137');
				
				//Set Path for the Image To Pin
				if (window["productPage"]) {
					wcdPinItButtonInsert.pinItProductID = productPage.objV.arrayVariantStyleColors[productPage.selectedColor].strColorCodeId;
					//wcdPinItButtonInsert.pinItProductIDImgPath = "https://secure-www.gap.com/resources/productImage/v1/" + wcdPinItButtonInsert.pinItProductID + "/VLI";
					wcdPinItButtonInsert.pinItProductIDImgPath = "https://secure-www.gap.com/Asset_Archive/GPWeb/AUTO/p/" + wcdPinItButtonInsert.pinItProductID.substr(0,2) + "/" + wcdPinItButtonInsert.pinItProductID.substr(2,2) + "/" + wcdPinItButtonInsert.pinItProductID.substr(4,2) + "/gap_" + wcdPinItButtonInsert.pinItProductID + ".jpg";
				} else if (gap.pageProductData !== undefined) {
					wcdPinItButtonInsert.pinItProductIDImgPath = "https://secure-www.gap.com" + gap.pageProductData.currentColorMainImage;
				}
					wcdPinItButtonInsert.pinMedia = encodeURIComponent( wcdPinItButtonInsert.pinItProductIDImgPath);
				
				if( jQuery('#productNameText').length > 0 ) {
					wcdPinItButtonInsert.pinDesc = jQuery('.productName').html();
				}
				if (jQuery('.description').length > 0){
					if (jQuery('.description').html() != ''){
						wcdPinItButtonInsert.pinDesc = wcdPinItButtonInsert.pinDesc + ' - ' + jQuery('.description').html();
					}		
				}
				wcdPinItButtonInsert.pinDesc = encodeURIComponent(wcdPinItButtonInsert.pinDesc);
				wcdPinItButtonInsert.pinDesc = wcdPinItButtonInsert.pinDesc.replace("'","");
				wcdPinItButtonInsert.pinItStr = 'https://pinterest.com/pin/create/button/?url=' + wcdPinItButtonInsert.pinURL + '&media=' + wcdPinItButtonInsert.pinMedia + '&description=' + wcdPinItButtonInsert.pinDesc;
		
				jQuery('#pinItDiv').html('<a href="javascript:void(0);" onclick="window.open(\'' + wcdPinItButtonInsert.pinItStr + '\',\'pinIt\',\'toolbar=0,status=0,width=620,height=500\');"><img src="/Asset_Archive/ATWeb/content/0006/555/712/assets/builder_pinit.png" /></a>');
		
			},
			
			pinItTracking: function() {
				s.linkTrackVars='eVar6';
				if( brandConst.BRAND_ID == 'AT' ) { s.eVar6='ATOLPin'; }
				else if( brandConst.BRAND_ID == 'GP' ) { s.eVar6='GOLPin'; }
				else if( brandConst.BRAND_ID == 'PL' ) { s.eVar6='PLOLPin'; }
				else if( brandConst.BRAND_ID == 'BR' ) { s.eVar6='BROLPin'; }
				else if( brandConst.BRAND_ID == 'ON' ) { s.eVar6='ONOLPin'; }
				else { s.eVar6='unknownPin'; }
				s.tl(this,'o',s.eVar6);
				return true; 
			}
		}
		
		jQuery(document).ready(function(){
			if (jQuery('body').hasClass('onesiteProdPage')) {
				wcdPinItButtonInsert.insert_pinIt_Btn();
			}
		});
		jQuery(document).on('productPage:ready', function(){
			wcdPinItButtonInsert.insert_pinIt_Btn();
		});
	}	

	// Out-of-stock page redirect code
	var closedURL = document.location.href;
	// check to see if on store closed page
	if( closedURL.indexOf('store-closed') > -1 || closedURL.indexOf('OutOfStockNoResults') > -1 ) {
		var pinRef = document.referrer;
		// check to see if referred from Pinterest
		if( pinRef.indexOf('pinterest.com') > -1 ) {
			// if so, redirect to brand homepage
			var newURL = 'http://' + document.location.host;
			window.location = newURL;
		}
	}
</script>
<!-- END - WCD "Pin" button insert -->

<!-- BEGIN - Reserve in Store -->
<script type="text/javascript">
/**
* Find In Store & Reserve In Store Code
* GOL - Full Fleet with Virgin Hotel Code
* 100% on 6/29/2015
* Fix Quicklook bug
*/

var bgRiSTitle = '';
var RISanchor = '';
var risStringArr = '';
var seeMiles = '';
var checkVirginHotel = (gidLib.getQuerystringParam("virginhotel") == "true") || (gidLib.getCookieVar("globalSession","virginCookie") == "true");
sawRIS = false

//Begin Virgin Popup Hacks - Product page only
if(checkVirginHotel){

	gidLib.setCookieVar('globalSession', 'virginCookie', 'true');
	gidLib.setCookieVar('globalSession', 'searchRadius', '1');
	gidLib.setCookieVar('globalSession', 'pcode', '60601');

	var bgRiSTitle = "gapvh_product.jpg"
	var risProductBGColor = "#cd0303"

	if (location.href.indexOf("product.do") > 0 && window["productPage"]){

		//Change elements on Product Page
		Event.observe(document, "productPage:ready", function() {
			//jQuery("#getImageRIS").attr('src','/Asset_Archive/GPWeb/content/0001/030/729/assets/virgin.png');
		
			//Change elements in RiS Popup
			//RiS Popup - Page 1
			merchLocationsManager.view.storeLocationsListOverlay.open = merchLocationsManager.view.storeLocationsListOverlay.open.wrap(function(om,parentContainer, triggeredBy, productImgUrl){
				 om(parentContainer, triggeredBy, productImgUrl);			
				 jQuery("#locationEdit").text("");
			});
			//RiS Popup - Page 2
			reserveInStoreManager.view.open = reserveInStoreManager.view.open.wrap(function(om,parentContainer, triggeredBy, productImgUrl){
				 om(parentContainer, triggeredBy, productImgUrl);
				 var risStoreIDLookup = jQuery("#risStoreInfoName a").attr('href');

				 var risStoreID = risStoreIDLookup.substr( risStoreIDLookup.indexOf('storeid=')+8);
				 //Add your store ids here
				 var risStoreIDArray = ["1454","569"]		 
				 if ( jQuery.inArray( risStoreID, risStoreIDArray ) > -1 ) {
				 	 jQuery("#risHeader").html("<img src='/Asset_Archive/GPWeb/content/0001/030/729/assets/gapvh_logo.jpg'>");
					 jQuery("#risInfo").html("Virgin Hotel Concierge will deliver your items to your room, usually in three hours or less.");
					 jQuery("#risEmail").val("chicagoconcierge@virginhotels.com");
					 jQuery('#risEmail').attr('disabled', 'disabled');
					 jQuery('#risEmail').css('background-color', '#F5F5F5');
					 jQuery("[for=risEmail]").css("color","#b9b9b9");
					 //jQuery("#risMobileNumber").prop('disabled', false);
					 //jQuery("#risSendText").prop('checked', true);
					 //jQuery("#risMobileNumberField").removeClass("noSMS");
					 //jQuery("#risTextOption").hide();
					 jQuery("#risMobileNumberField").hide();
					 jQuery("#risOptInOption").hide();
					 //jQuery("#risLegalMessage").hide();
					 jQuery("#risDataRatesMessage").hide();
					 jQuery("#risBottom").html(" The charge will appear on customer\'s Virgin Hotels invoice upon checkout.  Virgin Hotels is not responsible for returns.  Customer is solely responsible for all returns using the gift receipt provided.  Customer will receive a merchandise certificate via mail for the amount paid when items are returned and not cash or credit. Customers purchasing through Virgin Hotels are not eligible to earn Gap Rewards or GapCash.");


				 }		 
			});
			//RiS Popup - Page 3 Thank You Page
			reserveInStoreManager.view.showThankYouMessage = reserveInStoreManager.view.showThankYouMessage.wrap(function(om,parentContainer, triggeredBy, productImgUrl){
				 om(parentContainer, triggeredBy, productImgUrl);
				 jQuery('#risThanksOpener').hide();			
				 jQuery('#risInfoBody1').html("Once we locate it, we\'ll email your Virgin Hotel Concierge. They\'ll contact you to confirm your order, and deliver it directly to your room.*<br/><br/> <span style=\'font-size:8px\'>*Virgin Hotels is not responsible for returns/exchanges.  Customer is solely responsible for all returns/exchanges and will receive merchandising credit when items are returned.</span>");
				 jQuery('#risInfoBody2').hide();
				 jQuery('#risInfoBody3').hide();
			});
				
		});
	}
}else{
	var bgRiSTitle = "RIS_gol_title_sm_1119.png"
	var risProductBGColor = "#d6efff"
}


// Begin GOL RisDiscoverability - Reserve In Store Cosmetic Code
var RisDiscoverability = function () {
	if(sawRIS == false){
		sawRIS = true
		// let's set the default properties for GOL - *Change image paths for hover states below*
		var props = { 
			"fillColor" 			: risProductBGColor,
			"linkColor" 			: "#336699",
			"width" 			: "330px",
			"height" 			: "64px",
			"baseURL" 			: "/Asset_Archive/GPWeb/content/0001/030/729/assets/",
			"getItFile" 			: bgRiSTitle,
			"RISBtnFile" 			: "btn_gol_find_down2.png",
			"RISBtnFileHover" 		: "btn_gol_find_on.png",
			"addToBagBtnFileOff" 		: "btn_add_gol_off.png",
			"addToBagBtnFileOn"		: "btn_add_gol_on.png"
		};
		
		
		// let's start modifying the DOM
		if ($("findInStoreButtonBox")) {
			$("findInStoreButtonBox").style.background = props.fillColor;
			$("findInStoreButtonBox").style.border = "0px";
			$("findInStoreButtonBox").style.height = "64px";
			var startString = jQuery("#findInStorePostalMsg").html();
			var risStringArr2 = new Array();
			if($("findInStorePostalMsg").select("a.postalEdit")[0]){
				RISanchor = $("findInStorePostalMsg").select("a.postalEdit")[0];
				seeMiles = jQuery("a.postalEdit");
				risStringArr = startString.split("<a");
				risStringArr2 = risStringArr[0].split("within");
				risStringArr2[0] = "within "; 			
				// replace the innerHTML of the anchor with the 2nd string
				seeMiles.html(risStringArr2[1]);
				//fix edit bug
				jQuery("#locationEdit a").text("Edit");
			} else {
				risStringArr2[0] = startString;
			}
			$("findInStorePostalMsg").select("a.postalEdit").each(function(RISanchor){ RISanchor.setAttribute('onclick','merchLocationsManager.view.postalCodeOverlay.open();');});
			var getImage = new Element("img", {"id" : "getImageRIS", "src" : props.baseURL + props.getItFile});
			var getImageDiv = new Element("div", {"id" : "getImageDivForRIS", "style" : "padding: 0px; height: 46px; width: 166px;position:relative;top: 5px;left: 5px;"});
			var textDiv = new Element("div", {"id" : "textForRIS", "style" : "height: 0px; width: 195px;position:relative;top: -17px;left: 194px;"});
			getImageDiv.update(getImage);




			$("findInStorePostalMsg").update(getImageDiv);
			textDiv.insert(risStringArr2[0]);
			textDiv.insert(RISanchor);

			$("findInStorePostalMsg").insert(textDiv);
			$("findInStoreButton").style.backgroundImage = "url(" + props.baseURL + props.RISBtnFile+ ")";
			$("findInStoreButton").style.width = "106px";
			$("findInStoreButton").style.height = "26px";
			$("findInStoreButton").style.position = "relative";
			$("findInStoreButton").style.top = "7px";
			$("findInStoreButton").style.left = "39px";
			$("findInStoreButton").style.margin = "0px";
			
			//Add To Bag Button *change image paths*
			var bagButton = $("addToBagBtn");
			bagButton.style.height = "26px";
			bagButton.style.width = "90px";
			bagButton.style.margin = "10px 5px 5px 9px";
			bagButton.style.background = "url('/Asset_Archive/GPWeb/content/0001/030/729/assets/btn_add_gol_on.png')";
			$("selectionContent").style.width = "135px";

			//Check to  see if you have Virgin Hotel Cookie to hide Miles
			if(gidLib.getCookieVar("globalSession","virginCookie") == "true"){
				jQuery("#textForRIS").hide();
				jQuery("#findInStoreButton").css('top','22px');
			}
			
			//Add this to force the miles to show in IE or any other browser
			if ((jQuery("a.postalEdit").length > 0) && (jQuery("#textForRIS").text() != 'This item is not currently available in stores.') ){
				if ( navigator.userAgent.indexOf("MSIE 8") > -1 || navigator.userAgent.indexOf("MSIE 7") > -1) {
					var ie8string = risStringArr2[1]
					ie8split = ie8string.split("<A");
					seeMiles.html(ie8split[0]);
					//fix edit bug
					jQuery("#locationEdit a").text("Edit");
				} else {
					seeMiles.html(risStringArr2[1]);
					//fix edit bug
					jQuery("#locationEdit a").text("Edit");
				}
			}
			
			//Arrange Copy - Check stores near you
			if (jQuery("#textForRIS").html() == 'Check stores near you for this product.'){
				jQuery("#textForRIS").show();
				jQuery("#textForRIS").html('Check stores near you<br />for this product');
				$("textForRIS").style.left = "119px";
				$("textForRIS").style.top = "-19px";
				$("textForRIS").style.textAlign = "right";
			}
			
			//Arrange Copy - This item is not currently
			var noStore = jQuery("#textForRIS").text();
			if (noStore.indexOf('This item is not currently available') != -1){
				jQuery("#textForRIS").show();
				jQuery("#textForRIS").html('This item is not currently<br />available in stores.');
				$("textForRIS").style.left = "119px";
				$("textForRIS").style.top = "-30px";
				$("textForRIS").style.textAlign = "right";
				jQuery("a.postalEdit").hide();
				jQuery("#findInStoreButton").hide();
			}
			else {
				// Turn Find In Store Button again
				jQuery("#findInStoreButton").show();
			}

			//Begin hover state - *change image paths*
			jQuery("#findInStoreButton").hover(function() {
			  $("findInStoreButton").style.backgroundImage = "url('/Asset_Archive/GPWeb/content/0001/030/729/assets/btn_gol_find_on.png')";
			}, function() {
			  $("findInStoreButton").style.backgroundImage = "url('/Asset_Archive/GPWeb/content/0001/030/729/assets/btn_gol_find_down2.png')";
			});
			//End hover state - *change image paths*

		}
		return false;
	}
}
// End GOL RisDiscoverability - Reserve In Store Cosmetic Code

// Begin Run RIS Code
if(location.pathname == '/browse/product.do' && window["productPage"]) {
	//Begin Show RIS Store Location List
	document.observe('findInStore:storeListRendered', function() {
		$("storeLocationsList").select("div.reserveInStore").invoke("setStyle", { display: 'block' });
		//jQuery.each(['#reserveInStore_8179', '#reserveInStore_8173', '#reserveInStore_8176', '#reserveInStore_7697', '#reserveInStore_8072', '#reserveInStore_8073', '#reserveInStore_8071', '#reserveInStore_7679', '#reserveInStore_3035', '#reserveInStore_8568', '#reserveInStore_8035', '#reserveInStore_3182', '#reserveInStore_8194', '#reserveInStore_8128', '#reserveInStore_8125', '#reserveInStore_8028', '#reserveInStore_8274', '#reserveInStore_8595', '#reserveInStore_8733', '#reserveInStore_8290'],function(index,value){jQuery(value).show();});			
	});
	//End Show RIS Store Location List
	
	// Begin This will fire the RiS Assets
	//RisDiscoverability();
	
	productPage.setColor = productPage.setColor.wrap(function(om, i) {
		om(i);
		sawRIS = false;
		RisDiscoverability();
	});
	
	productPage.setSizeDimension1 = productPage.setSizeDimension1.wrap(function(om, i) {
		om(i);
		sawRIS = false;
		RisDiscoverability();
	});
	
	productPage.setSizeDimension2 = productPage.setSizeDimension2.wrap(function(om, i) {
		om(i);
		sawRIS = false;
		RisDiscoverability();
	});
	

	Event.observe(document, "productPage:ready", function() {
		RisDiscoverability();
	});




	//Event.observe(document, "dom:loaded", function() {
		//RisDiscoverability();
		//console.info('domload');
	//});
	
	merchLocationsManager.controller.handleUserInput = merchLocationsManager.controller.handleUserInput.wrap(function(om,radius, postalCode, passFunc, failFunc) {
		om(radius, postalCode, passFunc, failFunc);
		sawRIS = false;
		RisDiscoverability();
	});
	
	//fix variant bug
	productPage.loadVariantProduct = productPage.loadVariantProduct.wrap(function(om,strProductId,strVariantId) {
		om(strProductId,strVariantId);
		sawRIS = false;
		jQuery('#variantButtons li.varianttab.off').click(RisDiscoverability);
	});

	// End This will fire the RiS Assets
	


}
	// Begin GOL HP Evergreen Hide/Show
	if($('fis_content') && $('ris_content')){
		$('fis_content').hide();
		$('ris_content').show();
	}
	// End GOL HP Evergreen Hide/Show
	
	// Begin GOL Store Locator Banner Hide/Show
	if($('fis_content_storeLocator') && $('ris_content_storeLocator')){
		$('fis_content_storeLocator').hide();
		$('ris_content_storeLocator').show();
	}
	// End GOL Store Locator Banner Hide/Show

// End Run RIS Code

</script>
<!-- END - Reserve in Store -->

<!--  7/14 product review override sort 'Most Recent' -->
<script type="text/javascript">
if( location.pathname == "/browse/product.do" && window["productReviewService"] != undefined ){
	productReviewService.constants.productReview.MOST_RECENT_SORT_ORDER = true;
}
</script>
<!--  end 7/14 product review override -->

<!-- BEGIN Suppress Find-In-Store on Gift Card -->
<script type="text/javascript">
if (location.pathname == "/browse/product.do" && window["productPage"]) {
	jQuery(document).on('productPage:ready', function() {
		if( location.href.indexOf("000173") > -1 ){
			jQuery('findInStoreTabWindow').hide();
		}
	});
}
</script>
<!-- END Suppress Find-In-Store on Gift Card -->

<!-- BEGIN: Product Page Final Sale title override 2/19 cleanup -->
<script type="text/javascript">
if( location.pathname == "/browse/product.do"  && window["productPage"]) {

var productPageFinalSale = {
	init: function() {
		// Marketing flag
		var prodTargetCopy = 'Final Sale';
		var prodMarketingFlag = '';
		var prodMarketingFlagTxt = '';
		if( jQuery('#productPageMarketingFlagStyle').length > 0 && jQuery('#productPageMarketingFlagStyle').css('display') == 'block' ) {
			prodMarketingFlag = jQuery('#productPageMarketingFlagStyle span.productMarketingFlag');
			if( prodMarketingFlag.length > 0 ) {
				prodMarketingFlag = prodMarketingFlag[0];
				if( prodMarketingFlag.innerHTML != '' ) {

					prodMarketingFlagTxt = prodMarketingFlag.innerHTML;

					jQuery('#productPageMarketingFlagStyle').hide();

					//console.log(prodMarketingFlagTxt);
					if( prodMarketingFlagTxt != '' && prodMarketingFlagTxt == prodTargetCopy) {

						var prodMarketingFlagElt = '<div id="productMarketingFlag">' + prodMarketingFlagTxt + '</div>';
						jQuery('#productNameText').prepend( prodMarketingFlagElt );

						//update swatch flag copy
						jQuery( "#swatchContent" ).find( "#productPageMarketingFlagColor" ).css( "color", "#FF3300" );
						//jQuery( "#productPageMarketingFlagColor" ).find( "span.productMarketingFlag" ).css( "color", "#FF3300" );
					}
				}
			}
		}
	}
}
jQuery(document).on('productPage:ready', productPageFinalSale.init );

}
</script>
<!-- END: Product Page Final Sale title override 2/19 cleanup -->

<!-- END Content Item File: /content/0010/835/869/cn10835869.html -->

<!-- END - WCD Sitewide Container 4 -->

<!-- BEGIN - WCD Sitewide Container 5 -->
<!-- BEGIN Content Item File: /content/0012/354/498/cn12354498.html -->

<script type="text/javascript">

var certona = {};

(function() { 
	jQuery(document).on('certonaObj:ready',function(){
		var script = document.createElement('script');
		script.type = 'text/javascript';
		script.src = '//edge1.certona.net/cd/df9bcbd6/gap.com/scripts/resonance.js';
		document.getElementsByTagName('head')[0].appendChild(script);
	});

	function checkProductQty() {
		var qty = 0;
		if ('gap' in window && 'viewModel' in gap && 'productCategory' in gap.viewModel) {
			if (typeof gap.viewModel.productCategory.k_totalItems =="function") {
				qty = gap.viewModel.productCategory.k_totalItems();
			}
		}
		certona.pagetype = (qty>0) ? "SEARCH" : "NOSEARCH";
		jQuery(document).trigger('certonaObj:ready');
	}

	function convertProductArrayToString(productArray,prop) {
		var productString = "";
		if (productArray.length>0) {
			for (i=0;i<productArray.length;i++) {
				productString += productArray[i][prop];
				if (i<productArray.length - 1) {
					productString += ";";
				}
			}
		}
		return productString;
	}

	function parseFavoritesProductIds() {
		var productString = "";
		if ('gap' in window && 'viewModel' in gap && 'favoritesGrid' in gap.viewModel) {
			if (typeof gap.viewModel.favoritesGrid.favorites =="function") {
				var productArray = gap.viewModel.favoritesGrid.favorites();
				productString = convertProductArrayToString(productArray,'stylecolor');
			}
		}
		certona.itemid = productString;
		jQuery(document).trigger('certonaObj:ready');
	}

	function subscribeToCategoryEvent(ev,callback) {
		jQuery(document).ready(function(){
			if ('ps' in window) {
				ps.subscribe(ev,function(){
					callback();
				});
			}
		});
	}

	function parseShopBagProductIds() {
		jQuery(document).ready(function(){
			var productString = "";
			var invokeQueueObj = angular.module('gid.values.initialBag')._invokeQueue[0][2][1];
			if ("shoppingBag" in invokeQueueObj && "activeItems" in invokeQueueObj.shoppingBag) {
				var productArray = invokeQueueObj.shoppingBag.activeItems;
				productString = convertProductArrayToString(productArray,'colorStyleNumber');
			}
			certona.itemid = productString;
			jQuery(document).trigger('certonaObj:ready');
		});
	}

	function setCheckoutCookie() {
		if (gidLib.getCookieVar('mktGlobalSession','certonaCheckout')!="") {
			gidLib.setCookieVar('mktGlobalSession','certonaCheckout','');
		}
		function checkForLineItems() {
			var lineItemsFound = false;
			var counter = 0;
			var model = checkout.model;
			var liCheck = setInterval(function(){
				counter++;
				if ('data' in model && 'shoppingBag' in model.data && 'lineItems' in model.data.shoppingBag && model.data.shoppingBag.lineItems !== null) {
					clearInterval(liCheck);
					jQuery(document).trigger('certona:lineItemsReady');
				}
				if (counter>10) {
					clearInterval(liCheck);
				}
			},50);
		}
		function parseLineItems() {
			var certonaCheckoutJson = {
				itemIdString : "",
				itemQtyString : "",
				itemPriceString : "",
				subtotal : 0
			};
			var lineItems = checkout.model.data.shoppingBag.lineItems;
			if (typeof lineItems.length != 'undefined') {
				for (i=0;i<lineItems.length;i++) {
					if (typeof lineItems[i].skuNumberRo != 'undefined') {
						certonaCheckoutJson.itemIdString += lineItems[i].skuNumberRo.substr(0,9);
					}
					certonaCheckoutJson.itemQtyString += lineItems[i].quantityRo;
					certonaCheckoutJson.itemPriceString += lineItems[i].subTotalAfterDiscountsRo;
					certonaCheckoutJson.subtotal = certonaCheckoutJson.subtotal + Number(lineItems[i].subTotalAfterDiscountsRo);
					if (i<lineItems.length - 1) {
						certonaCheckoutJson.itemIdString += ";";
						certonaCheckoutJson.itemQtyString += ";";
						certonaCheckoutJson.itemPriceString += ";";
					}
				}
				certonaCheckoutJson.subtotal = certonaCheckoutJson.subtotal.toFixed(2).toString();
				var certonaCheckoutCookie = JSON.stringify(certonaCheckoutJson);
				gidLib.setCookieVar('mktGlobalSession','certonaCheckout',certonaCheckoutCookie);
			}

		}
		jQuery(document).on("order:dataLoad",function(){
			jQuery(document).on('certona:lineItemsReady',function(){
				parseLineItems();
			});
			checkForLineItems();
		});
	}

	function parseOrderConfirmValues() {
		certona.itemid = "";
		certona.qty = "";
		certona.price = "";
		certona.total = "";
		var certonaCheckoutCookie = gidLib.getCookieVar('mktGlobalSession','certonaCheckout');
		if (certonaCheckoutCookie!="") {
			var certonaCheckoutJson = JSON.parse(certonaCheckoutCookie);
			certona.itemid = certonaCheckoutJson.itemIdString;
			certona.qty = certonaCheckoutJson.itemQtyString;
			certona.price = certonaCheckoutJson.itemPriceString;
			certona.total = certonaCheckoutJson.subtotal;
		}
		jQuery(document).ready(function(){
			certona.transactionid = (typeof orderID != 'undefined') ? orderID : "";
			jQuery(document).trigger('certonaObj:ready');
		});
	}

	certona.customerid = (gidLib.getCookie('customerId')) ? gidLib.getCookie('customerId').replace(/\|/g,"") : "";
	switch (location.pathname) {
		case "/" : 
		case "/browse/home.do" : 
			certona.pagetype = "HOME";
			certona.recommendations = true;
			jQuery(document).trigger('certonaObj:ready');
			break;
		case "/browse/division.do" : 
		case "/browse/subDivision.do" : 
			certona.pagetype = "CATEGORYLANDING";
			certona.categoryid = gidLib.getQuerystringParam('cid');
			certona.recommendations = false;
			jQuery(document).trigger('certonaObj:ready');
			//add api call
			break;
		case "/browse/category.do" : 
			certona.pagetype = "CATEGORY";
			certona.categoryid = gidLib.getQuerystringParam('cid');
			certona.recommendations = false;
			jQuery(document).trigger('certonaObj:ready');
			//add api call
			break;
		case "/browse/search.do" : 
			certona.recommendations = false;
			subscribeToCategoryEvent('categoryData:productsOnPage',checkProductQty);
			break;
		case "/browse/product.do" :
			certona.pagetype = "PRODUCT";
			certona.itemid = gidLib.getQuerystringParam('pid');
			certona.recommendations = true;
			jQuery(document).trigger('certonaObj:ready');
			break;
		case "/profile/account_summary.do" : 
			certona.pagetype = "ACCOUNT";
			certona.recommendations = false;
			jQuery(document).trigger('certonaObj:ready');
			break;
		case "/profile/order_history.do" : 
			certona.pagetype = "ORDERHISTORY";
			certona.recommendations = false;
			jQuery(document).trigger('certonaObj:ready');
			break;
		case "/profile/favorites.do" : 
			certona.pagetype = "WISHLIST";
			certona.recommendations = false;
			subscribeToCategoryEvent('page-content-loaded',parseFavoritesProductIds);
			break;
		case "/buy/shopping_bag.do" :
			certona.pagetype = "CART";
			certona.recommendations = true;
			parseShopBagProductIds();
			break;
		case "/checkout/order.do" : 
			setCheckoutCookie();
			break;
		case "/checkout/orderConfirm.do" : 
			certona.pagetype = "PURCHASE";
			certona.recommendations = true;
			parseOrderConfirmValues();
			break;
		default : 
			certona.pagetype = "";
			certona.recommendations = false;
	}
	
	
	//jQuery.ajax({
	//	url : "https://api.certona.com/Resonance/Application/{applicationId}/Search"
	//});
})(certona);

</script>
<!-- END Content Item File: /content/0012/354/498/cn12354498.html -->

<!-- END - WCD Sitewide Container 5 -->

<!-- BEGIN - WCD Sitewide Container 6 -->
<!-- BEGIN Content Item File: /content/0010/694/910/cn10694910.html -->

<!-- 2/1 BRONG:Override of Basic text display option in Shopping Bag/Checkout & removing the decimal
 -->
<script type="text/javascript">

if( location.pathname == '/buy/shopping_bag.do' || ( location.pathname == '/profile/validate_sign_in.do' && window["angular"] != null ) ) {

/* Removing .00 from price information */

window.angular && (function($) {
  function WcdAngularDecorator(appName, targetName, dependencies, link) {

    function _decorateTarget() {
        var args = [].slice.call(arguments),
            $delegate = args.pop(),
            directive = $delegate[0],
            hasCompile = _.isFunction(directive.compile),
            oldCompile = (hasCompile && directive.compile) || $.noop;

        function _decorateLink() {
            var linkArgs = [].slice.call(arguments);
            (oldCompile() || $.noop).apply(null, linkArgs);
            link.apply(null, args.concat(linkArgs));
        }

        function _decorateCompile() {
            return _decorateLink;
        }
        return _.assign(directive, {
            compile: _decorateCompile
        }) && $delegate;
    }

    function _targetProvider($provide) {
        $provide.decorator(targetName, dependencies.concat(['$delegate', _decorateTarget]));
    }

    angular.module(appName).config(_targetProvider);  
    return true; 
  };

  window.WcdAngularDecorator = WcdAngularDecorator;
})(jQuery, window);

window.WcdAngularDecorator && 
WcdAngularDecorator(
    'gid.app.shippingOptions.directives',
    'shippingOptionsDirective',
    ['personalizationService'],
    function _shippingOptionsLink(personalizationDataProvider, scope, elm, attrs, ctrl) {
      var $ = jQuery;
      function _updateShippingOptions() {
          _.each($(elm).find('.radioText span'), function(el) {
            var $el = $(el),
                priceUpdated = ($el.text() || '').split('.')[0];
            $el.html(priceUpdated);
          });
      }
      function _optionChangeWatcher() {
        scope.$evalAsync(_updateShippingOptions);  
      }
      scope.$watch('shippingoptions', _optionChangeWatcher)
      
    }
);

  var wcd_ShoppingBagTextNew = {
    model: {
    		shipingId7to9on0201: '2012',
    		shipingIdBasicon0201: '6003',
    		shippingId3to5: '1304',
			shipingIdExpon0201: '6015', 
  			shippingId1: '2020', 
  			shipingId7to9on0201Present: false,
  			shipingIdBasicon0201Present: false, 
			shipingIdExpon0201Present: false,
  			shippingId3to5Present: false,
			shippingId1Present: false
    },

    init: function() {
      var model = wcd_ShoppingBagTextNew.model;
			
			/*jQuery(document).on('wcd_ShoppingBagTextNew:ready', function() {
					var youSaveTimer = setTimeout( function() {
						if(model.shipingId7to9on0201Present){
							var currentPrice7to9 = jQuery('#shippingOptionsRadioText' + model.shipingId7to9on0201).find('span').html();
							currentPrice7to9 = currentPrice7to9.replace('.00','');
							jQuery('#shippingOptionsRadioText' + model.shipingId7to9on0201 ).find('span'). html(currentPrice7to9);
						}
						if(model.shipingIdBasicon0201Present){
							if(jQuery('#shippingOptions' + model.shipingIdBasicon0201).attr('disabled')=='disabled'){ 
								jQuery('#shippingOptionsRadioText' + model.shipingIdBasicon0201).css('font-size','87.5%');
							}
							var currentPriceB = jQuery('#shippingOptionsRadioText' + model.shipingIdBasicon0201).find('span').html();
							currentPriceB = currentPriceB.replace('.00','');
							jQuery('#shippingOptionsRadioText' + model.shipingIdBasicon0201 ).find('span'). html(currentPriceB);
						}

						if(model.shippingId3to5Present){
							var currentPrice3to5 = jQuery('#shippingOptionsRadioText' + model.shippingId3to5).find('span').html();
							currentPrice3to5 = currentPrice3to5.replace('.00','');
							jQuery('#shippingOptionsRadioText' + model.shippingId3to5 ).find('span'). html(currentPrice3to5);
						}
						if(model.shipingIdExpon0201Present){
							var currentPriceE = jQuery('#shippingOptionsRadioText' + model.shipingIdExpon0201).find('span').html();
							currentPriceE = currentPriceE.replace('.00','');
							jQuery('#shippingOptionsRadioText' + model.shipingIdExpon0201 ).find('span'). html(currentPriceE);
						}
						if(model.shippingId1Present){
							var currentPrice1 = jQuery('#shippingOptionsRadioText' + model.shippingId1).find('span').html();
							currentPrice1 = currentPrice1.replace('.00','');
							jQuery('#shippingOptionsRadioText' + model.shippingId1 ).find('span'). html(currentPrice1);
						}
					}, 1000 );
				});*/
		  
	      // Loop thru ship options; this decorator will run on load, whenever new option selected or shopping bag item updated/removed
	      var shoppingBagTransformerModule = angular.module('gid.transformer.shoppingBagTransformer');
	      shoppingBagTransformerModule.config(function($provide) {
	        $provide.decorator('shoppingBagTransformer', function($delegate) {

	          model.timesDecoratorRuns++;
	          var oldTransformResponse    = $delegate.transformResponse;
	          var oldTransformBagResponse = $delegate.transformBagResponse;
	          

	          var overrideShippingData = function(jsonData) {
	          	var model = wcd_ShoppingBagTextNew.model;
	            if (jsonData.shoppingBag && jsonData.shoppingBag.shippingInfo && jsonData.shoppingBag.shippingInfo.shippingOptions) {
					var shipOptionsNew = jsonData.shoppingBag.shippingInfo.shippingOptions;
					shipOptionsNew.each(function(elt, idx) {
						/*if( elt.shippingId == model.shipingId7to9on0201 ) {
							model.shipingId7to9on0201Present = true;
						}
						if( elt.shippingId == model.shipingIdBasicon0201 ) {
							model.shipingIdBasicon0201Present = true;
						}
						if( elt.shippingId == model.shippingId3to5) {
							model.shippingId3to5Present = true;
						}*/
						if( elt.shippingId == model.shipingIdExpon0201 ) {
							model.shipingIdExpon0201Present = true;
							if( elt.selected && elt.selected.toString() == 'true' ) {
								elt.message = 'Orders placed on weekends, holidays or weekdays after 3:00 PM ET / 12:00PM PT will require an additional business day.';
							}
						}
						if( elt.shippingId == model.shippingId1 ) {
							model.shippingId1Present = true;
							if( elt.selected && elt.selected.toString() == 'true' ) {
								elt.message = 'Orders placed on weekends, holidays or weekdays after 3:00 PM ET / 12:00PM PT will require an additional business day.';
							}
						}
					});	
					jsonData.shoppingBag.shippingInfo.shippingOptions = shipOptionsNew;
	            }
				//jQuery(document).trigger('wcd_ShoppingBagTextNew:ready');				
	            return jsonData;
	          };

	          $delegate.transformResponse = function(data, headers) {
	            var jsonData = oldTransformResponse(data, headers);			
	            return overrideShippingData(jsonData);
	          };

	          $delegate.transformBagResponse = function(data) {
	            var jsonData = oldTransformBagResponse(data);
					
	            return overrideShippingData(jsonData);
	          }
	          return $delegate;
	        });
	      });
	    }
	  }
	  wcd_ShoppingBagTextNew.init();
	}

else if( location.pathname == '/checkout/order.do' ) {

	var wcdShipOptionCheckoutTester = {
		model: {
			shipingId7to9on0201: '2012',
    		shipingIdBasicon0201: '6003',
    		shippingId3to5: '1304',
			shipingIdExpon0201: '6015', 
  			shippingId1: '2020'
		},
	init: function() {
			var model = wcdShipOptionCheckoutTester.model;
			jQuery(document).on('wcd_CheckoutTextNew:ready', function() {
				var youSaveTimer = setTimeout( function() {
					if(jQuery('#selectedShippingMethod' + model.shipingIdBasicon0201)!=''){
						var currentPrice5to7 = jQuery('#shippingOptionsRadioText' + model.shipingIdBasicon0201).html();
						if(typeof currentPrice5to7 !== "undefined"){
							currentPrice5to7 = currentPrice5to7.replace(' - $0.00','');
							jQuery('#shippingOptionsRadioText' + model.shipingIdBasicon0201 ). html(currentPrice5to7);
						}
					}
					if(jQuery('#selectedShippingMethod' + model.shippingId3to5)!=''){
						var currentPrice3to5 = jQuery('#shippingOptionsRadioText' + model.shippingId3to5).html();
						if(typeof currentPrice3to5 !== "undefined"){
							currentPrice3to5 = currentPrice3to5.replace('.00','');
							jQuery('#shippingOptionsRadioText' + model.shippingId3to5 ). html(currentPrice3to5);
						}
					}
					if(jQuery('#selectedShippingMethod' + model.shipingIdExpon0201)!=''){
						var currentPriceE = jQuery('#shippingOptionsRadioText' + model.shipingIdExpon0201).html();
						if(typeof currentPriceE !== "undefined"){
							currentPriceE = currentPriceE.replace('.00','');
							jQuery('#shippingOptionsRadioText' + model.shipingIdExpon0201 ). html(currentPriceE);
						}
					}
					if(jQuery('#selectedShippingMethod' + model.shippingId1)!=''){
						var currentPrice1 = jQuery('#shippingOptionsRadioText' + model.shippingId1).html();
						if(typeof currentPrice1 !== "undefined"){
							currentPrice1 = currentPrice1.replace('.00','');
							jQuery('#shippingOptionsRadioText' + model.shippingId1 ). html(currentPrice1);
						}
					}
					if(jQuery('.inputForm').find('.infoMessageText').html()!=''){
						jQuery('.inputForm').find('.infoMessageText').hide();
					}
					if(jQuery('#shippingSummaryInputShippingOption').html()){
						var newText = jQuery('#shippingSummaryInputShippingOption').html();
						newText = newText.replace(' $0.00','');
						jQuery('#shippingSummaryInputShippingOption').html(newText);
					}
					
				}, 1000 );
			});

			if( window["ccm"] != null && ccm.orderPlacement && ccm.orderPlacement.view && ccm.orderPlacement.view.setDataToPage ) { 
					ccm.orderPlacement.view.setDataToPage = ccm.orderPlacement.view.setDataToPage.wrap( function( om ) {   
							om(); 
							jQuery(document).trigger('wcd_CheckoutTextNew:ready');
					});
			}
	}
	
 }
 wcdShipOptionCheckoutTester.init();
}

</script>


<!-- END Content Item File: /content/0010/694/910/cn10694910.html -->

<!-- END - WCD Sitewide Container 6 -->

<!-- BEGIN - WCD Sitewide Container 7 -->

<!-- END - WCD Sitewide Container 7 -->

<!-- BEGIN - WCD Sitewide Container 8 -->
<!-- BEGIN Content Item File: /content/0011/330/437/cn11330437.html -->


<!-- BEGIN: contentOverride116 -- GOL Department Facet Suppression-->
<script type="text/javascript">
if( location.pathname == "/browse/category.do" || location.pathname == "/browse/categorySearch.do" ) {

		var defaultDeptFacetnator = {
			displayDeptFacet : false,
			deptFacetId : null,
			
			// Women's categories
			womenCategoriesHideFacet: new Array(),
			// Men's categories
			menCategoriesHideFacet: new Array(),
			// Girls categories
			girlsCategoriesHideFacet: new Array(),
			// Boy's categories
			boysCategoriesHideFacet: new Array(),
			// Toddler/Infant Girl categories
			tgirlCategoriesHideFacet: new Array('76918', '76748', '81111', '70949', '63863', '83393', '17846', '70108', '84668', '84479', '82562', '82560', '80374', '80378', '80384', '14249', '8772', '7190', '73590', '7189', '7191', '7206', '80900', '76748', '84335', '86607', '81587', '50711', '70949', '63863', '83393', '17846', '76918', '55768', '65263', '65208', '81577', '35361', '6465', '84667', '84665', '84666', '87444', '8781', '7190', '83390', '88867', '89316', '89326', '84674', '88938', '6392', '76759', '17850', '85718', '77431', '6428', '91808', '71986', '14249', '7189', '6445', '35855', '6437', '7190', '7191', '6428', '95546', '35362', '7206', '76748', '94049', '96776', '96772', '35854', '97212', '97210', '71986', '98440', '94859', '98248', '98098', '99342', '99664', '99654', '1000239', '98120', '97707', '1002327', '1002328', '1002329', '1002333', '1001383', '1001458', '1001377', '1001379', '1002448', '1003222', '1004642', '1004813', '1005611', '1005931', '1005882', '1007167', '1007021', '1007813', '1008305', '1008292', '1008476', '1008895', '1009361', '6427', '95548', '35855', '1009219', '1009613', '1009995', '12378', '1010286', '1010288', '1010289', '8770', '1010401', '1009995', '1011550', '1012349', '1011291', '1012528', '1013119', '6437', '1013351', '1012927', '1013655', '1013706', '1014074', '1014075', '1013451', '1014067', '1014078', '1008573', '1015833', '1016096', '1016098', '1016106', '1016107', '1016108', '1016109', '1016110', '1016111', '1016169', '1016138', '1005882', '1012762', '1016235', '6444', '1016086', '1016789', '1016792', '1014604', '1017039', '1017041', '1017043', '1017044', '1017045', '1017311', '1017312', '1012349', '1012352', '1017633', '1018764', '1018766', '1019023', '1019061', '1019412', '6526066', '1019954', '1019983', '1020002', '1020007', '1020008', '1020287', '1020347', '1020356', '1020361', '1020567', '1020568', '1020190', '1020990', '1021001', '1021002', '1021051', '1021053', '1021367', '1021369', '1021370', '1021373', '1021375', '1021476', '1021477',  '1021492', '1021493', '1021323', '1022245', '1022246', '1022247', '1022248', '1022249', '1025035', '1025036', '1025037', '1025038', '1025039', '1025247', '1025248', '1025249', '1025250', '1025251', '1025252', '1025253', '1025254', '1025265', '1025632', '1025633', '1026347', '1026348', '1026349', '1026350', '1026351', '1026352', '1027169', '1027170', '1027171', '1027172', '1027173', '1027174', '1027175', '1027176', '1027216', '1027217', '1027218', '1028580', '1028581', '1028582', '1028583', '1028584', '1029107', '1029826', '1029827', '1029828', '1029829', '1029830', '1029831', '1029832', '1031545', '1031658', '1031659', '1031660', '1031661', '1031662', '1032065', '1030087', '1032232', '1032668', '1032669', '1032670', '1032671', '1032672', '1032673', '1032795', '1033864', '1033898', '1033899', '1033900', '1033901', '1033902', '1034157', '1034574', '1034575', '1034576', '1034577', '1025264', '1035354', '1035356', '1035357', '1035358', '1035359', '1035360', '1036382', '1036383', '1036384', '1036385', '1036386', '1036387', '1036388', '1036389', '1036390', '1038339', '1038340', '1038341', '1038342', '1038649', '1038650', '1038651', '1038652', '1038654', '1039453', '1039454', '1039455', '1039456', '1039457', '1039458', '1039459', '1039460', '1039462', '1039463', '1039464', '1039887', '1040225', '1040226', '1040227', '1040992', '1040993', '1042482', '1042494', '1042497', '1042499', '1042501', '1042504', '1042505', '1042506', '1042507', '6436', '12378', '1043215', '1043216', '1043900', '1043901', '1043902', '1043903', '1043904', '1043905', '1044470', '1044471', '1044472', '1044473', '1044474', '1045037', '1045041', '1045043', '1045044', '1045184', '1045185', '1046325', '1046327', '1046328', '1046853', '1046855', '1046857', '1046858', '1046859', '1046546', '1047550', '1047551', '1048102', '1048104', '1048105', '1048106', '1048107', '1048108', '1048478', '1048792', '1048793', '1048794', '1048795', '1048796', '1048797', '1049374', '1049375', '1016150', '1050160', '1050162', '1050163', '1050164', '1050165', '1050166', '1050167', '1050168', '1050917', '1050918', '1050919', '1050920', '1051452', '1051453', '1051455', '1051456', '1051457', '1051863', '1051864', '1051865', '1051866', '1052338', '1052340', '1052763', '1052764', '1052765', '1052766', '1053295', '1053296', '1053297', '1053298', '1053767', '1053768', '1054313', '1054314', '1054315', '1054317', '1054995', '1054996', '1055505', '1055506', '1055507', '1055508', '1056026', '1056027', '1056545', '1056546', '1056568', '1056569', '1056570', '1056571', '1057112', '1057113', '1057738', '1057739', '1057845', '1057847', '1058238', '1058239', '1058240', '1058620', '1058621', '1059191', '1059193', '1059194', '1059195', '1059828', '1059829', '1060408', '1060409', '1060842', '1060843', '1060844', '1060845', '1061267', '1061268', '1062006', '1062007', '1062009', '1062069', '1063386', '1063387', '1063388', '1063389', '1063897', '1063898', '1064239', '1064901', '1064902', '1064903', '1064904', '1065211', '1065212', '1065722', '1065723', '1066203', '1066204', '1066787', '1066788', '1067265', '1067266', '1067565', '1067566', '1067567', '1067568', '1068043', '1068044', '1068409', '1068410', '1068939', '1068940', '1068941', '1068942', '1068943'),
			// Toddler/Infant Boy categories
			tboyCategoriesHideFacet : new Array('76759', '76754', '65281', '65283', '85104', '81112', '85064', '70127', '63897', '77431', '17850', '70173', '84824', '84491', '82572', '82569', '80386', '80390', '80396', '42558', '8788', '7142', '74004', '7139', '78580', '7143', '7185', '80899', '76754', '84336', '86610', '81589', '55773', '65261', '70127', '63897', '77431', '17850', '76759', '50728', '65236', '84823', '8777', '83376', '85214', '85213', '35792', '6395', '6392', '88871', '89335', '89348', '84830', '89903', '88920', '89697', '36691', '17851', '91809', '71988', '95575', '95598', '95496', '95679', '95682', '95684', '95689', '95692', '95693', '95697', '93306', '93305', '93304', '95184', '91491', '95445', '91808', '82562', '84674', '89902', '95423', '96777', '96773', '96457', '93308', '6365', '97213', '97211', '93309', '97795', '97792', '97798', '97801', '97804', '91809', '71988', '98441', '94883', '98250', '98095', '78037', '99339', '99648', '99656', '99670', '98567', '98570', '98573', '99838', '97714', '1000238', '1000638', '1000641', '1000645', '1000649', '1000653', '1000656', '1000658', '1000661', '98121', '1001212', '1001576', '1001579', '1002230', '1002430', '1002256', '1002440', '1002445', '1002337', '1002338', '1002339', '1002345', '1001384', '1001460', '1001385', '1001459', '1002449', '1003472', '1003341', '1003223', '1004898', '1004822', '1005561', '1005649', '1005946', '1005933', '1005763', '1005903', '1005883', '1005903', '1007093', '1007162', '1007164', '1007026', '1007812', '1007814', '1007812', '1007814', '1008323', '1008262', '1007815', '1008477', '1008893', '1008894', '1009184', '1009496', '1009362', '1009218', '95690', '1009612', '1009614', '1009993', '1009994', '1009996', '1010126', '1010127', '1010128', '6359', '1010287', '1010290', '1010419', '8787', '9175', '1011148', '1011147', '1011273', '1011151', '1011194', '1002438', '1002260', '35855', '1009219', '1011504', '1012102', '1012105', '1012439', '1011292', '1012992', '1013109', '1013110', '1012527', '1011292', '1013121', '1013120', '1013353', '1012931', '1013654', '1013707', '1013793', '1013794', '1014056', '1014076', '1014077', '1013452', '1014069', '1014096', '1014097', '1014098', '1014037', '1014027', '1014026', '1014040', '1014068', '1014086', '1014251', '1014066', '1014079', '1014080', '1014094', '1014081', '1014274', '1012352', '1015466', '1015386', '1015834', '49693', '1016026', '1016237', '12384', '1016006', '1016312', '1015386', '1016085', '1016315', '1016088', '1016446', '1016566', '1016313', '1016335', '1017007', '1017025', '1017038', '1017488', '1017907', '1018540', '1018628', '1018547', '1018629', '1014073', '1018879', '1019066', '1019413', '1019419', '1019655', '1019709', '1019866', '1019995', '1020003', '1020006', '1019721', '1020316', '1020352', '1020366', '1020901', '1020902', '1020904', '1021623', '1021624', '1021722', '1022116', '1022117',  '1022119', '1022120', '1022274', '1020982', '1022686', '1022687',  '1023127', '1023130', '1023131', '1023132', '1023133',  '1024741', '1024744', '1024745', '1024746', '1024747', '1020366', '1025302', '1025303', '1025304', '1025305', '1025306', '1025307', '1025308', '1025309', '1025312', '1026009', '1026007', '1026006', '1026747',  '1027200', '1027205', '1027204', '1027201', '1027203', '1027202', '1027206', '1027219', '1027220', '1027221', '1027015', '1027017', '1027018', '1027019', '1027020', '1027022', '1027023', '1027024', '1027584', '1027586', '1027587', '1027710', '1027711', '1027025', '1028535', '1028585', '1028586', '1028587', '1028588', '1028589',   '1028936', '1028938',  '1029391',  '1029411', '1030084', '1030085', '1030086', '1030087', '1030088',  '1031178', '1031179',  '1031476', '1031479', '1031480', '1031481', '1031482', '1031740', '1031741', '1031742', '1031743',   '1032228', '1032354',  '1032355',  '1032356',  '1032357', '1034167', '1034168', '1034169', '1034263', '1034264', '1002140', '1035680', '1035993', '1035994', '1035995', '1035996', '1038333', '1038334', '1038335', '1038336', '1038337', '1038338', '1039013', '1039040', '1039041', '1039042', '1039051', '1039052', '1039885', '1039922', '1039923', '1039924', '1039925', '1039926', '1039927', '1035926', '1035935', '1040972', '1040973', '1041105', '1041106', '1041107', '1041108', '1041110', '1041111', '92495', '1041585', '1041586', '1041587', '1041588', '1042328', '1042334', '1042337', '1042339', '1042341', '1042343', '1042346', '1042349', '1042341', '1042353', '1042357', '1041532', '1041533', '1044106', '1044105', '1044369', '1044367', '1044561', '1044563', '1045186', '1045188', '1045965', '1045964', '1046528', '1047206', '1047207', '1047209', '1047210', '1046545', '1047632', '1047633', '1047634', '1047635', '1047902', '1047904', '1048475', '1046899', '1046901', '1048887', '1048888', '1048889', '1048890', '1048891', '1048892', '1049759', '1050704', '1050706', '1051908', '1051909', '1051910', '1051911', '1051912', '1051913', '1044549', '1052702', '1052703', '1044550', '1052881', '1052883', '1052884', '1052885', '1052886', '1052887', '1055115', '1055116', '1055117', '1055118', '1055119', '1055120', '1055682', '1055683', '1055687', '1055688', '1056156', '1056157', '1056158', '1056159', '1057918', '1057919', '1057920', '1057921', '1058312', '1058311', '1059842', '1059843', '1059844', '1059845', '1059846', '1059847', '1059900', '1059901', '1059902', '1059903', '1061169', '1061241', '1061283', '1061284', '1061298', '1061299', '1065831', '1065832', '1065833', '1065834', '1068047', '1068048', '1068049', '1068050', '1068451', '1068452', '1068458', '1068466', '1068467', '1068468', '1068469'),                                                                                                                                                                                                        
			processCategoryLists : function() {
				var findIterator = gidLib.getQuerystringParam('cid');

				var deptChannelName = '';
				if( window["reportingService"] != null && reportingService.controller && reportingService.controller.viewManagers && reportingService.controller.viewManagers.commonViewManager && reportingService.controller.viewManagers.commonViewManager.model && reportingService.controller.viewManagers.commonViewManager.model.commonChannelName ) {
					deptChannelName = reportingService.controller.viewManagers.commonViewManager.model.commonChannelName;
				};
				// Gap Girls & Boys
				var subdeptChannelNameString = '';
				if( window["reportingService"] != null && reportingService.controller && reportingService.controller.viewManagers && reportingService.controller.viewManagers.commonViewManager && reportingService.controller.viewManagers.commonViewManager.model && reportingService.controller.viewManagers.commonViewManager.model.commonCurrentPageName ) {
					subdeptChannelNameString = reportingService.controller.viewManagers.commonViewManager.model.commonCurrentPageName;
				}
				
				var deptChannel_Girls = false;
				var deptChannel_Boys = false;
				if( subdeptChannelNameString != '' ) {
					deptChannel_Girls = subdeptChannelNameString.indexOf("Girls") > -1;
					deptChannel_Boys = subdeptChannelNameString.indexOf("Boys") > -1;
				}
				
				if( window.location.search.indexOf('cid=1029308') != 1 ) {
					if( jQuery.inArray( findIterator, defaultDeptFacetnator.womenCategoriesHideFacet ) > -1 || deptChannelName == 'Women' ) {
						defaultDeptFacetnator.deptFacetId = "136";
					}
				}
				
				if( window.location.search.indexOf('cid=1029311') != 1 ) {
					if( jQuery.inArray( findIterator, defaultDeptFacetnator.menCategoriesHideFacet ) > -1 || deptChannelName == 'Men' ) {
						defaultDeptFacetnator.deptFacetId = "75";
					}
				}

				if( jQuery.inArray( findIterator, defaultDeptFacetnator.girlsCategoriesHideFacet ) > -1 || deptChannel_Girls == true ) {
					defaultDeptFacetnator.deptFacetId = "48";
				}

				if( jQuery.inArray( findIterator, defaultDeptFacetnator.boysCategoriesHideFacet ) > -1 || deptChannel_Boys == true ) {
					defaultDeptFacetnator.deptFacetId = "16";
				}

				if( jQuery.inArray( findIterator, defaultDeptFacetnator.tgirlCategoriesHideFacet ) > -1 ) {
					defaultDeptFacetnator.deptFacetId = "165";
				}

				if( jQuery.inArray( findIterator, defaultDeptFacetnator.tboyCategoriesHideFacet ) > -1 ) {
					defaultDeptFacetnator.deptFacetId = "166";
				}
			},
			modifyDomElements : function() {
				// if the department facet does not exist in the UI, do nothing
				if( jQuery('#facet_department').length > 0 ) {
					if( defaultDeptFacetnator.displayDeptFacet == false ) jQuery('#facet_department').hide();

					// override reset all button
					var defaultedDeptFacetElement = null;
					var categoryFacetedSearchManager = navigationService.controller.managers.categoryFacetedSearchManager;
					if( jQuery('#facet_option_' + defaultDeptFacetnator.deptFacetId) ) defaultedDeptFacetElement = jQuery('#facet_option_' + defaultDeptFacetnator.deptFacetId ).children()[0];

					if( defaultedDeptFacetElement ) {
						jQuery('#facet_reset_all')[0].onclick = function(event) {
							categoryFacetedSearchManager.util.resetAllSelectedOptions(event);
							categoryFacetedSearchManager.controller.facetManagers.categoryDepartmentFacetManager.view.facetOptionClicked(defaultedDeptFacetElement,window);
							categoryFacetedSearchManager.controller.filterByFacets();
							return false;
						};
					}
				}
			},

			init: function() {
				defaultDeptFacetnator.processCategoryLists();
				// Only proceed if a dept facet preselection has been found in the lists
				if( defaultDeptFacetnator.deptFacetId ) {
					// Pre Select the appropriate Department Facet
					if( location.hash.length == 0 ) {
						// location.hash = "#department=" + this.deptFacetId;
						// jQuery('html').hide();
						location.replace(location.toString() + "#department=" + this.deptFacetId);
					}
					// Perform a redirect with the departmentRedirect parameter if not already redirected
					if (!/departmentRedirect/.test(location)) {
						var currentCID = /cid=\d+/.exec(location);
						// jQuery('html').hide();
						location.replace(location.toString().replace(/cid=\d+/,currentCID + "&departmentRedirect=true"));
					}
					// Bind dom modification method to the category product grid event
					jQuery(document).on('categoryProductGrid:ready', defaultDeptFacetnator.modifyDomElements );
				}
			},

			initSegB: function() {
				
				defaultDeptFacetnator.processCategoryLists();
				// Only proceed if a dept facet preselection has been found in the lists
				if( defaultDeptFacetnator.deptFacetId ) {
					// Pre Select the appropriate Department Facet
					if( location.hash.length == 0 ) {
						// location.hash = "#department=" + this.deptFacetId;
						// jQuery('html').hide();
						location.replace(location.toString() + "#pageId=0&department=" + this.deptFacetId);
					}
					// Perform a redirect with the departmentRedirect parameter if not already redirected
					if (!/departmentRedirect/.test(location)) {
						var currentCID = /cid=\d+/.exec(location);
						// jQuery('html').hide();
						//location.replace(location.toString().replace(/cid=\d+/,currentCID));
						location.replace(location.toString().replace(/cid=\d+/,currentCID + "&departmentRedirect=true"));
					}
					// Bind dom modification method to the category product grid event
					jQuery(document).on('categoryProductGrid:ready', defaultDeptFacetnator.modifyDomElements );
				}
			}
		};

		//defaultDeptFacetnator.init();

		if( window["categoryPage"] == null ) {
			defaultDeptFacetnator.initSegB();

		} else {

			if( window["navigationService"] && navigationService.model.isActive ) {
				defaultDeptFacetnator.init();
			}
		}
}
</script>
<!-- END: contentOverride116 -- GOL Department Facet Suppression -->

<!-- END Content Item File: /content/0011/330/437/cn11330437.html -->

<!-- END - WCD Sitewide Container 8 -->

<!-- BEGIN - WCD Sitewide Container 9 -->

<!-- END - WCD Sitewide Container 9 -->

<!-- BEGIN - WCD Sitewide Container 10 -->
<!-- BEGIN Content Item File: /content/0011/580/084/cn11580084.html -->

<script>


var continuityABSegments = false;

personalizationService.api.onPersonalization(function(event) {
	var magicLinkTestId = "108";
	var favoritesHeartTestId = "115";
	if (event[magicLinkTestId]||event[favoritesHeartTestId]) {
		continuityABSegments = {};
		if (event[magicLinkTestId]) {
			continuityABSegments.magicLink = event[magicLinkTestId].Segment;
			personalizationService.api.personalizationDone([event[magicLinkTestId], {}]);
		}
		if (event[favoritesHeartTestId]) {
			continuityABSegments.favoritesHeart = event[favoritesHeartTestId].Segment;
			personalizationService.api.personalizationDone([event[favoritesHeartTestId], {}]);
		}
		jQuery(document).trigger('continuitySegments:ready',[continuityABSegments]);
	}
});

</script>
<!-- END Content Item File: /content/0011/580/084/cn11580084.html -->

<!-- END - WCD Sitewide Container 10 -->

<!-- BEGIN - WCD Sitewide Container 11 -->
<!-- BEGIN Content Item File: /content/0011/686/121/cn11686121.html -->

<!-- NarVar pilot order details page code -->
<script type="text/javascript">
if (location.pathname.indexOf("order_status_detail.do") > -1) {
	var addBreadcrumbToOrderDetalsPage = function() {
		jQuery("div.pageHeader").prepend("<div><a href='https://secure-www.gap.com/profile/order_history.do?locale=en_US'>Order history</a> &gt; Order details</div>");
		jQuery('.headerLinks').html('<a href="/customerService/info.do?cid=81264&cs=return_policies">Return Policies</a>');
	}
	var getOrderNumber = function() {
		var orderString = jQuery("div.pageHeader.heading-b_universal").text();
		orderString = orderString.replace("\n","");
		orderString = orderString.trim();
		orderString = orderString.split("#")[1];
		return orderString;
	}
	var addReturnsLinkToShippedItems = function() {
		jQuery("div#shipmentStatus").each(function (i) {
			if(jQuery("div#shipmentStatus").text().indexOf("Shipped") > -1) {
				//var narVarHref = "http://returns.narvar.com/gap?orderNumber=" + getOrderNumber();
				var narVarHref = "http://returns.narvar.com/gap/returns?order=" + getOrderNumber();
				jQuery(this).children("span.description").append("<a href='" + narVarHref + "' target='_new'>Return items</a>");
			}
		});
	}
	jQuery( document ).ready( function () {
		addBreadcrumbToOrderDetalsPage();
		addReturnsLinkToShippedItems();
	});
}
</script>	
<!-- END Content Item File: /content/0011/686/121/cn11686121.html -->

<!-- END - WCD Sitewide Container 11 -->

<!-- BEGIN - WCD Sitewide Container 12 -->

<!-- END - WCD Sitewide Container 12 -->

<!-- BEGIN - WCD Sitewide Container 13 -->
<!-- BEGIN Content Item File: /content/0010/450/332/cn10450332.html -->


<!-- BEGIN Large PP image -->
<style type="text/css">
.largerProdImage #mainContentContainer #mainContent { width:1111px }
.largerProdImage #productContentRight { margin-left:6px }
.largerProdImage #productContentLeft { width:524px }
.largerProdImage #sideNav { display:none }
.largerProdImage #product_image_bg { height:693px; width:520px }
.largerProdImage #productContentLeft img#product_image { height:693px; width:520px }
.largerProdImage #dragLayer { height:693px; width:520px }
.largerProdImage #BVRRContainer { max-width:880px }
.largerProdImage #product_image_bg video { width:520px }
</style>

<script type="text/javascript">
if( location.pathname == '/browse/product.do') {

	var wcdLargeProductPageImager = function() {
		var browserType = navigator.userAgent;
		// Do not run test on IE8, 9
		if( browserType.indexOf("MSIE 8") == -1 && browserType.indexOf("MSIE 9") == -1 ) {
			document.body.className += ' largerProdImage';
			productService.productThumbs.p1TypeMap.productPage = "VLI";
			productService.productThumbs.setLargeImage();
		}
	}

	jQuery(document).on('productPage:ready', function() {
		!gap.pageProductData && wcdLargeProductPageImager();
	})
}

</script>
<!-- END Large PP image AB test -->


<!-- END Content Item File: /content/0010/450/332/cn10450332.html -->

<!-- END - WCD Sitewide Container 13 -->

<!-- BEGIN - WCD Sitewide Container 14 -->
<!-- BEGIN Content Item File: /content/0011/747/336/cn11747336.html -->


<!-- BEGIN Namogoo pilot -->
<script type='text/javascript' src='//qnajplxtvz-a.akamaihd.net/GA4D28O5Y.js' async></script>
<!-- END Namogoo pilot -->

<!-- END Content Item File: /content/0011/747/336/cn11747336.html -->

<!-- END - WCD Sitewide Container 14 -->

<!-- BEGIN - WCD Sitewide Container 15 -->
<!-- BEGIN Content Item File: /content/0012/347/269/cn12347269.html -->


<!-- BEGIN GAP alt view rollover test -->
<style type="text/css">
.product-card-grid--alt-view-test .product-card .favorite { z-index:1 }
.product-card-grid--alt-view-test .product-card--image-wrapper { position:relative }
.product-card-grid--alt-view-test .product-card--image-wrapper img { position:absolute; left:0; -webkit-transition: opacity 0.75s ease-in-out; -moz-transition: opacity 0.75s ease-in-out; -o-transition: opacity 0.75s ease-in-out; transition: opacity 0.75s ease-in-out; }
.product-card-grid--alt-view-test .product-card--image-wrapper img.product-card--img[data-image-alt]:hover { opacity:0; }
</style>

<script type="text/javascript">

var wcdAltViewTestSeg = 'A';
// Track test on sitewide level
if( location.pathname != '/buy/shopping_bag.do' && location.pathname != '/checkout/order.do' && location.pathname != '/browse/category.do' ) {
	
var wcdAltViewRolloverTestTracking = {
	personalizationReady: false, 
	debugMode: false, 
	init: function() {
		if( location.search.indexOf('altviewsdebug=true') > -1 ) wcdAltViewRolloverTestTracking.debugMode = true;

		// Wait for AB test ready and category ready event, then we're good to fire our code
		personalizationService.api.onPersonalization(function(event) {	
			var idOfAbTestWeCareAbout = "331";
			var abTest = event[idOfAbTestWeCareAbout];
		
			if( abTest ) {
				wcdAltViewTestSeg = abTest.Segment;
							
				if( location.search.indexOf('altviews=b') > -1 ) { wcdAltViewTestSeg = 'B'; }
				//else if( location.search.indexOf('altviews=c') > -1 ) { wcdAltViewTestSeg = 'C'; }
	
				if( wcdAltViewRolloverTestTracking.debugMode ) console.info('Alt view seg ' + wcdAltViewTestSeg );
	
				abTest.Segment = wcdAltViewTestSeg;
				// Call personalizaiton done reporting only if AB exists
				var myAbObj = { Segment: wcdAltViewTestSeg, EVar:'68' };

				personalizationService.api.personalizationDone([myAbObj, {}]);
			}
			
			// AB test mechanisms TBD
			wcdAltViewRolloverTestTracking.personalizationReady = true;
		});
	}
}
wcdAltViewRolloverTestTracking.init();
	
}
// Run the experience on category pages
else if( location.pathname == '/browse/category.do' ) {

var wcdAltViewRolloverTest = {
	catHooksReady: false,
	personalizationReady: false, 
	testRun: false, 
	productData: [ ],
	preloadArray: [ ],
	preloadIdx: 0, 
	debugMode: false, 
	init: function() {
		if( location.search.indexOf('altviewsdebug=true') > -1 ) wcdAltViewRolloverTest.debugMode = true;
			
		function isTouchDevice() {
			return (('ontouchstart' in window) || (navigator.MaxTouchPoints > 0) || (navigator.msMaxTouchPoints > 0));
		}
		
		if( ! isTouchDevice() ) {
			if( wcdAltViewRolloverTest.debugMode ) console.log('not touch device');

			// Wait on our event to ensure we're ready to update the DOM
			jQuery(document).on('wcdAltViewTest:ready', function() {
				if( wcdAltViewTestSeg == 'B') {
					wcdAltViewRolloverTest.catHooksReady = false;
					wcdAltViewRolloverTest.testRun = true;
					wcdAltViewRolloverTest.preloadArray = [ ];
					wcdAltViewRolloverTest.preloadIdx = 0;
					wcdAltViewRolloverTest.runAltViewTest();
				}
			});
			
			// Wait for AB test ready and category ready event, then we're good to fire our code
			personalizationService.api.onPersonalization(function(event) {	
				var idOfAbTestWeCareAbout = "331";
				var abTest = event[idOfAbTestWeCareAbout];
			
				if( abTest ) {
					wcdAltViewTestSeg = abTest.Segment;
					
					if( location.search.indexOf('altviews=b') > -1 ) { wcdAltViewTestSeg = 'B'; }
					//else if( location.search.indexOf('altviews=c') > -1 ) { wcdAltViewTestSeg = 'C'; }
	
					if( wcdAltViewRolloverTest.debugMode ) console.info('Alt view seg ' + wcdAltViewTestSeg );
	
					abTest.Segment = wcdAltViewTestSeg;
					// Call personalizaiton done reporting only if AB exists
					var myAbObj = { Segment: wcdAltViewTestSeg, EVar:'68' };

					personalizationService.api.personalizationDone([myAbObj, {}]);
				}
				
				
				wcdAltViewRolloverTest.personalizationReady = true;
				if( wcdAltViewRolloverTest.catHooksReady ) {
					if( ! wcdAltViewRolloverTest.testRun ) {
						if( wcdAltViewRolloverTest.debugMode ) console.log('test ready fired');
						jQuery(document).trigger('wcdAltViewTest:ready');
					}
				}
			});
	
			jQuery(document).on('wcdCategoryHooks:ready', function() {
				wcdAltViewRolloverTest.catHooksReady = true;
				if( wcdAltViewRolloverTest.personalizationReady ) {
					if( ! wcdAltViewRolloverTest.testRun ) {
						if( wcdAltViewRolloverTest.debugMode ) console.log('test ready fired');
						jQuery(document).trigger('wcdAltViewTest:ready');
					}
				}
			});
		}
		else {
			if( wcdAltViewRolloverTest.debugMode ) console.log('touch device');
		}
	},
		
	runAltViewTest: function() {
		if( wcdAltViewRolloverTest.debugMode ) console.log('test run');
		if( window["gap"] !== undefined && gap.viewModel && gap.viewModel.productCategory && gap.viewModel.productCategory.k_products ) {
			wcdAltViewRolloverTest.productData = gap.viewModel.productCategory.k_products();
			
			if( jQuery('.product-card-grid--all-groups').length > 0 ) {
				if( ! jQuery('.product-card-grid--all-groups').hasClass('product-card-grid--alt-view-test') ) {
					jQuery('.product-card-grid--all-groups').addClass('product-card-grid--alt-view-test');
				}
			}
			
			// Parse product data and apply rollover state
			var currentSubcat = {};
			var currentProd = {};
			var currentProdId = '';
			var mainImgUrl = '';
			var avImgUrl = '';
			var preloadObj = {};
			for( var i=0; i < wcdAltViewRolloverTest.productData.length; i++ ) {
				currentSubcat = {};
				currentSubcat = wcdAltViewRolloverTest.productData[i];
				if( currentSubcat.products ) {
					for( var j=0; j < currentSubcat.products.length; j++ ) {
						currentProd = {};
						currentProdId = '';
						mainImgUrl = '';
						avImgUrl = '';
						preloadObj = {};
						
						currentProd = currentSubcat.products[j];
						//console.log( currentProd );				
						if( currentProd.businessCatalogItemId && currentProd.quicklookImage && currentProd.quicklookImage.path && currentProd.avImages && currentProd.avImages.av1QuicklookImagePath ) {
							currentProdId = currentProd.businessCatalogItemId;
							mainImgUrl = currentProd.quicklookImage.path;
							avImgUrl = currentProd.avImages.av1QuicklookImagePath;
							
							// If seg C, use AV2
							// if( wcdAltViewTestSeg == 'C' ) {
							// 	avImgUrl = currentProd.avImages.av2QuicklookImagePath;
							// }
							
							// Add to preload array
							preloadObj = {"prodId":currentProdId, "avImgUrl":avImgUrl, "loaded":false };
							wcdAltViewRolloverTest.preloadArray.push( preloadObj );
						
							var imgToRollover = jQuery('#product' + currentProdId + ' .product-card--image-wrapper img');
							if( imgToRollover.length > 0 ) {
								imgToRollover
									.attr('data-image-alt', avImgUrl )
									.hover( function() {
										if( jQuery( this ).prev('img').length == 0 && jQuery( this ).attr('data-image-alt') !== undefined ) {
											var avImg = jQuery( this ).attr('data-image-alt');
											jQuery( this ).before('<img class="product-card--img product-card--img-alt" src="' + avImg + '" alt="Product alternate image" />');
										}
									}, function() { });
							}							
						}					
					}
				}				
			}		
			
			// Preload on scroll (lazy load)
			jQuery(window).scroll( function(e) {
				wcdAltViewRolloverTest.lazyLoadImages();
      });
			wcdAltViewRolloverTest.lazyLoadImages();
			
			// Reset test run to account for the grid re-rendering on facet
			if( wcdAltViewRolloverTest.debugMode ) console.log('test run reset');
			wcdAltViewRolloverTest.testRun = false;			
		}
	},
	
	lazyLoadImages: function() {
		var currentScrollBottom = jQuery(window).scrollTop() + jQuery(window).height();

		var currentProd;
		var currentProdId;
		var currentProdAlt;
		var topOfCard;

		currentProd = wcdAltViewRolloverTest.preloadArray[ wcdAltViewRolloverTest.preloadIdx ];
		if( wcdAltViewRolloverTest.debugMode ) console.log('preload check for ' + wcdAltViewRolloverTest.preloadIdx );
		if( currentProd !== undefined ) {
			if( ! currentProd.loaded ) {
				currentProdId = currentProd.prodId;
				currentProdAlt = currentProd.avImgUrl;
			
				if( jQuery('#product' + currentProdId + ' .product-card--image-wrapper img').length > 0 ) {
					if( jQuery('#product' + currentProdId + ' .product-card--image-wrapper img').attr('data-image-alt') ) {
						topOfCard = jQuery('#product' + currentProdId + ' .product-card--image-wrapper img').offset().top;
				
						if( currentScrollBottom >= topOfCard ) {
							currentProd.loaded = true;
							wcdAltViewRolloverTest.preloadImages([ currentProdAlt ]);
							if( wcdAltViewRolloverTest.debugMode ) console.log('lazy loaded ' + wcdAltViewRolloverTest.preloadIdx + '. ' + currentProdId + ' - ' + currentProdAlt );
							wcdAltViewRolloverTest.preloadIdx++;
						}
					}
				}
			}
		}
	},
	
	preloadImages: function( arrImgsToPreload ) {
		var images = new Array()
		for (i = 0; i < arrImgsToPreload.length; i++) {
			images[i] = new Image()
			images[i].src = arrImgsToPreload[i]
		}
	}
}
wcdAltViewRolloverTest.init();

var wcdCategoryHooks = {
	debugMode: false,
	scrollToAnimationSpeed: 1000, 
	init: function() {
		if( location.search.indexOf('wcdCatHookDebug=true') > -1 ) { wcdCategoryHooks.debugMode = true; }
		
		// Wait for categoryData:ready event
		jQuery(document).ready(function(e) {
			ps.subscribe('categoryData:ready', function() {
				if( wcdCategoryHooks.debugMode ) { console.info('categoryData:ready fired'); }
				
				// Kill any previous listeners
				jQuery(document).off('wcdCategoryHooks:gridRendered');
				
				// Wait for our event that tells us grid rendered
				jQuery(document).on('wcdCategoryHooks:gridRendered', function() {
					// Update grid with our hooks
					wcdCategoryHooks.updateProductGrids();
					
					// Check for scrollToCid for scroll to funx
					if( location.search.indexOf('scrollToCid=') > -1 ) {
						if( wcdCategoryHooks.debugMode ) { console.info('scrollToCid detected'); }

						var scrollToCidTarget = location.search.substr( location.search.indexOf('scrollToCid=') + 12 );
						if( scrollToCidTarget.indexOf('&') > -1 ) scrollToCidTarget = scrollToCidTarget.substr( 0, scrollToCidTarget.indexOf('&') );
						
						setTimeout( function() {
							wcdCategoryHooks.scrollToCid( scrollToCidTarget );
						}, 1500 );
					}
					
					// Trigger catHook:ready event for ISMs
					if( wcdCategoryHooks.debugMode ) { console.info('cat hooks fired'); }
					jQuery(document).trigger('wcdCategoryHooks:ready');
				});
				
				// Wait for grid to render
				var catHookAttempts = 0;
				var catHookMaxAttempts = 5;
				var catGridRendered = function() {
					var gridRoot = jQuery('.product-card-grid--group .grid-root');
					if( gridRoot.length > 0 ) {
						jQuery(document).trigger('wcdCategoryHooks:gridRendered');
					}
					else if( catHookAttempts < catHookMaxAttempts ) {
						setTimeout( function() {
							catHookAttempts++;
							catGridRendered();
						}, 250 );
					}
				}
				catGridRendered();			
			});
		});
	},

	// Updates product grids so WCD can hook into them - to move to OneSite codebase(?)
	updateProductGrids: function() {
		var pageGrids = jQuery('.product-card-grid--group');
		var gridElt;
		var firstProdCard;
		var firstProdCid;
		if( pageGrids.length > 0 ) {
			pageGrids.each( function( idx, elt ) {
				gridElt = jQuery( elt );
				firstProdCard = gridElt.find('.product-card--link:first');
				// Adds data attribute of the CID of the subcat
				if( firstProdCard.length > 0 ) {
					if( firstProdCard.attr('href') !== undefined ) {
						firstProdCid = firstProdCard.attr('href');
						if( firstProdCid != '' && firstProdCid.indexOf('cid=') > -1 ) {
							firstProdCid = firstProdCid.substr( firstProdCid.indexOf('cid=') + 4 );
							if( firstProdCid.indexOf('&') > -1 ) {
								firstProdCid = firstProdCid.substr( 0, firstProdCid.indexOf('&') );
							}
							gridElt.attr( 'data-cid', firstProdCid );
						}
					}
				}
			});
		}
		if( wcdCategoryHooks.debugMode ) { console.info('Product grids updated with WCD hooks'); }
	},

	// Scrolls user down to rendered category grid
	scrollToCid: function( subcatTarget ) {
		if( wcdCategoryHooks.debugMode ) { console.info('Scrolling to ' + subcatTarget ); }

		var targetOffset = jQuery('.product-card-grid--group[data-cid="' + subcatTarget + '"]');
		if( targetOffset.length > 0 ) {
			targetOffset = targetOffset.offset().top;
			if( wcdCategoryHooks.debugMode ) { console.info('Offset ' + targetOffset ); }
			
			// Adjust for brand bar on small/med breakpoints
			if( window["gap"] !== undefined && gap.Mediaqueries && gap.Mediaqueries.currentBP && gap.Mediaqueries.currentBP.size ) {
				if( gap.Mediaqueries.currentBP.size == 'small' || gap.Mediaqueries.currentBP.size == 'medium' ) {
					targetOffset = targetOffset - jQuery('.brand-bar').outerHeight();
				}				
			}
			
			// Check if Sticky nav present and adjust for height
			if( jQuery('.wcdStickyCatNav').length > 0 ) {
				targetOffset = targetOffset - jQuery('.wcdStickyCatNav').outerHeight();
			}
			
			jQuery('html, body').animate({ scrollTop: targetOffset }, wcdCategoryHooks.scrollToAnimationSpeed ); 
		}
	}
}
wcdCategoryHooks.init();

}
</script>

<!-- END Content Item File: /content/0012/347/269/cn12347269.html -->

<!-- END - WCD Sitewide Container 15 -->


<script type="text/javascript">
	// <![CDATA[
		
		
		if (window["responsiveService"]) {
			(function() { 
			    var isMobileProxyActive = browserService.controller.managers.mobileBrowserManager.model.isMobileProxyActive;
			    responsiveService.controller.init.main({active:(isMobileProxyActive !== undefined && !isMobileProxyActive)});
			})();
		}
		if (window["navigationService"]) {
			navigationService.controller.init.main();
		}
	// ]]>
</script>
</head>

	
	
		<body class="locale_en_US cookieFailureNav">
	

	




	
		
	
	
			


	
			
			
	
	
	
	







	




	
		
	
	
			


	
			
			
	
	
	
	






 
	




	
		
	
	
			


	
			
			
	
	
	
	







	




	
		
	
	
			


	
			
			
	
	
	
	












	
		
	 	
			<div id="universalBar">
				




	
		
	
	
			


	
			
			
	
	
	
	










	
	
	 




	
	
		
		
	




	
		
	
	






<table class="universalBarTable" summary="Links to the other Gap Inc. Brands, promotional information, items in bag, my account, order status, shopping bag">
	<thead><tr><td></td></tr></thead>
	<tbody>
		<tr>
			<td class="universalBarLeft" style="background:url(/content/0008/703/523/universalBar_bkg.png) repeat-x;">&#160;</td>
			
				
				
				
				
					
					
					
				
			
			<td id="universalBarCenter" class="universalBarCenter">
				<div id="universalBarContainer" class="clearfix universalBarContainer">
					
						<span class="cssHide2">Visit the other Gap Inc. Brands:</span>
						<ul id="universalBarTabs" class="universalBarTabs4 clearfix">
						
							
							
							<li class="brand1">
						
			 						
			 							
			 								<a href="http://www.gap.com"
			 									class="brand current" target="_top"
			 									onclick="return gidBrandSiteConstruct.openBrand(1);">
			 								<img src="/assets/common/clear.gif" 
			 									alt="Gap" /> </a>
			 							
			 							
			 						
							</li>
						
							
							
							<li class="brand3">
						
			 						
			 							
			 							
			 								<a href="http://www.oldnavy.com"
			 									class="brand" target="_top"
			 									onclick="return gidBrandSiteConstruct.openBrand(3);">
			 								<img src="/assets/common/clear.gif" 
			 									alt="Old Navy" /> </a>
			 							
			 						
							</li>
						
							
							
							<li class="brand2">
						
			 						
			 							
			 							
			 								<a href="http://www.bananarepublic.com"
			 									class="brand" target="_top"
			 									onclick="return gidBrandSiteConstruct.openBrand(2);">
			 								<img src="/assets/common/clear.gif" 
			 									alt="Banana Republic" /> </a>
			 							
			 						
							</li>
						
							
							
							<li class="brand10">
						
			 						
			 							
			 							
			 								<a href="http://www.athleta.com"
			 									class="brand" target="_top"
			 									onclick="return gidBrandSiteConstruct.openBrand(10);">
			 								<img src="/assets/common/clear.gif" 
			 									alt="Athleta" /> </a>
			 							
			 						
							</li>
						
						</ul>
					
					<div id="universalMarketingContainerTop" class="">
						
						<!-- @TemplateContentLayout(templateRegionName:"gid.common.siteWide.universalBar.10000522.region1") -->

<!-- BEGIN Content Item File: /content/0011/709/276/cn11709276.html -->
<div id="contentItemContainer10000425" class="11709276" >

<style type="text/css">
  /* center container in checkout*/ 
  .wcd_edfs {
    width:350px;
    position:relative;
    top:0px;
    text-align:center;
    display:block;
    margin:0 auto;
    height: 42px;
    cursor:pointer;
  }

  body.orderPage .edfs_for-lg .wcd_edfs {
    left: -110px;
  }

  .header-shipping, .header-returns, .header-checkout {
    position:absolute;
    top:55%;
    display:inline-block;
    -webkit-transform: translateY(-50%);
    -ms-transform: translateY(-50%);
    transform: translateY(-50%);
    width:100%;
    left:0;
  }

  .wcd_edfs h1 {
    font-size:87.5%;
    font-family: Helvetica, Arial, sans-serif;
    color:#666;
    margin:0;
    padding:0;
    font-weight: 400;
    text-transform: uppercase;
    -webkit-font-smoothing: antialiased;
  }
  .wcd_edfs .sub {
    font-size:68.75%;
    font-family: Helvetica, Arial, sans-serif;
    color:#666;
    margin:2px 0 0;
    padding:0;
    font-weight: 400;
    line-height:1.25;
    text-align: center;
    float:none;
  }

  .header-details {
    font-size:10px;
    font-family: Helvetica, Arial, sans-serif;
    color:#999;
    margin:0;
    padding:0;
    font-weight: 400;
    text-decoration:underline;
    text-transform:none;
  }

  .header-shipping {
    -webkit-animation: showhide 12s infinite;
    animation: showhide 12s infinite;
  }
  .header-returns {
    -webkit-animation: showhide 12s infinite;
    animation: showhide 12s infinite;
    -webkit-animation-delay: 4s; /* Chrome, Safari, Opera */
      animation-delay: 4s;
     visibility: hidden;
  }
  .header-checkout {
    -webkit-animation: showhide 12s infinite;
    animation: showhide 12s infinite;
    -webkit-animation-delay: 8s; /* Chrome, Safari, Opera */
      animation-delay: 8s;
      visibility: hidden;
  }

  /* Chrome, Safari, Opera */ 
  @-webkit-keyframes showhide {
    0% {
      visibility: visible;
    }
    33% {
      visibility: hidden;
    }
    66% {
      visibility: hidden;
    }
    100% {
      visibility: hidden;
    }
  }

  /* Standard */ 
  @keyframes showhide {
    0% {
      visibility: visible;
    }
    33% {
      visibility: hidden;
    }
    66% {
      visibility: hidden;
    }
    100% {
      visibility: hidden;
    }
  }

  @media only screen and (max-width: 768px) { 
    .wcd_edfs {
      height:30px;
      border-top: 1px solid #333;
      border-bottom:1px solid #333;
      width:100%;
      margin-top:2px;
      margin-bottom:15px;
    }
    .wcd_edfs h1 {
      font-size:68.75%;
      font-weight: 400;
    line-height:1.1em;
    }
    .mobile-ship {
      display:inline-block;
    }
    .sub {
      display:none;
    }
    .header-shipping, .header-returns, .header-checkout {
      top:50%;
    }
  }
    
  @media only screen and (min-width: 769px) { 
    .mobile-ship {
        display:none;
    }
    .wcd_edfs {
        border:none;
        height:42px;
        margin-left:-2em;
    }

    body.responsiveShoppingBag .wcd_edfs{
      margin-left:-5em;
    }
    /*.edfs.edfs_for-lg, .edfs.edfs_for-lg{
        margin-left:26%;
    } */

      html.checkout .edfs.en_US{
        margin-left: 12%;
    }

  }

  @media only screen and (max-width: 768px) { 
    .show-mobile {
      display:block;
    }
    .show-tablet {
      display:none;
    }
    .show-desktop {
      display:none;
    }
    .show-large {
      display:none;
    }
    .show-small {
      display:block;
    }
  }

  @media only screen and (min-width: 769px) and (max-width: 1024px){
    .show-mobile {
      display:none;
    }
    .show-tablet {
      display:block;
    }
    .show-desktop {
      display:none;
    }
    .show-large {
      display:block;
    }
    .show-small {
      display:none;
    }

    body.responsiveShoppingBag .wcd_edfs{
      margin-left:0em;
    }
    html.checkout .wcd_edfs{
      margin-left:4em;
    }

  }

  @media only screen and (min-width: 1025px) {
    .show-mobile {
      display:none;
    }
    .show-tablet {
      display:none;
    }
    .show-desktop {
      display:block;
    }
    .show-large {
      display:block;
    }
    .show-small {
      display:none;
    }

    html.checkout .wcd_edfs{
      margin-left:-.6em;
    }
  }
  li#categoryNav1047582,li#categoryNav1047586 {
    display:none;
  }
 
@media only screen and (max-width: 768px) { 
  .innerTextLux{
    display: none;
  }
}


</style>

<div class="wcd_edfs needsclick toggle-universal-modal" data-url="/Asset_Archive/GPWeb/content/0011/709/276/assets/edfsLegal.html" data-modal-size="standard" data-action-sheet="small">
  <div class="header-shipping">
      <h1>Shipping is on us! <span class="mobile-ship">free on orders of $50 or more&nbsp;<span class="header-details">details</span></span></h1>
        <div class="sub">FREE on orders of $50 or more&nbsp;<span class="header-details">details</span></div>
    </div>
    <div class="header-returns">
      <h1>FREE Returns on All Orders&nbsp;<span class="header-details">details</span></h1>
    </div>
    <div class="header-checkout">
      <h1>4 Brands, One Easy Checkout&nbsp;<span class="header-details">details</span></h1>
    </div>
</div>

<script type="text/javascript">
/* Cycle through EDFS messages for older IE browsers
 * Uses visibility to be compatible with the CSS provided
 * 1/12/16 - Jermaine Jackson
 */
if(navigator.userAgent.indexOf("MSIE 7")>=0 || navigator.userAgent.indexOf("MSIE 8")>=0 || navigator.userAgent.indexOf("MSIE 9")>=0){
  var wcd_edfs_last_msg_index = 0;
  var wcd_edfs_messages = jQuery(".wcd_edfs").children();
  var edos_interval_id = setInterval(function(){
    var wcd_edfs_previous_msg_index = wcd_edfs_last_msg_index == 0 ? wcd_edfs_messages.length-1 : wcd_edfs_last_msg_index - 1;
    wcd_edfs_messages[wcd_edfs_previous_msg_index].style.visibility = "hidden";
    wcd_edfs_messages[wcd_edfs_last_msg_index].style.visibility = "visible";
    wcd_edfs_last_msg_index = wcd_edfs_last_msg_index < wcd_edfs_messages.length-1 ? ++wcd_edfs_last_msg_index : 0;
  },4000);
}
</script>


</div>
<!-- END Content Item File: /content/0011/709/276/cn11709276.html -->




<!--  new onesite template sub-regions -->



					</div>
					<div id="universalInlineBagContainer" class="universalBarBackground">
						
							<div id="signInContent">
								
									
									
									
									<h3 class="cssHide">Sign In Navigation:</h3>
									<ul>
										<li id="signInYourAccount">
										</li>
										<li id="signInSignIn">
										</li>
									</ul>
									<ul>
										<li id="topNavLanguageToggle">
											<div id="signInOrderStatus"></div>
										</li>
										
											<li id="shippingTo">
											</li>
										
									</ul>
								
							</div>
							<div id="inlineBagPlaceHolder">
								<a name="skipNavInlineBag"></a>
								<h3 class="cssHide">Shopping Bag:</h3>
							   	<div id="inlineBagItemMessage" class="screenreader">
							    	<input name="inlineBagItemMessageItem" id="inlineBagItemMessageItem" />	
							 	</div>
								<div id="inlineBagHeader" class="clearfix">
									
										<div class="checkoutButtonContainer"><a href="/buy/shopping_bag.do"><img src="/assets/common/clear.gif" width="15" height="15" alt="" class="universalButtonSprite universalSpriteTopnavInlinebagLogo"/></a></div>
										<div class="inlineBagTopLayerContainer">
											<div id="inlineBagTopPriceLayer" class="inlineBagSummary">
											</div>
											<div id="checkoutButtonContainer2"><a href="/buy/shopping_bag.do"><img src="/assets/common/clear.gif" alt="checkout" id="inlineBagCheckOut1" class="universalButtonSprite universalButtonSpriteCheckoutOn"/></a></div>
										</div>
									
									
								</div>
								
									<div id="inlineBagHeaderOpen" style="display:none;">
										<div class="checkoutButtonContainer"><a href="/buy/shopping_bag.do"><img src="/assets/common/clear.gif" width="15" height="15" alt="" class="universalButtonSprite universalSpriteTopnavInlinebagLogo"/></a></div>
										<div class="inlineBagTopLayerContainerOpen"><div id="inlineBagTopPriceLayerOpen" class="inlineBagSummary"></div></div>
										<div id="closeButtonContainer"><img src="/assets/common/clear.gif" alt="close" class="universalButtonSprite universalSpriteInlineBagCloseOn"/></div>
									</div>
									
	                                <div id="inlineBagClip">
                                		<div id="inlineBagContent" style="display:none;">
                                			<div id="inlineBagItems">
                                                <div id="gidInlineBag">
                                        	        <ul id="lineItems"></ul>
												    <div id="inlineBagSummary" class="clearfix">			
													    <div id="inlineBagSummaryItemCount" class="itemCount"></div>
										    			<div id="inlineBagSummarySubTotal" class="subTotal">
										            		Subtotal:
											    			<span id="inlineBagSummarySubPriceLabel" class="price"></span>
												    	</div>
											    	</div>
									            </div>
												<div id="universalInlineBagBottom">
													<div id="link1"><a href="/buy/shopping_bag.do">View your bag</a></div>
													<div id="link2"><a href="/buy/shopping_bag.do"><img id="inlineBagCheckOut2" src="/assets/common/clear.gif" alt="checkout" class="button_check_out universalButtonSprite universalButtonSpriteCheckoutOn" /></a></div>
												</div>
										    </div>
	                                    </div>
										<div id="inlineCustomerAttributesPlaceholder"></div>
									</div>
	 
									
									<div id="inlineBagMarketingClip">
										<div id="inlineBagMarketingContent" style="display:none;">
										
								            
								            <div id="gidInlineBagMarketingContainer">
								                
								                	
								                		
								                	




	
		
	
	
			


	
			
			
	
	
	
	










	
	





	
		
	
	
			


	
			
			
	
	
	
	












								                
									        </div>
									        	
										    <div id="gidInlineBagPromo">
												<div id="inlineBagPromo" style="padding: 5px;" class="clearfix">
												
												    <span id="gidProductUpsellMessage" style="display:none;">
									    				<p class="promoMsg" id="productUpsellMsg"></p>
										    			<a class="promoLink" id="productUpsellLink" href="#"></a>
										    		</span>	
												
												    <span id="mupUpsellMessage" style="display:none;">
									    				<p class="promoMsg mupUpSellMsg" id="mupUpSellMsg"></p>
										    			<p class="promoMsg mupUpSellLink" id="mupUpSellLink"></p>
										    		</span>
									
												    <span id="gwpPwpSelectionMessage" style="display:none;">
									    				<img id="selImageLink" src="/assets/common/clear.gif" style="display:none;">
											    		
												    	<p class="promoMsg">
													    	You've earned
														    <span id="gwpPwpMsg"></span><br />
														    
									    					<a href="" id="promoLink"></a>
										    				<br />
										    			    <span id="promoSelLink" class="selLink" style="display:none;"></span>
												    			    
									   						<span id="staticPromoTxt" class="promoTxt" style="display:none;">This item has been added to your bag.</span>
												    	</p>
												    </span>
												    
									    		</div>
											
												<div id="inlineBagCrossSell" class="clearfix" onClick="">
												    <img id ="crossSellImg" src="/assets/common/clear.gif" />
												
									    			<p class="promoMsg">
										    			Complete the Look!<br />								
										    			<span id="crossSellOutfitMsg"></span>
											    	</p>							
												    <p class="promoMsg">Shop this outfit >></p>
												</div>
										    </div>			
										</div>
									</div>
								
							</div>
						
					</div>
				</div>
			</td>
			<td class="universalBarRight" style="background:url(/content/0008/703/523/universalBar_bkg.png) repeat-x;">&#160;</td>
		</tr>
	</tbody>
</table>

			</div>
		
	
	
	<div id="bodyContainer" class="limit-width page-content nav-shiftee">  
		 
		
		    




	
		
	
	
			


	
			
			
	
	
	
	






	<noscript>
		<div class="siteErrorSpacer">
			&#160;
		</div>
	</noscript>
	
		<div class="siteErrorSpacer">
			&#160;
		</div>
	
	

		 
    	
		
			
				<div id="topNav" class="clearfix">
				    




	
		
	
	
			


	
			
			
	
	
	
	















	
<div id="universalTopNav" class="topNavTopRow clearfix">
	<div id="topNavCommon_region1"><!-- @TemplateContentLayout(templateRegionName:"gid.common.siteWide.divisionNavigation.10000509.region1") -->
<script type="text/javascript">
// Apply responsive bag body classname
if( window["responsiveBagAbTestOn"] != null && responsiveBagAbTestOn ) {
    // Add responsiveBag classname to body
    document.body.className += ' responsiveShoppingBag';
}
</script> 
<style type="text/css">
/*--  WCD GOL new top NAV 11/3/2015 --*/

/*  WCD NEW NAVIGATION STYLES  */
/*.brand-bar {
	height: 3.125em !important;
}*/
#topNavWrapper {
	margin: 10px auto 30px;
	width: 100%; 
}
.onesiteProdPage #topNavWrapper { 
	margin:0 0 40px; 
}
#mainNavGOL { 
	width: 100%; 
	max-width: 1400px; 
	margin: 0 auto; 
}
.gpnavigation{ 
    width: 100%;
    font-size:14px; 
    text-transform: uppercase;
    font-weight: bold;
    letter-spacing: normal;
    font-family:  Helvetica, Arial, sans-serif;
    list-style: none;

    -webkit-flex-flow: row nowrap; flex-flow: row nowrap;
    display: -webkit-flex; display:flex; 
    -webkit-align-items: center; align-items:center; 
    -webkit-justify-content: space-between;
    justify-content: space-between;
}
.gpnavigation li { 
	float:left; 
}

.gpnavigation #globalLogo, #gapLogo_2016 { 
	width:70px;
}
.gpnavigation #globalLogo a { 
	text-decoration: none;
	border: none;
}
.gpnavigation a { 
	color:#000; 
	text-decoration: none;
}
/*.gpnavigation a:hover{ text-decoration: none;}*/
.gpnavigation li.topNavItem a:hover,
.gpnavigation a[class*="_selected"] {
	color: #000;
	text-decoration:none; 
	border-bottom: 3px solid #000;
	padding: 6px 0 3px 0;
}

/*.gpnavigation a[class*="_selected"]:hover { }*/

@media (min-width:1024px){
  .gpnavigation{ 
  	font-size: 16px;
  }
}

/*BEGINGAP CTA AND DROPDOWN STYLES */
/*========================================================================================
              CTA DROPDOWN & ACORDIAN
========================================================================================*/

/* default desktop cta*/
.caret{
  margin-left:5px;
  border:#000d42 5px solid;
  border-color:transparent transparent transparent #000d42;
  display:inline-block;
}
.CTAButton{
  position:relative;
}

.CTAdropdown ul li a, .CTAButton ul li a,.CTA-font18 ul li a{ 
  font-weight:400;
}


@media (min-width:768px){
  .CTAwrapper{
    position: absolute;
    width:100%;
    max-width: 100%;
    font-size:18px;
  }
}

.CTAdropdown, .CTAButton{ 
  display:inline-block; 
  font-family:"Helvetica Neue",Helvetica,Arial,sans-serif;
  letter-spacing:1px;
  text-transform:uppercase;
  font-weight: 500;
  cursor: pointer;
  z-index:10;
  margin:.8%;
  vertical-align: top;
}
.CTAdropdown .btnImg, 
.CTAdropdown ul li a, .CTAButton{
  text-decoration:none;
  color:#000d42;
  border: #000d42 2px solid;
  background-color:#fff;
  padding: .7em;
  text-align: center;
  box-sizing: border-box;
}
.CTAdropdown ul{
  margin:0;
  padding:0;
  transition: max-height .5s;
  max-height:0;
  overflow:hidden;
}
.CTAdropdown:hover ul{ max-height:400px; }
.CTAdropdown ul li{ list-style: none; }
.CTAdropdown ul li a{
  display: block;
  border-top:0px;
}

.CTAdropdown ul li a:hover{
  color:#fff;
  background-color:#000d42;
  border: #000d42 2px solid;
  border-top: 0px !important;
}

.CTAdropdown #minus, 
.CTAdropdown #plus{ 
  width:5px; 
  padding-right:.5em;
}

.CTAdropdown #plus,
.CTAdropdown:hover #minus{
  display:inline-block;
}

.CTAdropdown:hover #plus,
.CTAdropdown #minus{
  display:none;
}

.CTAdropdown #minus, 
.CTAdropdown #plus{ 
  width:5px; 
  padding-right:.5em;
}

.CTAdropdown span.plusMinus{
  display: inline-block;
  width: 8px;
  padding:0;
}
.CTAdropdown span.plusMinus:after{
  position: relative;
  content: '+'
}

.CTAdropdown .open span.plusMinus:after {
  content: '-';
}

@media (min-width:768px){
  .CTAdropdown:hover span.plusMinus:after{
    content: '-';
  }
}

/*================================ ALTERNATIVE CTA STYLES ============================================*/
/*  blue  inverse*/
.CTAdropdown[data-color="default inverse"] .btnImg, 
.CTAdropdown[data-color="default inverse"] ul li a, 
.CTAButton[data-color="default inverse"]{
  color:#fff;
  border-color: #fff;
  background-color:#000d42;
}
.CTAdropdown[data-color="default inverse"] ul li a:hover{
  color:#000d42;
  background-color:#fff;
}
.CTAButton[data-color="default inverse"] .caret{
  border:#fff 5px solid;
  border-color:transparent transparent transparent #fff;
}

/*  black */
.CTAdropdown[data-color="black"] .btnImg, 
.CTAdropdown[data-color="black"] ul li a, 
.CTAButton[data-color="black"]{
  color:#fff;
  border-color: #fff;
  background-color:#000;
}
.CTAdropdown[data-color="black"] ul li a:hover{
  color:#000;
  background-color:#fff;
}
.CTAButton[data-color="black"] .caret{
  border:#fff 5px solid;
  border-color:transparent transparent transparent #fff;
}


/*  black */
.CTAdropdown[data-color="black inverse"] .btnImg, 
.CTAdropdown[data-color="black inverse"] ul li a, 
.CTAButton[data-color="black inverse"]{
  color:#000;
  border-color: #000;
  background-color:#fff;
}
.CTAdropdown[data-color="black inverse"] ul li a:hover{
  color:#fff;
  background-color:#000;
}
.CTAButton[data-color="black inverse"] .caret{
  border:#000 5px solid;
  border-color:transparent transparent transparent #000;
}

/*  transparent */
.CTAdropdown[data-color="transparent"] .btnImg,
.CTAdropdown[data-color="transparent"] ul li a, 
.CTAButton[data-color="transparent"]{
  background-color: transparent;
  color:#000;
}
@media (max-width: 767px){
  .CTAdropdown[data-color="transparent"] .btnImg,
  .CTAdropdown[data-color="transparent"] ul li a, 
  .CTAButton[data-color="transparent"]{
    background-color: #fff;
    color:#000;
  }
}

/*  white */
.CTAdropdown[data-color="transparent white"] .btnImg, 
.CTAdropdown[data-color="transparent white"] ul li a, 
.CTAButton[data-color="transparent white"]{
  color:#fff;
  border-color: #fff;
  background-color:transparent;
}
.CTAButton[data-color="transparent white"] .caret{
  border:#fff 5px solid;
  border-color:transparent transparent transparent #fff;
}

/*  translucent white */
.CTAdropdown[data-color="translucent white"] .btnImg{
  background-color: transparent;
}
.CTAdropdown[data-color="translucent white"] ul li a, 
.CTAButton[data-color="translucent white"]{
  background-color: rgba(255, 255, 255, 0.6);
}
.CTAdropdown[data-color="translucent white"] ul li a:hover{
  background-color: rgba(0, 0, 0, 0.6);
}

/*  tanslucent black */
.CTAdropdown[data-color="translucent black"] .btnImg{
  background-color: transparent;
}
.CTAdropdown[data-color="translucent black"] ul li a, 
.CTAButton[data-color="translucent black"]{
  background-color: rgba(0, 0, 0, 0.4);
}
.CTAdropdown[data-color="translucent black"] ul li a:hover{
  color:inherit;
  background-color: rgba(255, 255, 255, 0.6);
}

/* DROP DOWN BERAKPOINT styling */
@media (min-width: 1200px){
  .CTAdropdown, .CTAButton{ font-size: .77777777777em; /*14px*/ }
  .CTA-font18{ font-size:1em; /*18px*/ }
}

@media (max-width: 1200px) and (min-width:768px){
  .CTAdropdown, .CTAButton{ font-size: .7em; }
  .CTA-font18{ font-size:.9em }
}

              /* divison pages overrides */
              @media (max-width: 1050px) and (min-width:900px){
                #divisionPage_RegionTop .CTAdropdown, .CTAButton{ font-size: .6em; }
                #divisionPage_RegionTop .CTA-font18{ font-size:.8em }
              }
              @media (max-width: 900px) and (min-width:768px){
                #divisionPage_RegionTop .CTAdropdown, .CTAButton{ font-size: .5em; }
                #divisionPage_RegionTop .CTA-font18{ font-size:.7em }
              }


@media (max-width: 767px){
  .CTAwrapper{
      width:96%;
      margin:0 auto;
      text-align: center;
  }
  .CTAdropdown, .CTAButton {
      font-size: 1.1em;
      font-weight: bold;
      letter-spacing: 0px;
      position:relative;
      margin:0 auto;
      width: 90%;
      margin-top:.5em;
  }
  .CTAdropdown ul li a, .CTAButton ul li a{ font-size: .9em;}

  .CTAButton.half{ width:48%; margin:0 .8%;}
  .CTAButton.half:first{ margin-right:1%; }

  .caret{ display:none; }

  .CTAdropdown ul.accordianMenu-list, .CTAdropdown:hover ul.accordianMenu-list{ max-height:800px; }

  .CTAdropdown .btnImg,.CTAButton{
    padding: .8em .5em;
    text-align: center;
  }

  .accordianMenu-list{ display:none;}

  .CTAdropdown ul li a, .CTAdropdown ul li a:hover{
    border:0px 0 2px 0;
    border-style: solid;
    padding: 3%;
  }
}


@media screen and (max-width:600px){
  .CTAButton.half{ margin:0 .6%; }
}

@media screen and (max-width: 540px){
  .CTAdropdown, .CTAButton, .CTAButton.half{ font-size: .9em; }
}

/*========================================================================================
              COPY STYLES
========================================================================================*/

.e1, .h1, .sc1, .shoph1{ pointer-events: none; }

.e1{
  font-size: 1.2em;
  font-weight: bold;

}
.h1{
  font-size: 3em;
  font-weight: bold;
  margin: .2em 0 .5em 0;
}
.sc1{
    font-size: 1.2em;
    font-weight: 100; 
    margin-bottom: 1em;
}
.shoph1{
  font-size: 1.2em;
    font-weight: bold; 
    text-transform: uppercase;
}

.copyWrap{
  text-align: center;
  position:relative;
  padding: 0 5%;
}

.copyWrap.copyClickThrough{ pointer-events: none; }

.e1:hover, .h1:hover, .sc1:hover, .shoph1:hover{ text-decoration: none; }

/*COPY STYLES CHAGES AT DIFFERENT BREAKPOINTS*/
@media screen and (max-width: 1300px) and (min-width:1000px){
  .h1{
    font-size: 2.6em;
      margin: .2em 0 .4em 0;
  }
  .sc1,.shoph1{ font-size: 1.1em; }
}
@media screen and (max-width: 1000px) and (min-width:767px){
  .h1{
    font-size: 2em;
      margin: .1em 0 .3em 0;
  }
  .sc1,.shoph1{ font-size: .9em; }
}
@media screen and (max-width: 400px){
  .h1{ font-size: 2.2em; }
  .sc1,.shoph1{ font-size: 1em; }
}

@media screen and (min-width:768px){
  .whiteFont-at-lg{ color:#fff; }
}

@media screen and (max-width: 767px){
  .copyWrap{
    padding: 2% 2%;
    width:96%;
    text-align: center;
  }

  .blackFont-at-md{ color:#000; }
  .whiteFont-at-md{ color:#fff; }
}


/*========================================================================================
                  KEYLINE
========================================================================================*/
.keyline{
  border:0px;
  margin:40px 0;
}
.keyline[data-color="blue"]{ border:#000d42 solid 3px; }
.keyline[data-color="grey"]{ border:#ccc solid 3px; }
.keyline[data-color="black"]{ border:#000 solid 3px; }
.keyline[data-color="black-1px"]{ border:#000 solid 1px; margin:10px 0; }

/*========================================================================================
          Flex Attributes
========================================================================================*/

.flexCenter{
  display: -webkit-flex;
  display:flex;
  -webkit-align-items: center;
  align-items:center;
}

@media only screen and (min-width:768px){
  .flexOrder2{
    -webkit-order: 2;
    order: 2;
  }
  .flexOrder1{
    -webkit-order: 1;
    order: 1;
  }
  .flexOrder2, .flexOrder1{
  display: -webkit-flex;
  display:flex;
    -webkit-flex-flow: row nowrap;
    flex-flow: row nowrap;
  }
}

/*========================================================================================
          Other Useful Styles
========================================================================================*/

.alignCenter{
  text-align: center;
}

/* END GAP CTA AND DROPDOWN STYLES */



/* WCD fixes of IT bugs */
/* Preview Bar fix */
.responsiveShoppingBag #previewBar input[type="radio"] { width:auto; height:auto }
</style> 

<!--new CSS dropdown V2 091316 XC -->
<link rel="stylesheet" type="text/css" href="/Asset_Archive/GPWeb/content/0011/027/523/wcd-resp-styles-v2.css">

<div class="grid-root">
	<div class="g-1-1">
		<div id="topNavWrapper">
			<div id="mainNavGOL">
				<ul class="gpnavigation">
					<li class="topNavItem"></li>
					<li id="globalLogo">
						<a href="/"><img id="gapLogo_2016" src="/Asset_Archive/GPWeb/content/0012/205/831/assets/GAP_logo-retina.gif" alt="gap" /></a>
					</li>
					<li class="topNavItem">
						<a id="division5643" class="division5643_notSelected" href="/browse/subDivision.do?cid=5646&mlink=5058,10323290,visnav_W&clink=10323290">women</a>
					</li>
					<li class="topNavItem">
						<a id="customtopNav1016012" class="topNavItem gol_gapBodyNav"  href="/browse/category.do?cid=1016012&mlink=5058,10323290,visnav_Body&clink=10323290">gapbody</a>
					</li>
					<li class="topNavItem">
						<a id="division83062" class="division83062_notSelected" href="/browse/subDivision.do?cid=83062&mlink=5058,10323290,visnav_GapFit&clink=10323290">gapfit</a>
					</li>
					<li class="topNavItem">
						<a id="division5997" class="division5997_notSelected" href="/browse/division.do?cid=5997&mlink=5058,10323290,visnav_Mat&clink=10323290">maternity</a>
					</li>
					<li class="topNavItem">
						<a id="division5063" class="division5063_notSelected" href="/browse/subDivision.do?cid=5065&mlink=5058,10323290,visnav_M&clink=10323290">men</a>
					</li>
					<li class="topNavItem">
						<a id="division6256" class="division6256_notSelected" href="/browse/subDivision.do?cid=6256&mlink=5058,10323290,visnav_G&clink=10323290">girls</a>
					</li>
					<li class="topNavItem">
						<a id="division6172" class="division6172_notSelected" href="/browse/subDivision.do?cid=6172&mlink=5058,10323290,visnav_B&clink=10323290">boys</a>
					</li>
					<li class="topNavItem">
						<a id="division6413" class="division6413_notSelected" href="/browse/subDivision.do?cid=6413&mlink=5058,10323290,visnav_T&clink=10323290">toddler</a>
					</li>
					<li class="topNavItem">
						<a id="division6487" class="division6487_notSelected" href="/browse/subDivision.do?cid=6487&mlink=5058,10323290,visnav_Baby&clink=10323290">baby</a>
					</li>
					<li class="topNavItem">
						<a id="customtopNavv1043398" class="gol_olapic" href="/browse/info.do?cid=1043398&mlink=5058,10323290,visnav_Olapic&clink=10323290"><span class="gol_socialLink">#gaplove</span></a>
					</li>
					<li class="topNavItem">
						<a id="customtopNavGFOL" class="gfol_division" href="http://www.gapfactory.com/?tid=gfsv000000" target="_blank" onclick="GFS_evarTrackIt();">gap factory</a>
					</li>
					<li class="topNavItem"></li>
				</ul>
			</div><!-- end topNavWrapper-->
		</div><!-- end mainNavGOL-->
	</div><!-- end g-1-1 -->
</div><!-- end grid-root -->

<script type="text/javascript">
function GFS_evarTrackIt() {
        s.linkTrackVars = 'eVar6';
        s.eVar6 = 'MainNav_GFOLHP'; //tid here
        s.tl(this, 'o', s.eVar6);
}


jQuery(window).load( function() {
    /* #gaplove on-state */
    if (jQuery('body').hasClass("cid1043398")) {
        jQuery('.gol_olapic').addClass("gaplove_selected");
    }

    /* #gapbody on-state */
    if (jQuery('body').hasClass("cid1016012")) {
        jQuery('#division5643').removeClass('division5643_selected').addClass('division5997_notSelected');
        jQuery('.gol_gapBodyNav').addClass("gapBody_selected");
    }
    
	// FIX PROFILE/CUSTOMER_VALUE.DO TOPNAV ISSUE & FONT STYLING - OS         
	if( location.pathname == "/profile/customer_value.do" ){
		jQuery('body').attr('style', 'font-family: Verdana,Arial,Sans-serif; font-size:10px;');
		if (gap.Mediaqueries.currentBP.size == 'medium' || gap.Mediaqueries.currentBP.size == 'small') {
			jQuery('#topNav').attr('style','display:none !important;');
		}
	}
});


/******* CTA DROPDOWN ACCORDIAN **********/
jQuery(function() {
//Accordion Menu Manager
  wcdAccordionMenu = {
    model : {
      animationInProgress : false
    },

    init : function() {
  		var flag = false;
  		jQuery('.btnImg').bind('touchstart click', function(){
  		  if (!flag) {
  		    flag = true;
  		    setTimeout(function(){ flag = false; }, 100);
  		    wcdAccordionMenu.expandCollapse(jQuery(this));
  		  }
  		  return false
  		});
    },

    expandCollapse : function(obj) {

          if (wcdAccordionMenu.model.animationInProgress) return false;

          wcdAccordionMenu.model.animationInProgress = true;
          var targetDiv = obj.next('.accordianMenu-list');
          var plusMinusExist= obj.children().hasClass('plusMinus') ? true : false;
          var plus, minus;

          if(!plusMinusExist){
            plus = obj.children();
            minus = obj.children().next();
          }

          if (obj.hasClass('open')) {
            obj.removeClass('open');
            /* change sinage*/
            if(!plusMinusExist){
              plus.css('display','inline-block');
              minus.css('display','none');
            }
            targetDiv.slideUp(250,'linear',function() {
              wcdAccordionMenu.model.animationInProgress = false;
            });
          }
          else {
            obj.addClass('open');
            /* change sinage*/
            if(!plusMinusExist){
              plus.css('display','none');
              minus.css('display','inline-block');
            }
            targetDiv.slideDown(250,'swing'); 
            jQuery('html, body').animate({scrollTop: obj.offset().top - 62}, 500, 'swing', function() {
              wcdAccordionMenu.model.animationInProgress = false;
            });
          }
        }
      };

  var wcd_ctaInitiated=false;

  function initAccordian(){
    if(jQuery(window).width() <=768){
      if(wcd_ctaInitiated==false){
        wcd_ctaInitiated=true;
        wcdAccordionMenu.init();
      }
      else{
        return 0;
      }
    }
  }


jQuery('.btnImg').on('click', function(){
  wcdAccordionMenu.expandCollapse(jQuery(this));
});

  if (location.pathname != "checkout/order.do"){

    jQuery(window).resize(function(){
    initAccordian();
    })

    initAccordian();
  }

});

/******* END CTA DROPDOWN ACCORDIAN **********/
</script>

<!--new CTA dropdown V2 091316 XC -->
<script src="/Asset_Archive/GPWeb/content/0011/027/523/wcd-resp-script-v2.js"></script>


<!--  ONESITE Disruptor/Ticker Templates -->
</div>

	
</div>
 


				</div>
			
		
		
		<div id="mainContent">
			<h3 class="cssHide visually-hidden">Main Content:</h3>
			




	
		
	
	
			


	
			
			
	
	
	
	










<div id="landingVariant10000774">
	<div id="landingMainContainer10000774">
		
			
		




	
		
	
	
			


	
			
			
	
	
	
	










	
	





	
		
	
	
			


	
			
			
	
	
	
	












	</div>
</div>

		</div>
	</div>

	<a name="skipNavFooter"></a>
	<div class="nav-shiftee">
		<div id="footer">
			




	
		
	
	
			


	
			
			
	
	
	
	












	
<div id="footer_BrandContainer">
	<div id="footer_brand_region1"><!-- @TemplateContentLayout(templateRegionName:"gid.common.siteWide.brand.footers.region1") -->
<!-- CIID:11934002 Gap US - Footer Region -->

<style>

/* BEGIN OVERRIDE: Keep the searchDexFooter from hitting the screen edges */
#searchDexFooter .expFooter {
	box-sizing: border-box;
	padding-left: 1em;
	padding-right: 1em;
}
/* END OVERRIDE: Keep the searchDexFooter from hitting the screen edges */

/* BEGIN OVERRIDE for shopping bag CSS */
body.shopping_bagPage #footer .gridContainer {
	max-width: 100%;
	padding: 0px;
}
/* END OVERRIDE for shopping bag CSS */

/* BEGIN RESILIENT CSS - Ensure that footer displays consistenty across page types */
#footer {
	-webkit-text-size-adjust: 100%;	/* Prevent Landscape/Portrait font size changes */
	font-size: 16px;
	line-height: 1;
}
/* END RESILIENT CSS */

.brandFooter_Region1 .ftr-section {
	box-sizing: border-box;
	width: 100%;
}
.brandFooter_Region1 .ftr-section:empty {
	display: none;
}

/* Utility */
.brandFooter_Region1 .grid-root {
	width: 100%;
}
.brandFooter_Region1 .grid-root > * {
	box-sizing: border-box;
}
.brandFooter_Region1 .sitewidth-max {
	box-sizing: border-box;
	width: 100%;
	max-width: 1400px;	/* grabbed from site header width */
	margin-left: auto;
	margin-right: auto;
}
.brandFooter_Region1 .pd_horizontal {
	box-sizing: border-box;
	padding-left: 1em;
	padding-right: 1em;
}
</style>

<div id="brandFooter_Region1" class="brandFooter_Region1 onesite">
	<div id="brandftr1_10000512" class="ftr-section ftr-section-1 clearfix"><!-- BEGIN Content Item File: /content/0010/694/906/cn10694906.html -->
<div id="contentItemContainer10000512" class="10694906" >

<!-- CIID:10694906 Gap US - Pre-Footer Rotating Message Banner -->

<style type="text/css">

.prefooter-banner-container {
	border-top: 1px solid #999;
	border-bottom: 1px solid #999;
	padding-top: 1em;
	padding-bottom: .25em;
	margin: 1.5em auto;
	cursor: pointer;
}
.prefooter-banner-container,
.prefooter-banner-container a,
.prefooter-banner-container .heading-e,
.prefooter-banner-container .body-a {
	color: #999;
	line-height: 1;
}
.prefooter-banner-container .prefooter-logos img,
.prefooter-banner-container .icon img {
	width: 100%;
}
.prefooter-banner-container .details .body-a {
	font-size: .75em;
}
.prefooter-banner-container .details .body-a:hover {
	text-decoration: underline;
}

/* Logos */
.prefooter-logos img {
	margin-bottom: 1.25em;
}

/* Animated Section */
.prefooter-banner-container .wcd-universal-banner-message-container .animation-frame {
/*.prefooter-banner-container .wcd-universal-banner-message-container .animation-frame:not(:first-child) {*/
	display: none;
}
.prefooter-banner-container .wcd-universal-banner-message-container .animation-frame-inner {
	display: -webkit-box;
	display: -moz-box;
	display: -ms-flexbox;
	display: -webkit-flex;
	display: flex;
	-webkit-flex-flow: row nowrap;
	flex-flow: row nowrap;
	-webkit-justify-content: center;
	justify-content: center;
	-webkit-align-items: center;
	align-items: center;
	width: 100%;
	min-height: 31px;	/* keep the element height stable so the footer doesn't 'bounce' */
}
.prefooter-banner-container .wcd-universal-banner-message-container .animation-frame .icon {
	width: 30px;
	text-align: center;
}
.prefooter-banner-container .wcd-universal-banner-message-container .animation-frame .copy-area {
	box-sizing: border-box;
	padding-left: 10px;
}
.prefooter-banner-container .wcd-universal-banner-message-container .animation-frame .copy-area .heading-e {
	font-size: .9em;	/* fit on one line at 320px breakpoint */
}
.prefooter-banner-container .wcd-universal-banner-message-container .animation-frame .copy-area .body-a {
	font-size: .75em;
}

.prefooter-banner-container .wcd-universal-banner-message-container .checkout-footer .icon img {
	width: 20px;
}

.prefooter-banner-container .details {
	padding-top: .5em;
}

/* Breakpoint: XL */
@media only screen and (min-width: 1024px) {

	.prefooter-banner-container .wcd-universal-banner-message-container {
		order: 1;
		display: -webkit-box;
		display: -moz-box;
		display: -ms-flexbox;
		display: -webkit-flex;
		display: flex;
		-webkit-align-items: center;
		align-items: center;
	}
	.prefooter-banner-container .prefooter-logos {
		order: 2;
	}
	.prefooter-banner-container .details {
		order: 3;
	}
	.prefooter-logos img {
		margin-bottom: 0;
	}
	.prefooter-banner-container .wcd-universal-banner-message-container .animation-frame .copy-area .heading-e {
		font-size: 1.25em;
	}
	.prefooter-banner-container .wcd-universal-banner-message-container .animation-frame .copy-area .body-a {
		font-size: .9em;
		margin-top: 2px;
	}
	.prefooter-banner-container .wcd-universal-banner-message-container .animation-frame-inner {
		-webkit-justify-content: start;
		justify-content: start;
		min-height: 37px;	/* keep the element height stable so the footer doesn't 'bounce' */
	}

}

</style>

<div class="prefooter-banner-container pd_horizontal toggle-universal-modal" data-url="/Asset_Archive/GPWeb/content/0010/690/059/assets/edfsLegal.html" data-modal-size="standard" data-action-sheet="small">
	<div class="sitewidth-max grid-root">
		<div class="prefooter-logos g-1-1 g-xl-1-2">
			<img alt="Gap | Banana Republic | Old Navy | Athleta" class="show-at-md" src="/Asset_Archive/ONWeb/content/0010/680/774/assets/logos.svg" data-nonsvgimg="/Asset_Archive/ONWeb/content/0010/680/774/assets/logos@2x.png" />
		</div><!-- /.prefooter-logos -->
		<div class="wcd-universal-banner-message-container g-1-1 g-xl-1-2">

			<div class="shipping-footer animation-frame">
				<div class="animation-frame-inner">
					<div class="icon">
						<img alt="Shipping Icon" src="/Asset_Archive/ONWeb/content/0010/680/774/assets/icon-shipping.svg" data-nonsvgimg="/Asset_Archive/ONWeb/content/0010/680/774/assets/icon-shipping@2x.png" />
					</div>
					<div class="copy-area">
						<h4 class="heading-e">Shipping is on us!</h4>
						<p class="body-a show-at-lg">FREE on orders of $50 or more</p>
					</div>
				</div>
			</div>

			<div class="returns-footer animation-frame">
				<div class="animation-frame-inner">
					<div class="icon">
						<img alt="Returns Icon" src="/Asset_Archive/ONWeb/content/0010/680/774/assets/icon-returns.svg" data-nonsvgimg="/Asset_Archive/ONWeb/content/0010/680/774/assets/icon-returns@2x.png" />
					</div>
					<div class="copy-area">
						<h4 class="heading-e">FREE Returns on All Orders</h4>
					</div>
				</div>
			</div>

			<div class="checkout-footer animation-frame">
				<div class="animation-frame-inner">
					<div class="icon">
						<img alt="Shopping Bag Icon" src="/Asset_Archive/ONWeb/content/0010/680/774/assets/icon-shoppingbag.svg" data-nonsvgimg="/Asset_Archive/ONWeb/content/0010/680/774/assets/icon-shoppingbag@2x.png" />
					</div>
					<div class="copy-area">
						<h4 class="heading-e">4 Brands, One Easy Checkout</h4>
					</div>
				</div>
			</div>

		</div><!-- /.wcd-universal-banner-message-container -->
		<div class="g-1-1 details">
			<p class="body-a right">details</p>
		</div>
	</div>
</div><!-- /.prefooter-banner-container -->


<script type="text/javascript">

// Infinitely Rotate Through Messages
jQuery(window).ready(function() {
	var InfiniteRotator = {
		init: function() {

			//initial fade-in time (in milliseconds)
			var initialFadeIn = 0;

			//interval between items (in milliseconds)
			var itemInterval = 4000;

			//cross-fade time (in milliseconds)
			var fadeTime = 0;

			//count number of items
			var numberOfItems = jQuery('.wcd-universal-banner-message-container > .animation-frame').length;

			//set current item
			var currentItem = 0;

			//show first item
			jQuery('.wcd-universal-banner-message-container > .animation-frame').eq(currentItem).fadeIn(initialFadeIn);

			//loop through the items
			var infiniteLoop = setInterval(function(){
				jQuery('.wcd-universal-banner-message-container > .animation-frame').eq(currentItem).fadeOut(fadeTime);
				if(currentItem == numberOfItems -1) {
					currentItem = 0;
				} else {
					currentItem++;
				}
				jQuery('.wcd-universal-banner-message-container > .animation-frame').eq(currentItem).fadeIn(fadeTime);
			}, itemInterval);
		}
	};
	InfiniteRotator.init();
});

</script>


</div>
<!-- END Content Item File: /content/0010/694/906/cn10694906.html -->
</div>
	<div id="brandftr2_10000514" class="ftr-section ftr-section-2 clearfix"></div>	
	<div id="brandftr3_10000513" class="ftr-section ftr-section-3 clearfix"><!-- BEGIN Content Item File: /content/0012/371/837/cn12371837.html -->
<div id="contentItemContainer10000513" class="12371837" >

<!-- Implements CORS for IE8/IE9 -->
<script type="text/javascript" src="/Asset_Archive/GPWeb/content/0012/371/837/assets/jquery.xdomainrequest.min.js"></script>

<!-- sitewide Olapic API wrapper -->
<link rel="stylesheet" type="text/css" href="/Asset_Archive/GPWeb/content/0012/371/837/assets/slick/slick.css"/>
<link rel="stylesheet" type="text/css" href="/Asset_Archive/GPWeb/content/0012/371/837/assets/slick/slick-theme.css"/>
<script type="text/javascript" src="/Asset_Archive/GPWeb/content/0012/371/837/assets/slick/slick.min.js"></script>

<!-- Sitewide OLAPIC Lightbox -->
<style>
#shop-social-popup {
  width: 100%;
  display: none;
  margin: auto;
  overflow: scroll;
  position: fixed;
  left: 0;
  top: 5px;
  padding-bottom:30px;
  -webkit-overflow-scrolling: touch;
  z-index: 10000010;
  background-color: #FFF;
  height:100%;
  font-size: 12px;
}

@media (min-width: 768px) {
	#shop-social-popup {
	  height:auto;
	}
}

#shop-social-popup-inner {  
    margin: 10px auto 10px auto;
    position: relative;
    width: 100%;
}

#popup-left-col {position: relative;float:left;text-align: center;}
#popup-right-col {position: relative;float:left;text-align: center;width:100%;}



#popup-left-col .o-ugc-image {
  width:  90%;
  float: left;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: 50% 50%; 
}



.o-br-shop-this-look { 
  display: block;
  text-align: center;
  margin-top: 10%;
 }

#popup-right-col-scroller {
  width: 100%;
  overflow: hidden;
  position: relative;
  margin-bottom: 20px;
  margin-top: 20px;
}


  .noProductsMsg {
    display:none;
    width: 250px; 
    height: 220px;
    text-align: center;
    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; 
    font-size: 1.5em; 
    color: #000; 
    position: relative;
    margin: 50px auto 0;
  }

  .noProductsMsg p{
    line-height: 1.5em;
  }

/* SLICK SCROLLER STYLES */
#popup-right-col-scroller .slick-prev { position:relative; float:left; display:none !important; }
#popup-right-col-scroller .slick-next {
    background-image: url('/Asset_Archive/GPWeb/content/0012/371/837/assets/GAP_olapic_ShoppablePopUp2orMore_desktop_more.png') !important;
    background-repeat: no-repeat !important;
    width:44px !important;
    height:11px !important;
    margin-top: -58px !important;
    margin-right: 25px  !important;
}
#popup-right-col-scroller .slick-slider { margin-bottom: 0;}
#popup-right-col-scroller .slick-list { padding-left: 40px; }

.taggedProduct { margin-bottom: 28px; display: inline-block;position: relative;vertical-align: top;}
.o-product-price { text-align: center; }
.o-product-url { text-align: center; }
.o-product-name { margin:0 auto;text-align: center;font-size: 12px; padding-top: 5px; color: #000; }
.o-ugc-uploader { margin: 10px 0px; text-decoration: none; text-align: center; color: #000; font-size: 12px;  }
#footer .o-ugc-uploader a:link, #footer .o-ugc-uploader a:visited, #footer .o-ugc-uploader a:active, .o-ugc-uploader a:hover {
  text-decoration: none; 
  font-weight: 700; 
  font-size: 12px; 
  color: #000;
}
.o-gp-social-share {text-align: center; }
.o-gp-social-share img { margin-top:20px; }
.o-lightbox-keyline {border-top: 1px solid #000; width: 50%; margin: 0 auto;}
.o-upload-photos-button { text-align: center; }
.o-ucg-uploader-social img { 
  width: 10px; 
  height: 10px;
}

.ugc-image-holder {max-width: 100%;}

.o-ugc-prev-image {
  position: relative;
  max-width: 25px;
  width:5%;
  float: left;
  margin-top: 33%;
  top: 50%;
  transform: translateY(-50%);

}

.o-ugc-next-image {
  position: relative;
  max-width: 25px;
  width: 5%;
  float: left; 
  margin-top: 33%;
  top: 50%;
  transform: translateY(-50%);
}

.button-x-close {
  background-image: url(/Asset_Archive/GPWeb/content/0012/371/837/assets/close.png);
  background-repeat: no-repeat;
  display: block;
}

#shop-social-popup .o-credit { position: relative; float:left; width:100%; text-align:right;margin-right: 5px; color: #CCC; font-size: 1em; }
#shop-social-popup .o-credit a { font-size: 1em; color: #CCC; text-decoration: none; }
#shop-social-popup .o-credit a:hover { text-decoration: none; color: #000; }
#shop-social-popup .o-credit img { width: 20px; margin-right: 5px; }


  /* REP PRODUCT LIGHTBOX */
  .blackOutOlapic{
      display: table;
      position: fixed;
      width:100%;
      height:105%;
      background-color: #000;
      opacity: .7;
      z-index: 1;
      top:0;
      bottom:0;
      display:hidden;
      visibility: hidden;
  }

  .popupAlignCenterOlapic {
    display: table-cell;
    vertical-align: middle;
  }
</style>


<!-- BEGIN: RESPONSIVE OLAPIC POPUP -->
<div class="grid-root">
<div class="show-at-lg">
	<div class="blackOutOlapic"> <!-- 50% white -->
	  <div class="popupAlignCenterOlapic"> <!--vertically aligns center -->  <!-- popup content here --> </div>
	</div>
</div>


  <div id="shop-social-popup" data-media-id="">
    <div id="shop-social-popup-inner" class="g-1-1">
      <span class="button-x-close" style="display: block; width: 21px; height: 21px; position: absolute; right: 14px; z-index: 50; cursor: pointer;" onclick="closeShopSocialPopUp();"></span>
      <div class="g-1-1 g-lg-1-2" style="float: left;">
          <div id="popup-left-col">
              <div class="g-1-1 o-ugc-uploader"><span class="o-ucg-uploader-social"></span> Photo by <span class="o-displayName"></span><a href="javascript:void(0)" target="_blank"></a></div>
              <div class="g-1-1 ugc-wrapper" style="position: relative; text-align: center;width: 100%" >
                <div class="o-ugc-prev-image"><a class="br-photostream-prev" href="#"><img src="/Asset_Archive/GPWeb/content/0012/371/837/assets/Lightbox-PrevArrow-72.png" alt="previous arrow"></a></div>
                <div class="o-ugc-image"><img class="ugc-image-holder" src="/Asset_Archive/GPWeb/content/0012/371/837/assets/clearOlapic.gif"></div>
                <div class="o-ugc-next-image"><a class="br-photostream-next" href="#"><img src="/Asset_Archive/GPWeb/content/0012/371/837/assets/Lightbox-NextArrow-72.png" alt="next arrow"></a></div>
              </div>
              <div class="g-1-1 o-gp-social-share">
                <img src="/Asset_Archive/GPWeb/content/0012/371/837/assets/GAP_olapic_ShoppablePopUp2orMore_desktop_icons.png" alt="care to share" usemap="#careToShare_links" />
                  <map name="careToShare_links">  
                    <area shape="rect" coords="0,0,15,16" id="careToShare_fbLink" href="#" target="_blank" alt="share on facebook" />
                    <area shape="rect" coords="25,0,55,16" id="careToShare_twitterLink" href="#" target="_blank" alt="share on twitter" />
                    <area shape="rect" coords="62,0,80,16" id="careToShare_pinterestLink" href="#" target="_blank" alt="share on pinterest" />
                    </map>
              </div>
          </div>
      </div>
      <div class="g-1-1 g-lg-1-2">
        <div id="popup-right-col">
            <div class="g-1-1 o-br-shop-this-look"><img src="/Asset_Archive/GPWeb/content/0012/371/837/assets/030316_OLA_shopthelook_header.png" alt="shop this look"></div>
            <div class="o-lightbox-keyline"></div>
            <div id="popup-right-col-scroller"></div>
            <div class="noProductsMsg"><p>This product was so popular,<br>it's no longer available.</p><br><p><b>Don't worry!</b></p><p>We have so many more <br>things for you to love<br>just a click away...</p></div>
            <div class="o-lightbox-keyline"></div>
        </div>
      </div>
      <div class="o-credit"><a href="http://olapic.com" target="_blank" title="Powered by Olapic"><img src="/Asset_Archive/GPWeb/content/0012/371/837/assets/olapicIcon.png" alt="Olapic Icon"></a></div>
    </div>
  </div>

</div>

<script>
// FACEBOOK SHARE 
var wcdPageCID=window.location.search;
var wcdPageHash=wcdPageCID.substring(wcdPageCID.indexOf('=')+1);
if(wcdPageHash!="91471" && wcdPageHash!="1040058"){

  window.fbAsyncInit = function() {
    FB.init({
      appId      : '1630547193866115',
      xfbml      : true,
      version    : 'v2.5'
    });
  };

  /*(function(d, s, id){
     var js, fjs = d.getElementsByTagName(s)[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement(s); js.id = id;
     js.src = "//connect.facebook.net/en_US/sdk.js";
     fjs.parentNode.insertBefore(js, fjs);
   }(document, 'script', 'facebook-jssdk'));*/

  function postToFeed(opi, picId) {
    //console.info('facebook feed: ' + opi);
    //console.info(picId);
    // calling the API ...
    var obj = {
      method: 'feed',
      redirect_uri: 'http://www.gap.com',
      link: 'http://www.gap.com/browse/info.do?cid=1043398&mlink=5058,10323290,facebook_Olapic&clink=10323290&opi=' + opi,
      picture: picId,
      name: 'gap x you',
      description: "#gaplove Wear, share + show us how you Gap this season."
    };

    function callback(response) {
      // document.getElementById('msg').innerHTML = "Post ID: " + response['post_id'];
      //console.info('fb callback');
    }
    FB.ui(obj, callback);
  }
}

</script>

<script type="text/javascript">
var Olapic = {
  API_KEY: "5a39292e61c5c3ebbc9e5d9eca88cae29a878ecd535f648b91fb97aaf708899a", //API Key for GP US
  API_BASE_URL: "//photorankapi-a.akamaihd.net",
  AUTH_TOKEN: "?auth_token=5a39292e61c5c3ebbc9e5d9eca88cae29a878ecd535f648b91fb97aaf708899a", //API Key for GP USer
  //API_VER: "&version=v2.2&rights_given=1",
  API_VER: "&version=v2.2",
  CALLBACK: "&callback=?",
  CUSTOMERID: "217355", //GAP US
 

  TRACK_BASE_URL: "//data.photorank.me/track/widget/",
  RSTRING: "", // Olapic Analytics cookie value in the __olapicU key
  TRACK_SFDP_ID: "ba1ee346b63349b7c84c06eb1ba191c1", // Olapic instance id
  TRACK_PDP_ID: "8b56748202f7db75a518c7853750a92f", // Olapic instance id

  // PHOTORANK API CALLS
  getMedia: function(objectId) {
    return jQuery.getJSON(Olapic.API_BASE_URL + '/media/' + objectId + Olapic.AUTH_TOKEN + Olapic.API_VER);
  },

  getMediaStreams: function(objectId) {
    return jQuery.getJSON(Olapic.API_BASE_URL + '/media/' + objectId + '/streams/' + Olapic.AUTH_TOKEN + Olapic.API_VER);
  },

  getStream: function(objectId) {
    return jQuery.getJSON(Olapic.API_BASE_URL + '/streams/' + objectId + Olapic.AUTH_TOKEN + Olapic.API_VER);
  },

  getStreamMediaRecent: function(objectId) {
    return jQuery.getJSON(Olapic.API_BASE_URL + '/streams/' + objectId + '/media/recent' + Olapic.AUTH_TOKEN + Olapic.API_VER);
  },

  getStreamsByTag: function(objectId) {
    return jQuery.getJSON(Olapic.API_BASE_URL + '/customers/' + Olapic.CUSTOMERID + '/streams/bytag/' + objectId + Olapic.AUTH_TOKEN + Olapic.API_VER);
  },

  // Analytics API calls

  trackMove: function() {
    return jQuery.getJSON(Olapic.TRACK_BASE_URL + Olapic.TRACK_SFDP_ID + '/best/move' + Olapic.AUTH_TOKEN + '&analytics_id=' + Olapic.RSTRING + '&pics=1');
  },

  trackBestClick: function(mediaId) {
    return jQuery.getJSON(Olapic.TRACK_BASE_URL + Olapic.TRACK_SFDP_ID + '/best/media/' + mediaId + '/click' + Olapic.AUTH_TOKEN + '&analytics_id=' + Olapic.RSTRING + '&pics=1');
  },

  trackBestView: function(mediaId) {
    return jQuery.getJSON(Olapic.TRACK_BASE_URL + Olapic.TRACK_SFDP_ID + '/best/media/' + mediaId + '/view' + Olapic.AUTH_TOKEN + '&analytics_id=' + Olapic.RSTRING + '&pics=1');
  },

  trackBestClose: function(mediaId) {
    return jQuery.getJSON(Olapic.TRACK_BASE_URL + Olapic.TRACK_SFDP_ID + '/best/media/' + mediaId + '/close' + Olapic.AUTH_TOKEN + '&analytics_id=' + Olapic.RSTRING + '&pics=1');
  },

  trackPDPMove: function(streamId) {
    //return jQuery.getJSON(Olapic.TRACK_BASE_URL + Olapic.TRACK_PDP_ID + '/best/move' + Olapic.AUTH_TOKEN + '&analytics_id=' + Olapic.RSTRING + '&pics=1');
    return jQuery.getJSON(Olapic.TRACK_BASE_URL + Olapic.TRACK_PDP_ID + '/stream/'+ streamId + '/move' + Olapic.AUTH_TOKEN + '&analytics_id=' + Olapic.RSTRING + '&pics=1');
  },

  trackStreamPDPRender: function(streamId) {
    return jQuery.getJSON(Olapic.TRACK_BASE_URL + Olapic.TRACK_PDP_ID + '/stream/'+ streamId + '/render' + Olapic.AUTH_TOKEN + '&analytics_id=' + Olapic.RSTRING + '&pics=1');
  }

};

// OLAPIC ANALYTICS

var olapicCookieValue = gidLib.getCookie('__olapicU');

if (!olapicCookieValue) {
  var rString = randomString(32, '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ');
  Olapic.RSTRING = rString;
  gidLib.setCookie('__olapicU', Olapic.RSTRING, gidLib.getFutureDate({"days": 30}), '/', '.gap.com');
} else {
  Olapic.RSTRING = olapicCookieValue;
}

function randomString(length, chars) {
    var result = '';
    for (var i = length; i > 0; --i) result += chars[Math.round(Math.random() * (chars.length - 1))];
    return result;
}
</script>

<script type="text/javascript">
/* Global Vars */
var slickTrigger; // Set global variable for Slick Scroller. Default is off (0).
var prevslickTrigger;
var twoProducts = 0; // Set global variable to check if there are more than 2 products. If yes, then don't turn on the slick scroller. Default is off (0).
var pageId; //Set what page are we on in order to set the Olapic Tracking Vars correctly. 1 = hp; 2 = anywhere else
var unslickToggle = 0;
var isShopPopUp = false;

if( ( window.location.href.indexOf( '/browse/product.do' != -1  && window["productPage"]) ) || ( window.location.href.indexOf( '/browse/info.do?cid=1043398' != -1 ) ) || ( window.location.href.indexOf( '/browse/info.do?cid=1036969' != -1 ) ) ) {
  pageId = 1;
} else {
  pageId = 2;
}

function initSlickScroller() {
    jQuery("#popup-right-col-scroller").slick({
      infinite: true,
      slidesToShow: 2,
      slidesToScroll: 2,
      nextArrow: '<button type="button" class="slick-next"></button>'
    });
}


function showShopSocialPopUp(opi, fromNav, streamId) {

	/*init facebook sdk */
	 (function(d, s, id){
     var js, fjs = d.getElementsByTagName(s)[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement(s); js.id = id;
     js.src = "//connect.facebook.net/en_US/sdk.js";
     fjs.parentNode.insertBefore(js, fjs);
   }(document, 'script', 'facebook-jssdk'));
	 /*end init facebook sdk */

  jQuery(window).scroll(function() { return false; });

  if(jQuery('.blackOutOlapic').css('display')=="none"){
      jQuery('.blackOutOlapic').fadeIn('slow');
  }
  jQuery('.blackOutOlapic').show();
  jQuery('.blackOutOlapic').css('z-index','610');
  jQuery('.blackOutOlapic').css('visibility','visible');


  jQuery("#shop-social-popup").fadeIn("fast");
  jQuery("#shop-social-popup").attr("data-media-id", opi);



  //evar tracking
  if( ( location.pathname == '/' || location.pathname == '/browse/home.do' ) ) {
      Â s.linkTrackVars = 'eVar6';
Â  Â  Â   s.eVar6 = 'HP_Olapic_lightbox'; 
Â  Â  Â   s.tl(this, 'o', s.eVar6);
      Olapic.TRACK_SFDP_ID = olapicWidgetInstance; // HP Tracking ID

      //console.info(olapicWidgetInstance)

  }else if (location.pathname == '/browse/product.do') {
       s.linkTrackVars = 'eVar6';
Â  Â  Â   s.eVar6 = 'Product_Olapic_lightbox'; 
Â  Â  Â   s.tl(this, 'o', s.eVar6);
       Olapic.TRACK_SFDP_ID = '8b56748202f7db75a518c7853750a92f'; // Product Page Tracking ID

  } else {
       s.linkTrackVars = 'eVar6';
Â  Â  Â   s.eVar6 = 'Gallery_Olapic_lightbox'; 
Â  Â  Â   s.tl(this, 'o', s.eVar6);
       Olapic.TRACK_SFDP_ID = olapicWidgetInstance; // Gallery Tracking ID
  }

  Olapic.getMedia(opi).done(function(response) {

    Olapic.trackBestClick(opi).done(function(response) { });
    Olapic.trackBestView(opi).done(function(response) { });
    if (fromNav) {
      Olapic.trackMove(opi).done(function(response) { });
    }
    if (streamId) {
        //console.info("shop social pop stream id " + streamId);
       // Olapic.trackBestClick(opi).done(function(response) { });
       // Olapic.trackBestView(opi).done(function(response) { });
    }

    var picId = response.data.images.normal;
    var ugcSource = response.data.source;
    //console.info(ugcSource);

    jQuery("#popup-left-col .o-ugc-image").css("background-image", "url(" + response.data.images.normal + ")");

    var ugcUploaderName = response.data._embedded.uploader.username;
    var ugcDisplayName = response.data._embedded.uploader.name;
    var userImageSource = response.data.source;

    //var userImageSource = "harddrive";

    jQuery("#popup-left-col .o-ugc-uploader a").html("");

    if (userImageSource == "harddrive") {
      if (ugcDisplayName) { ugcUploaderName = ugcDisplayName.toLowerCase(); }  //if manual upload, use display name   
      jQuery("#popup-left-col .o-ugc-uploader a").removeAttr('href');
      jQuery("#popup-left-col .o-ugc-uploader .o-displayName").html(ugcUploaderName);
      

    } else {
      if (ugcUploaderName) { ugcUploaderName = ugcUploaderName.toLowerCase(); }   //if social media, use user name
      jQuery("#popup-left-col .o-ugc-uploader a").html(ugcUploaderName);
    } 

    if (response.data._embedded.uploader.social_connections.instagram) {
      jQuery("#popup-left-col .o-ugc-uploader .o-ucg-uploader-social").html("<img src='/Asset_Archive/GPWeb/content/0012/371/837/assets/Lightbox-InstagramIcon-72.png'>")
      jQuery("#popup-left-col .o-ugc-uploader a").attr("href", "http://instagram.com/" + response.data._embedded.uploader.social_connections.instagram.username);
    } else if (response.data._embedded.uploader.social_connections.twitter) {
      jQuery("#popup-left-col .o-ugc-uploader .o-ucg-uploader-social").html("<img src='/Asset_Archive/GPWeb/content/0012/371/837/assets/Lightbox-TwitterIcon-72.png'>")
      jQuery("#popup-left-col .o-ugc-uploader a").attr("href", "http://twitter.com/" + response.data._embedded.uploader.social_connections.twitter.username);
    }

    var opiShareUrl = '';
    opiShareUrl = encodeURIComponent("https://www.gap.com/browse/info.do?cid=1043398&opi=");

    jQuery("#careToShare_fbLink").attr("href", "javascript:postToFeed("+opi+", \'"+picId+"\');");
    jQuery("#careToShare_twitterLink").attr("href", "https://twitter.com/home?status=" + opiShareUrl + opi);
    jQuery("#careToShare_pinterestLink").attr("href", "https://pinterest.com/pin/create/button/?url=" + opiShareUrl + opi + "&media=" + response.data.images.normal );

    showTaggedProducts(opi);
    showNextPrevUgcStream(opi, streamId);
    
  });
  jQuery(document).trigger('popup:ready');
}

function showTaggedProducts(opi) {
    resetPopupRightColScroller();

    //console.info('tagged products opi: ' + opi);
    Olapic.getMediaStreams(opi).done(function(response) {

      var productImages = [];
      var productPrices = [];
      var productNames = [];
      var productUrls = [];
      var indexTaggedProduct = -1;
      twoProducts = 0;

      var jsonObjectArray = [];
      var jsonObjectArray = response.data._embedded.stream;
      jsonObjectArray.reverse();
      
      
      if (jsonObjectArray.length >= 3) {
        prevslickTrigger = slickTrigger;
        slickTrigger = 3;
      } else if (jsonObjectArray.length <= 2) {
        prevslickTrigger = slickTrigger;
        slickTrigger = 0;
      } else {
        prevslickTrigger = slickTrigger;
        slickTrigger = 0;
      }

      //hide out of stock message 
		  jQuery('#popup-right-col-scroller').show();
		  jQuery('.noProductsMsg').hide();

      if (jsonObjectArray.length == 2) { twoProducts = 1 } else { twoProducts = 0 }

      jQuery.each(jsonObjectArray, function( index, value ) {
        if (value.tag_based_key) {
          indexTaggedProduct++;
          // if more than one tagged product, create new elements as needed
          if (indexTaggedProduct > 0) {
            jQuery(".taggedProduct:eq(0)").clone().appendTo("#popup-right-col-scroller");
          }

          productImages[indexTaggedProduct] = value._embedded.base_image.images.thumbnail;
          productNames[indexTaggedProduct] = value.name;

          var relativeProductUrl = value.product_url;
          relativeProductUrl = relativeProductUrl.replace(/^.*\/\/[^\/]+/, '');       
          productUrls[indexTaggedProduct] = relativeProductUrl;

          if ( location.pathname == '/browse/product.do' ) {
            var olapicTrackUrl = "http://data.photorank.me/track/widget/";
            olapicTrackUrl += Olapic.TRACK_PDP_ID; 
            olapicTrackUrl += "/stream/";
            olapicTrackUrl += '1';
            olapicTrackUrl += "/media/";
            olapicTrackUrl += opi;
            olapicTrackUrl += "/shop?analytics_id=";
            olapicTrackUrl += Olapic.RSTRING;
            olapicTrackUrl += "&pics=";
            olapicTrackUrl += '1'; //Olapic.mediaList.length;
            olapicTrackUrl += "&redirect_url=";
            olapicTrackUrl += encodeURIComponent(location.host);
            olapicTrackUrl += encodeURIComponent(productUrls[indexTaggedProduct]);
            olapicTrackUrl += "&auth_token=" + Olapic.API_KEY;
            
          } else if  ( window.location.href.indexOf('/browse/info.do?cid=1043398') > -1 )  { // gallery 
            var olapicTrackUrl = "http://analytics.photorank.me/track/widget/";
            olapicTrackUrl += olapicWidgetInstance; //Gallery Widget instance
            olapicTrackUrl += "/stream/";
            olapicTrackUrl += '1';
            olapicTrackUrl += "/media/";
            olapicTrackUrl += opi;
            olapicTrackUrl += "/shop?analytics_id=";
            olapicTrackUrl += Olapic.RSTRING;
            olapicTrackUrl += "&pics=";
            olapicTrackUrl += '1'; //Olapic.mediaList.length;
            olapicTrackUrl += "&redirect_url=";
            olapicTrackUrl += encodeURIComponent(location.host);
            olapicTrackUrl += encodeURIComponent(productUrls[indexTaggedProduct]);
            olapicTrackUrl += "&auth_token=" + Olapic.API_KEY;
            
          }	else if( location.pathname == '/browse/home.do' || location.pathname == '/' ) { //hp
            var olapicTrackUrl = "http://analytics.photorank.me/track/widget/";
            olapicTrackUrl += olapicWidgetInstance;  //HP Widget instance
            olapicTrackUrl += "/stream/";
            olapicTrackUrl += '1';
            olapicTrackUrl += "/media/";
            olapicTrackUrl += opi;
            olapicTrackUrl += "/shop?analytics_id=";
            olapicTrackUrl += Olapic.RSTRING;
            olapicTrackUrl += "&pics=";
            olapicTrackUrl += '1'; //Olapic.mediaList.length;
            olapicTrackUrl += "&redirect_url=";
            olapicTrackUrl += encodeURIComponent(location.host);
            olapicTrackUrl += encodeURIComponent(productUrls[indexTaggedProduct]);
            olapicTrackUrl += "&auth_token=" + Olapic.API_KEY;
          } else  { 
            var olapicTrackUrl = "http://analytics.photorank.me/track/widget/";
            olapicTrackUrl += Olapic.TRACK_PDP_ID; 
            olapicTrackUrl += "/stream/";
            olapicTrackUrl += '1';
            olapicTrackUrl += "/media/";
            olapicTrackUrl += opi;
            olapicTrackUrl += "/shop?analytics_id=";
            olapicTrackUrl += Olapic.RSTRING;
            olapicTrackUrl += "&pics=";
            olapicTrackUrl += '1'; //Olapic.mediaList.length;
            olapicTrackUrl += "&redirect_url=";
            olapicTrackUrl += encodeURIComponent(location.host);
            olapicTrackUrl += encodeURIComponent(productUrls[indexTaggedProduct]);
            olapicTrackUrl += "&auth_token=" + Olapic.API_KEY;
          }

          if (jsonObjectArray.length >= 3) {
            jQuery(".o-product-url img:eq(" + indexTaggedProduct + ")").attr( { 
              src: productImages[indexTaggedProduct]
              //width:"30%"
            } );
            jQuery(".o-product-name").css( {
              width:"150px",
              float: "left",
              textAlign: "center",

            } );
            jQuery(".slick-list").css( {
              width:"83%"
              
            } );
            jQuery("#popup-right-col-scroller").css( {
              width:"97%"
              
            } );
            //console.info('more than 3');
          } else if (jsonObjectArray.length == 2)  {
            jQuery(".o-product-url img:eq(" + indexTaggedProduct + ")").attr( { 
              src: productImages[indexTaggedProduct]
              //width:"40%"
            } );
            jQuery(".o-product-name").css( {
              //width:"40%",
              textAlign: "center",
              padding: "0 25px"
            } );            
            //console.info('2 products');        
          } else if (jsonObjectArray.length == 1)  {
            jQuery(".o-product-url img:eq(" + indexTaggedProduct + ")").attr( "src", productImages[indexTaggedProduct] );
            jQuery(".o-product-name").css( {
              textAlign: "center"
            } );
            //console.info('1 product'); 
          }

          jQuery(".o-product-url:eq(" + indexTaggedProduct + ")").attr("href", olapicTrackUrl);
          jQuery(".o-product-name:eq(" + indexTaggedProduct + ")").html(productNames[indexTaggedProduct].split('|')[0]);


        }

      })

    }).done(function() {
      
      if (slickTrigger == 3) {
        //initSlickScroller();

        //check for previous instance of slick and kill it.
        if ( typeof slick == "undefined" ) {
          //console.info('new slick'); 
          if (prevslickTrigger == slickTrigger) {
            
           jQuery("#popup-right-col-scroller").slick("unslick"); 
          }
          setTimeout(initSlickScroller, 800);
        } else {            
          jQuery("#popup-right-col-scroller").slick("unslick"); 
          setTimeout(initSlickScroller, 800);
        }

        //add slick 
        //setTimeout(initSlickScroller, 500);
      } else {
        
        if ( typeof slick != "undefined" ) {
          //console.info('unslick');
          jQuery("#popup-right-col-scroller").slick("unslick"); 
        } else {
          unslickToggle = 1;
        }

        if ( unslickToggle == 1 ) { jQuery("#popup-right-col-scroller").slick("unslick"); }

        if (twoProducts == 1) {
          jQuery(".taggedProduct:gt(1)").remove();
        } else {
          jQuery(".taggedProduct:not(:eq(0))").remove();
        }
      } 
    }).fail(function() {
      //NO TAGGED PRODUCTS
        //out of stock message 
  		jQuery('#popup-right-col-scroller').hide();
  		jQuery('.noProductsMsg').show();
      clearTaggedProducts();
    });
}

function showNextPrevUgcStream(opi, streamId) {
  var streamId;
  var ugcPhotoId = opi;
  var ugcPhotoStreamList = [];

  if ( jQuery(window.gpOlapic).length > 0 ) { // homepage media list
    //console.info('lightbox gallery/hp');

    ugcPhotoStreamList = gpOlapic.mediaList;
    var ugcProductPhotoStreamArray = new Array();

    for (var i=0; i < ugcPhotoStreamList.length; i++) {
      ugcProductPhotoStreamArray.push( parseInt(ugcPhotoStreamList[i].id) );
    }
    var ucgPhotoIdIndex = ugcProductPhotoStreamArray.indexOf(ugcPhotoId);
    var ugcPhotoFirstId = ugcPhotoStreamList[0].id;
    var ugcPhotoLastId = ugcPhotoStreamList[ugcProductPhotoStreamArray.length - 1].id;
    var ucgPhotoIdPrevIndex = ( ucgPhotoIdIndex - 1 );
    if (ucgPhotoIdPrevIndex == '-1') {
      var ucgPhotoIdPrev = parseInt(ugcPhotoLastId);
    } else {
      var ucgPhotoIdPrev = parseInt(ugcPhotoStreamList[ucgPhotoIdPrevIndex].id);
    }
    var ucgPhotoIdNextIndex = ( ucgPhotoIdIndex + 1 );
    if (ucgPhotoIdNextIndex == (ugcProductPhotoStreamArray.length)) {
      var ucgPhotoIdNext = parseInt(ugcPhotoFirstId);
    } else {
      var ucgPhotoIdNext = parseInt(ugcPhotoStreamList[ucgPhotoIdNextIndex].id);
    }

    if ( ugcPhotoStreamList.length < 2 ) {
      jQuery(".o-ugc-prev-image").css("visibility", "hidden");
      jQuery(".o-ugc-next-image").css("visibility", "hidden");
    } else {
      jQuery(".br-photostream-prev").attr("href", "javascript:showShopSocialPopUp("+ucgPhotoIdPrev+", false);");
      jQuery(".br-photostream-next").attr("href", "javascript:showShopSocialPopUp("+ucgPhotoIdNext+", false)");
    }
    
    return;

  } else if (location.pathname == '/browse/product.do')  {
    //console.info('lightbox product page');

    var productPgTid = ""; //Tid = Tagged ID
    productPgTid = getParameterByName('pid');
    var productPgTidParentTid = productPgTid.substring(0,6);

    Olapic.getStreamsByTag(productPgTidParentTid).done(function(response) {

      var streamId = "";
      streamId = response.data.id;

      //console.info('PP stream id is: ' + streamId);

      Olapic.getStreamMediaRecent(streamId).done(function(response) {

        var opi = response.data._embedded.media[0].id;

        var ugcPhotoStreamList = response.data._embedded.media;;
        var ugcProductPhotoStreamArray = new Array();
        for (var i=0; i < ugcPhotoStreamList.length; i++) {
          ugcProductPhotoStreamArray.push( parseInt(ugcPhotoStreamList[i].id) );
        }
        var ucgPhotoIdIndex = ugcProductPhotoStreamArray.indexOf(ugcPhotoId);
        var ugcPhotoFirstId = ugcPhotoStreamList[0].id;
        var ugcPhotoLastId = ugcPhotoStreamList[ugcProductPhotoStreamArray.length - 1].id;

        var ucgPhotoIdPrevIndex = ( ucgPhotoIdIndex - 1 );
        
        if (ucgPhotoIdPrevIndex == '-1') {
          var ucgPhotoIdPrev = parseInt(ugcPhotoLastId);
        } else {
          var ucgPhotoIdPrev = parseInt(ugcPhotoStreamList[ucgPhotoIdPrevIndex].id);
        }
        
        var ucgPhotoIdNextIndex = ( ucgPhotoIdIndex + 1 );
        if (ucgPhotoIdNextIndex == (ugcProductPhotoStreamArray.length)) {
          var ucgPhotoIdNext = parseInt(ugcPhotoFirstId);
        } else {
          var ucgPhotoIdNext = parseInt(ugcPhotoStreamList[ucgPhotoIdNextIndex].id);
        }
        
        //console.info('product stream list: ' +ugcPhotoStreamList.length);
        if ( ugcPhotoStreamList.length < 2 ) {
          jQuery(".o-ugc-prev-image").css("visibility", "hidden");
          jQuery(".o-ugc-next-image").css("visibility", "hidden");
        } else {
          jQuery(".br-photostream-prev").attr("href", "javascript:showShopSocialPopUp("+ucgPhotoIdPrev+", true, "+streamId+");");
          jQuery(".br-photostream-next").attr("href", "javascript:showShopSocialPopUp("+ucgPhotoIdNext+", true, "+streamId+");");
        }

      });

      return;

    });

  } else {
      jQuery(".o-ugc-prev-image").css("visibility", "hidden");
      jQuery(".o-ugc-next-image").css("visibility", "hidden");
  }
}


function clearTaggedProducts() {

  jQuery(".taggedProduct:not(:eq(0))").remove();
  jQuery(".o-product-url img:eq(0)").attr( { 
    src: "/assets/common/clear.gif",
    width: ""
  } );
  jQuery(".o-product-url:eq(0)").attr("href", "javascript:void(0)");
  jQuery(".o-product-name:eq(0)").html("");
  jQuery(".o-product-price:eq(0)").html("");

  jQuery("#popup-left-col .o-related-feeds ul li:not(:eq(0))").remove();
  jQuery("#popup-left-col .o-related-feeds ul li:eq(0)").html("");
  
}

function resetTaggedProductDiv() {
  jQuery('#popup-right-col-scroller').append('<div class="taggedProduct"><a href="" onclick="" class="o-product-url"><img src="/assets/common/clear.gif" /></a><br /><div class="o-product-name"></div></div>');
}

function resetPopupRightColScroller() {
  jQuery('#popup-right-col-scroller').empty();
  resetTaggedProductDiv();
}

function closeShopSocialPopUp() {
  jQuery("#shop-social-popup").fadeOut("fast");
  var mediaId = jQuery("#shop-social-popup").attr("data-media-id");
  jQuery('.blackOutOlapic').fadeOut('slow');
  jQuery('.popupAlignCenterOlapic').html("");
  Olapic.trackBestClose(mediaId).done(function(response) { });
}

function showGPUploader() {

     gap.UniversalModal.publishModal({
        modalSize: 'max',
        actionSheet: 'large',
        url: 'https://www.photorank.me/uploader/gap?lang=en_US' 
      }); 
  
  //evar tracking
  if( ( location.pathname == '/' || location.pathname == '/browse/home.do' ) ) {
      Â s.linkTrackVars = 'eVar6';
Â  Â  Â   s.eVar6 = 'HP_Olapic_upload'; 
Â  Â  Â   s.tl(this, 'o', s.eVar6);
  } else if ( location.pathname == '/browse/product.do' ) {
       s.linkTrackVars = 'eVar6';
Â  Â  Â   s.eVar6 = 'Product_Olapic_upload'; 
Â  Â  Â   s.tl(this, 'o', s.eVar6);
  }
  else {
       s.linkTrackVars = 'eVar6';
Â  Â  Â   s.eVar6 = 'Gallery_Olapic_upload'; 
Â  Â  Â   s.tl(this, 'o', s.eVar6);
  }
}

 function showUploaderPopUp() {
  //jQuery("#uploader-popup").fadeIn("fast");
} 

function closeUploaderPopUp() {
  //jQuery("#uploader-popup").fadeOut("fast");
}


// OPEN LIGHTBOX FOR NON-ASSOCIATED PRODUCT (Not associated to a stream) - OPENS THE PRODUCT ON THE LANDING PAGE: /browse/info.do?cid=1036970
function checkForOpiInQueryString() {
  if ( window.location.search.indexOf("opi=") != -1 ) {
    var opi = "";
    opi = getParameterByName("opi");
    showShopSocialPopUp(opi, false);
  }
}

jQuery( window ).load(function() {
  setTimeout(checkForOpiInQueryString, 1000);
});

</script>






</div>
<!-- END Content Item File: /content/0012/371/837/cn12371837.html -->
</div>    
	<div id="brandftr4_10000510" class="ftr-section ftr-section-4 clearfix"><!-- BEGIN Content Item File: /content/0012/373/422/cn12373422.html -->
<div id="contentItemContainer10000510" class="12373422" >

<script src="/Asset_Archive/GPWeb/content/promo_drawer/promo_drawer.js"></script>
<link rel="stylesheet" type="text/css" href="/Asset_Archive/GPWeb/content/promo_drawer/promo_drawer.css">


<script type="text/javascript">

//PERSONALIZATION 10/11/16
personalizationService.api.onPersonalization(function(event) {
    // console.log("Personalization data has been broadcast");
 
    //EMAIL SUBSCRIBERS 
    var emailStatusAttributeWeCareAbout = "EMAILUS";
    var emailStatus = event[emailStatusAttributeWeCareAbout];
    var isGPSubsriber = false;
 
 
    if (emailStatus) {
        // console.info("You have attribute value " + emailStatus);
        personalizationService.api.personalizationDone([emailStatus, {}]);

        var PASseparated = emailStatus.split("|");

        jQuery.each(PASseparated, function(index, value) {
            if (value.indexOf("GP") >= 0){
              //email
              isGPSubsriber = true;  
            } else {
              //non email           
            }
        });

          if((emailStatus == "") || (!isGPSubsriber)){
            if (jQuery(window).width()<768) {
				jQuery(document).on('promoDrawerReadyForInit',function() {
					insertPromoDrawer("/Asset_Archive/GPWeb/content/0012/373/422/101116_USvDTS.json");
				});
			}
          }  else {
            //show email subscribers
            if (jQuery(window).width()<768) {
				jQuery(document).on('promoDrawerReadyForInit',function() {
					insertPromoDrawer("/Asset_Archive/GPWeb/content/0012/373/422/101116_USvEmail.json");
				});
			}
          }
           
    }else {
      // console.info("You have value emailStatus" + emailStatus);  
      //show default
        if (jQuery(window).width()<768) {
			jQuery(document).on('promoDrawerReadyForInit',function() {
				insertPromoDrawer("/Asset_Archive/GPWeb/content/0012/373/422/101116_USvDTS.json");
			});
		}
    }

});

</script>


</div>
<!-- END Content Item File: /content/0012/373/422/cn12373422.html -->
</div>
	<div id="brandftr5_10000511" class="ftr-section ftr-section-5 clearfix"></div>
	<div id="textFooterLinks1_10000515" class="ftr-section ftr-section-6 clearfix"><!-- BEGIN Content Item File: /content/0012/365/178/cn12365178.html -->
<div id="contentItemContainer10000515" class="12365178" >

<!-- CIID:11933635 Gap US - Footer Primary -->

<style>

/* BEGIN OVERRIDE gap.css */
.mobile-footer-links .accordion {
	margin: 0;
}
.onesite .mobile-footer-links h2,
.mobile-footer-links h2 {
	font-size: 13.5px;
	line-height: 1;
	font-weight: 700;
	margin: 0;	/* added resilience */
}
/* END OVERRIDE gap.css */

/* General Footer Styles */
.footer-container-wrapper section {
	float: left;
	clear: both;
	width: 100%;
}
.footer-container-wrapper .legal .body-a {
	font-size: .75em;
}
.footer-container-wrapper .legal a {
	text-decoration: underline;
}

/* Three Item Section (w/ Color Background) */
.footer-container-wrapper .trio-container {
	padding-top: 1.5em;
	padding-bottom: 2.5em;
}
.footer-container-wrapper .trio-container .trio-piece {
	border-width: 0;
	border-style: solid;
	text-align: center;
}
.footer-container-wrapper .trio-container .trio-piece:not(:last-child) {
	padding-bottom: 2em;
	border-bottom-width: 1px;
	margin-bottom: 1.5em;
}
.footer-container-wrapper .trio-piece .heading-b {
	font-size: 1.25em;
	margin-top: 1em;	/* line the SMS one up nicely with the GapASAP image, then the others vertically align with that text */
}
.footer-container-wrapper .trio-piece .body-a {
	max-width: 330px;
	margin-left: auto;
	margin-right: auto;
}
.footer-container-wrapper .trio-piece .label-container {
	box-sizing: border-box;
	padding: 5px 0;
	margin-bottom: .5em;
}
.footer-container-wrapper .trio-piece input {
	box-sizing: border-box;
	max-width: 100%;
	padding: .25em;
	background-color: transparent;
	border-style: solid;
	border-width: 0 0 1px 0;
	font-size: .75em;
	line-height: 1;
}
.footer-container-wrapper .trio-piece .button_secondary {
	width: auto;
}

/* Email Signup */
.footer-container-wrapper .trio-email-signup input {
	width: 240px;
}
.footer-container-wrapper .trio-email-signup .button_secondary {
	margin: 0 auto;
}

/* SMS Signup */
.footer-container-wrapper .trio-sms-signup .header-container {
	display: inline-block;
	margin: 0 auto .5em;
}
.footer-container-wrapper .trio-sms-signup .sms-signup-widget form {
	display: inline-block;
	margin: 0 auto;
}
.footer-container-wrapper .trio-sms-signup .label-container {
	margin-right: 20px;
}
.footer-container-wrapper .trio-sms-signup .sms-signup-widget input {
	width: 110px;
	letter-spacing: .1em;
	text-align: center;
	padding: 6px 3px;
}
.footer-container-wrapper .trio-sms-signup .body-a.error-text:not(:empty) {
	font-weight: bold;
	color: #c00;
	margin-top: .5em;
}
.footer-social-media-container {
	max-width: 350px;
	margin-left: auto;
	margin-right: auto;
}

/* Mobile Footer */
.mobile-footer-links .footer-line {
	border-top: solid 2px #eee;
}
.mobile-footer-links a,
.mobile-footer-links button {
	display: block;
	box-sizing: border-box;
	width: 100%;
	padding: .65em 1em .5em;	/* top padding slightly higher to visually vertically center all-caps text */
	text-decoration: none;
}
.mobile-footer-links button {
	padding-left: 13px; /* compensate for the pseudo-elements widths so that the text lines up with non-accordion items */
	padding-right: 28px;	/* prevent overlap of +/- symbols */
}
.mobile-footer-links .accordion--content a {
	border-top: 1px solid #eee;
	padding-left: 1.5em;
}
.mobile-footer-links h2.body-a {
	color: #333;
	text-transform: uppercase;
}
.mobile-footer-links .accordion--content h2.body-a {
	font-weight: normal;
	text-transform: none;
}

/* Desktop Footer */
.desktop-footer-links {
	padding-top: 2em;
	padding-bottom: 1.5em;
	text-align: center;
}
.desktop-footer-links .heading-b {
	font-size: 1.25em;
	font-weight: bold;
	color: #000;
	margin-bottom: .75em;
}
.desktop-footer-links img {
	margin-bottom: .75em;
}
.desktop-footer-links li {
	padding: .5em 0;
}
.ftr-col-findastore .button-container{
	max-width: 300px;
	margin: 0 auto;
}


.ftr-col-findastore img {
	width: 100%;
	max-width: 300px;
}


/* Copyright and Small Text Links */
.footer-copyright-section {
	box-sizing: border-box;
	padding: 1.5em 1em;
/*	background-color: #000d42;	/* Standard Dark Blue */
	background-color: #000;
	text-align: center;
}
.footer-copyright-section,
.footer-copyright-section a,
.footer-copyright-section .body-a {
	color: #fff;
}
.footer-copyright-section .body-a {
	font-size: .75em;
}
.footer-copyright-section a:hover {
	text-decoration: underline;
}

/*	BLACK COLOR BACKGROUND & LIGHT COLOR FOREGROUND */
/*	If you need to alter colors, here is where to do it.
		You can even comment out this entire section for standard white background and default foreground colors, but you'd need to replace the gapASAP and social media images, since they assume a dark background.
		- CF */
.footer-container-wrapper .trio-container {
	background-color: #000;
}
.footer-container-wrapper .trio-container,
.footer-container-wrapper .trio-container a,
.footer-container-wrapper .trio-container .label-a,
.footer-container-wrapper .trio-container .heading-b,
.footer-container-wrapper .trio-container .body-a {
	color: #fff;
}
.footer-container-wrapper .trio-container input::-webkit-input-placeholder,
.footer-container-wrapper .trio-container input::-moz-placeholder {
	color: #999;
}
.footer-container-wrapper .trio-container .trio-sms-signup input::-webkit-input-placeholder,
.footer-container-wrapper .trio-container .trio-sms-signup input::-moz-placeholder {
	color: #666;
}
.footer-container-wrapper .trio-container .trio-piece input,
.footer-container-wrapper .trio-container .button_secondary--white {
	color: #fff;
	border-color: #fff;
}
.footer-container-wrapper .trio-container .trio-piece {
	border-color: #fff;
}

/* Breakpoint: XL */
@media only screen and (min-width:1024px) {
	.footer-container-wrapper .trio-container .trio-piece:not(:last-child) {
		padding-bottom: 0;
		border-bottom-width: 0;
		margin-bottom: 0;
	}
	.footer-container-wrapper .trio-container .trio-piece:first-child {
		border-right-width: 1px;
	}
	.footer-container-wrapper .trio-container .trio-piece:nth-child(2) {
		padding-left: 1em;
		padding-right: 1em;
	}
	.footer-container-wrapper .trio-container .trio-piece:last-child {
		border-left-width: 1px;
	}
	.footer-copyright-section {
		background-color: transparent;
	}
	.footer-copyright-section,
	.footer-copyright-section a,
	.footer-copyright-section .body-a {
		color: inherit;
	}
}
</style>

<div class="footer-container-wrapper clearfix">

	<section class="trio-container pd_horizontal">
		<div class="grid-root sitewidth-max">

			<div class="trio-email-signup trio-piece g-1-1 g-xl-1-3">
				<h3 class="heading-b sp">Sign up for email &amp; get 25% off<span class="asterisk">*</span></h3>
				<form id="joinEmail_gap-ftr" name="joinEmail_gap-ftr" action="https://secure-www.gap.com/profile/updateEmailPreferences.do" onsubmit="return validateFormGapFooter(this)" method="post">
					<input type="HIDDEN" name="brand_country_code" value="GPUS" />
					<input type="HIDDEN" name="lang_pref" value="US_EN" />
					<input type="HIDDEN" name="targetURL" value="/profile/info.do?cid=53959&mlink=5058,8095009,cs_footer_email_signup&clink=8095009" />
					<input type="HIDDEN" id="src_genGapFooter" name="src_gnrc_cd" value="WEBSITE EMAIL SIGNUP" />
					<input type="HIDDEN" id="src_specGapFooter" name="src_spfc_cd" value="GP=Site_Footer;BR=NA;ON=NA;PL=NA;AT=NA;BRFS=NA;GPO=NA" />
					<input type="submit" id="fakeSubmit" value="submit" class="hide" />
					<label for="email-ftr" class="label-container">
						<div class="label-a visually-hidden">Email Address</div>
						<input id="email-ftr" name="email" maxlength="100" onfocus="setDefaultGapFooter(this);" onblur="clearDefaultGapFooter(this);" placeholder="Email, please" type="email" />
					</label>
					<label for="confirm_email-ftr" class="label-container">
						<div class="label-a visually-hidden">Confirm Email</div>
						<input id="confirm_email-ftr" name="confirm_email" maxlength="100" onfocus="setDefaultGapFooter(this);" onblur="clearDefaultGapFooter(this);" autocomplete="off" placeholder="Confirm your email" type="email" />
					</label>
					<div class="button-container sp sp_top">
						<button type="submit" class="button_secondary button_secondary--white" onclick="footer_evarTrackIt('cs_footer_email_signup');">Sign Up Now</button>
					</div>
					<div class="offer-text legal">
						<p class="body-a"><span class="asterisk">*</span>Valid for first-time registrants only &amp; applies to <span class="nowrap">reg. price items only.</span> <a onclick="return contentItemLink(this,'','CS_Footer_PrivacyPolicy');" href="/customerService/info.do?cid=2331" class="underlined">Privacy Policy</a></p>
					</div>
				</form>
			</div><!-- /.trio-email-signup -->

			<div class="trio-social-icons trio-piece g-1-1 g-xl-1-3">
				<h3 class="heading-b sp">Stay Connected</h3>
				<div class="footer-social-media-container grid-root sp">
					<a title="Facebook" class="g-1-6" href="https://www.facebook.com/pages/Gap/14856729724" onclick="footer_evarTrackIt('cs_footer_facebook');" target="_blank">
						<img alt="Facebook" src="/Asset_Archive/GPWeb/content/0012/365/178/assets/social-white-facebook.png" />
					</a>
					<a title="Twitter" class="g-1-6" href="http://www.twitter.com/gap" onclick="footer_evarTrackIt('cs_footer_twitter');" target="_blank">
						<img alt="Twitter" src="/Asset_Archive/GPWeb/content/0012/365/178/assets/social-white-twitter.png" />
					</a>
					<a title="Pinterest" class="g-1-6" href="http://www.pinterest.com/Gap" onclick="footer_evarTrackIt('cs_footer_pinterest');" target="_blank">
						<img alt="Pinterest" src="/Asset_Archive/GPWeb/content/0012/365/178/assets/social-white-pinterest.png" />
					</a>
					<span title="Snapchat" class="g-1-6">
						<img alt="Snapchat" src="/Asset_Archive/GPWeb/content/0012/365/178/assets/social-white-snapchat.png" />
					</span>
					<a title="Instagram" class="g-1-6" href="http://instagram.com/gap" onclick="footer_evarTrackIt('cs_footer_instagram');" target="_blank">
						<img alt="Instagram" src="/Asset_Archive/GPWeb/content/0012/365/178/assets/social-white-instagram.png" />
					</a>
					<a title="Tumblr" class="g-1-6" href="http://gap.tumblr.com/" target="_blank" onclick="footer_evarTrackIt('cs_footer_tumblr');">
						<img alt="Tumblr" src="/Asset_Archive/GPWeb/content/0012/365/178/assets/social-white-tumblr.png" />
					</a>
				</div>
				<div class="body-a"><strong>#gaplove</strong></div>
			</div><!-- /.trio-social-icons -->

			<div class="trio-sms-signup trio-piece g-1-1 g-xl-1-3">
				<div class="header-container clearfix sp_lg">
					<div class="left heading-b">Let's text.</div>
					<img alt="GapASAP Logo" class="left" src="/Asset_Archive/GPWeb/content/0012/365/178/assets/gap-asap--white.png" />
				</div>
				<p class="body-a sp">Enter your mobile phone number and weâll make sure you <span class="nowrap">never miss a thing.<span class="asterisk2">**</span></span></p>
				<div class="sms-signup-widget sp_lg">
					<form class="clearfix" onsubmit="return false">
						<label for="mobileField-ftr" class="label-container left">
							<div class="label-a visually-hidden">Mobile Number</div>
							<input onkeydown="if (event.keyCode == 13) { sendMobileVibeInfo(); footer_evarTrackIt('cs_footer_sms_signup'); }" id="mobileField-ftr" name="mobileField-ftr" type="tel" maxlength="10" autocomplete="off" placeholder="XXX XXX XXXX" />
						</label>
						<div class="button-container left">
							<div class="button_secondary button_secondary--white" onclick="sendMobileVibeInfo(); footer_evarTrackIt('cs_footer_sms_signup');">Submit</div>
						</div>
					</form>
					<div id="showMsgDiv-ftr" class="body-a error-text"></div>
				</div>
				<div class="legal">
					<p class="body-a"><span class="asterisk2">**</span>GapASAP: Up to 2 automated marketing msg/wk at this number. <span class="nowrap">No purchase necessary.</span> <span class="nowrap">Msg &amp; data rates may apply.</span><br />
						<a onclick="footer_evarTrackIt('CS_Footer_SMS_Terms');" href="http://www.gap.com/text" target="_blank">www.gap.com/text</a></p>
				</div>
			</div><!-- /.trio-sms-signup -->

		</div>
	</section><!-- /.trio-container -->

	<section class="mobile-footer-links hide-at-xl">
		<div class="footer-line">
			<a href="/customerService/storeLocator.do">
				<h2 class="footer-item body-a">Store Locator</h2>
			</a>
		</div>
		<div class="footer-line">
			<a href="/customerService/info.do?cid=2136">
				<h2 class="footer-item body-a">Customer Service</h2>
			</a>
		</div>
		<div class="footer-line">
			<a href="/profile/order_history.do?isNav=true">
				<h2 class="footer-item body-a">Orders &amp; Returns</h2>
			</a>
		</div>
		<div class="footer-line">
			<a href="/customerService/info.do?cid=81265&cs=shipping_and_delivery" onclick="return contentItemLink(this,'','CS_Footer_Shipping');">
				<h2 class="footer-item body-a">Shipping</h2>
			</a>
		</div>
		<div class="accordion footer-line" data-bind="accordion: { animated: true }">
			<div class="accordion--group">
				<button class="accordion--trigger">
					<h2 class="footer-item-accordion body-a">Gift Cards</h2>
				</button>
				<div class="accordion--content">
					<a href="http://gap.cashstar.com/gift-card/buy/?ref=gap1">
						<h2 class="footer-item-content body-a">Buy eGift Cards</h2>
					</a>
					<a href="/browse/product.do?pid=000173">
						<h2 class="footer-item-content body-a">Buy Gift Cards</h2>
					</a>
				</div>
			</div>
		</div>
		<div class="footer-line">
			<a href="/profile/customer_value.do">
				<h2 class="footer-item body-a">Your Rewards &amp; Offers</h2>
			</a>
		</div>
		<div class="accordion footer-line" data-bind="accordion: { animated: true }">
			<div class="accordion--group">
				<button class="accordion--trigger">
					<h2 class="footer-item-accordion body-a">Gap Credit Card</h2>
				</button>
				<div class="accordion--content">
					<a href="https://www3.onlinecreditcenter6.com/consumergen2/login.do?subActionId=1000&clientId=gap&langId=en&accountType=plcc&cmpid=CR_MNG_ACT" target="_blank">
						<h2 class="footer-item-content body-a">Manage My Account</h2>
					</a>
					<a href="/profile/info.do?cid=1033021" onclick="return contentItemLink(this,'','CS_Footer_GapCard');">
						<h2 class="footer-item-content body-a">GapCard Benefits</h2>
					</a>
					<a href="https://eapply.gap.com/?cmpid=FTR_APL" target="_blank">
						<h2 class="footer-item-content body-a">Apply now</h2>
					</a>
				</div>
			</div>
		</div>
		<div class="footer-line">
			<a href="https://secure-www.gap.com/profile/info.do?cid=98143" onclick="return contentItemLink(this,'','cs_footer_email_signup');">
				<h2 class="footer-item body-a">Email Sign Up</h2>
			</a>
		</div>
		<div class="accordion footer-line" data-bind="accordion: { animated: true }">
			<div class="accordion--group">
				<button class="accordion--trigger">
					<h2 class="footer-item-accordion body-a">Shop Our Other Brands</h2>
				</button>
				<div class="accordion--content">
					<a href="http://www.oldnavy.com/">
						<h2 class="footer-item-content body-a">Old Navy</h2>
					</a>
					<a href="http://www.bananarepublic.com/">
						<h2 class="footer-item-content body-a">Banana Republic</h2>
					</a>
					<a href="http://www.athleta.com/">
						<h2 class="footer-item-content body-a">Athleta</h2>
					</a>
				</div>
			</div>
		</div>
	</section><!-- /.mobile-footer-links -->

	<section class="desktop-footer-links show-at-xl">
		<div class="grid-root sitewidth-max">

			<div class="ftr-col-customer-service ftr-desktop-column g-1-3 pd_horizontal">
				<h4 class="heading-b"><a href="/customerService/info.do?cid=2136" onclick="return contentItemLink(this,'','CS_Footer_CustomerService');">Customer Support</a></h4>
				<ul>
					<li class="body-a">1.800.GAPSTYLE (1.800.427.7895)</li>
					<li class="body-a"><a href="/customerService/info.do?cid=2136" onclick="return contentItemLink(this,'','CS_Footer_CustomerService');">Customer Service</a></li>
					<li class="body-a"><a href="/customerService/info.do?cid=81265&cs=shipping_and_delivery" onclick="return contentItemLink(this,'','CS_Footer_Shipping');">Shipping</a></li>
					<li class="body-a"><a href="/customerService/info.do?cid=81264" onclick="return contentItemLink(this,'','CS_Footer_Returns');">Returns</a></li>
					<li class="body-a"><a href="https://secure-www.gap.com/profile/order_status_gateway.do" onclick="footer_evarTrackIt('cs_footer_trackorder');">Track Your Order</a></li>
					<li class="body-a"><a href="/customerService/info.do?cid=2116" onclick="return contentItemLink(this,'','Footer_1_GC');">Giftcards</a></li>
					<li class="body-a"><a href="/browse/info.do?cid=96483" onclick="return contentItemLink(this,'','Footer_2_RIS');">Reserve in Store</a></li>
				</ul>

			</div><!-- /.ftr-desktop-column -->

			<div class="ftr-col-findastore ftr-desktop-column g-1-3 pd_horizontal">
				<h4 class="heading-b"><a href="/customerService/info.do?cid=2136" onclick="return contentItemLink(this,'','cs_footer_customerservice');">Find a Store</a></h4>
				<a href="/customerService/storeLocator.do" onclick="return contentItemLink(this,'','cs_footer_storelocator');">
					<img alt="Photo: Gap Storefront" src="/Asset_Archive/GPWeb/content/0012/365/178/assets/storefront-gap.jpg" /></a>
				<div class="button-container">
					<a href="/customerService/storeLocator.do" onclick="return contentItemLink(this,'','cs_footer_storelocator');">
						<button class="button_secondary" style="color: #000;border: #000 solid;">Store Locator</button>
					</a>
				</div>
			</div><!-- /.ftr-desktop-column -->

			<div class="ftr-col-gapcard ftr-desktop-column g-1-3 pd_horizontal">
				<h4 class="heading-b"><a href="/profile/info.do?cid=1033021" onclick="return contentItemLink(this,'','cs_footer_gapcard');">GapCard</a></h4>
				<a href="/profile/info.do?cid=1033021" onclick="return contentItemLink(this,'','cs_footer_gapcard');"><img alt="Gap Cards" src="/Asset_Archive/GPWeb/content/0012/365/178/assets/gapcards-4x-blue-silver.png" /></a>
				<ul>
					<li class="body-a"><a href="https://eapply.gap.com/?cmpid=FTR_APL" onclick="footer_evarTrackIt('cs_footer_gapcard_apply');" target="_blank">Apply Now</a></li>
					<li class="body-a"><a href="https://www3.onlinecreditcenter6.com/consumergen2/login.do?subActionId=1000&clientId=gap&langId=en&accountType=plcc&cmpid=FTR_MNG_ACT" onclick="footer_evarTrackIt('cs_footer_gapcard_activate');" target="_blank">Activate Card</a></li>
					<li class="body-a"><a href="/profile/info.do?cid=1033021" onclick="return contentItemLink(this,'','cs_footer_gapcard_reviewbenefits');">Review Card Benefits</a></li>
					<li class="body-a"><a href="https://www3.onlinecreditcenter6.com/consumergen2/login.do?subActionId=1000&clientId=gap&langId=en&accountType=plcc&cmpid=FTR_MNG_ACT" onclick="footer_evarTrackIt('cs_footer_gapcard_paybill');" target="_blank">Pay Bill</a></li>
				</ul>
			</div><!-- /.ftr-desktop-column -->

		</div>
	</section><!-- /.desktop-footer-links -->

	<section class="footer-copyright-section">
		<p class="body-a sp"><span class="nowrap">&copy; 1997 - <span class="currentYear"></span> Gap Inc.&nbsp;&nbsp;|</span>&nbsp; <!--
			--><a href="/customerService/info.do?cid=2331" onClick="return contentItemLink(this,'','CS_Footer_PrivacyPolicy');" class="nowrap">Privacy Policy</a>&nbsp;&nbsp;|&nbsp; <!--
			--><a href="http://www.gap.com/customerService/info.do?cid=2331&mlink=5058,8118674,CS_Footer_PrivacyPolicy&clink=8118674#interestAdvert" class="nowrap">Interest Based Ads</a>&nbsp;&nbsp;|&nbsp; <!--
			--><a href="/customerService/info.do?cid=2331&mlink=5058,5217025,CS_Footer_Returns_CA_Policy&clink=5217025#caliRights" class="nowrap">Your California Privacy Rights</a>&nbsp;&nbsp;|&nbsp; <!--
			--><a href="/customerService/info.do?cid=6754" onClick="return contentItemLink(this,'','CS_Footer_TermsOfUse');" class="nowrap">Terms of Use</a>&nbsp;&nbsp;|&nbsp; <!--
			--><a href="http://www.gapinc.com/content/gapinc/html/careers.html" target="_blank" class="nowrap">Careers</a>&nbsp;&nbsp;|&nbsp; <!--
			--><a href="http://www.gapincsustainability.com/" target="_blank" class="nowrap">Social Responsibility</a>&nbsp;&nbsp;|&nbsp; <!--
			--><a href="http://www.gapinc.com/content/gapinc/html/aboutus.html" target="_blank" class="nowrap">About Gap Inc.</a><!--
		--></p>
		<p class="body-a"><a href="/customerService/info.do?cid=1005563">Americans with Disabilities Act</a></p>
	</section><!-- /.footer-copyright-section -->

</div><!-- /.footer-container-wrapper -->


<script type="text/javascript">

// SMS Signup Validation
function sendMobileVibeInfo(){
	//Grab Phone Number
	var grabPhoneNumber = jQuery("#mobileField-ftr").val();
	
	//Grab Customer ID
	if (personalizationService.model.personalizationData.personalizationInfoV1.userContext.isAnonymousUser == "true" ){
		var grabShopperID = "UN:" + personalizationService.model.personalizationData.personalizationInfoV1.customerUUID
	} else {
		var grabShopperID = "CS:" + personalizationService.model.personalizationData.personalizationInfoV1.customerUUID
	}
	
	//Setting Params
	var params = {
	  "campaign_id" : "6nfzY7f1",
	  "acquisition_id" : "UqlwnQco",
	  "phoneNumber" : ""+ grabPhoneNumber +"",
	  "src_gnrc_sms" : "WEBSITE_SIGNUP", 
	  "src_spfc_sms" : "GPUS_FOOTERSIGNUP",
	  "shopper_id" : ""+ grabShopperID +""
	};
	
	jQuery.ajax({
		type: "POST",
		url: "/resources/campaigns/v1/smssignup",
		data: params,
		dataType: "json",
		statusCode: {
			200: function (response) {
//				jQuery('#showMsgDiv-ftr').text('HTTP 200 - Almost done! A text is on the way. Reply Y to confirm.');
				jQuery('#showMsgDiv-ftr').text('Almost done! A text is on the way. Reply Y to confirm.');
			},
			201: function (response) {
//				jQuery('#showMsgDiv-ftr').text('HTTP 201 - Almost done! A text is on the way. Reply Y to confirm.');
				jQuery('#showMsgDiv-ftr').text('Almost done! A text is on the way. Reply Y to confirm.');
			},
			400: function (response) {
//				jQuery('#showMsgDiv-ftr').text('HTTP 400 - Opps...something went wrong please try after some time.');
				jQuery('#showMsgDiv-ftr').text('Oops... Something went wrong. Please try again shortly.');
			},
			404: function (response) {
//				jQuery('#showMsgDiv-ftr').text('HTTP 404 - Opps...something went wrong please try after some time.');
				jQuery('#showMsgDiv-ftr').text('Oops... Something went wrong. Please try again shortly.');
			},
			409: function (response) {
//				jQuery('#showMsgDiv-ftr').text('HTTP 409 - Youâre already on the list! No need to register again.');
				jQuery('#showMsgDiv-ftr').text('Youâre already on the list! No need to register again.');
			},
			422: function (response) {
//				jQuery('#showMsgDiv-ftr').text('HTTP 422 - Oops! Invalid number. Please check your digits to confirm.(Do we need to add in something about it potentially being a landline though?)');
				jQuery('#showMsgDiv-ftr').text('Oops! Invalid number. Please check your entry to confirm this is a valid mobile number.');
			}

		},
		success: function () {
		},
		error : function() {
		}

	});
}

/* ??? */
var cantUSPSReturnOverride = {
	init: function() {
		jQuery(function($) {
			if(location.pathname == '/profile/returns_label_usps.do') {
				var $cantUSPSReturnElement = $('#cantUSPSReturn');
				if($cantUSPSReturnElement.length > 0) {
					var $cantUSPSReturnElementAnchor = $cantUSPSReturnElement.find('a');
					$cantUSPSReturnElementAnchor.attr('href', '/customerService/info.do?cid=81264&cs=items_bought_online');
				}
			}
		});
	}
}
jQuery(document).ready(cantUSPSReturnOverride.init);

/* Footer evar6 tracking */
function footer_evarTrackIt(myTid) {
	s.linkTrackVars = 'eVar6';
	s.eVar6 = myTid; //tid here
	s.tl(this, 'o', s.eVar6);
	//console.info(myTid);
}

/* GOL EMAIL REG CODE */
function setDefaultGapFooter(elem) {
	if(elem.value==elem.defaultValue)elem.value='';
	$(elem).removeClassName('validationWarning');
}
function clearDefaultGapFooter(elem) {
	if(elem.value=='')elem.value=elem.defaultValue;
}

function validateFormGapFooter() {
	// check form fields
	var form = $('joinEmail_gap-ftr');
	var sendForm = false;
	if (form.email) {
		var reg = /\b(^(\S+@).+((\.com)|(\.net)|(\.edu)|(\.mil)|(\.gov)|(\.org)|(\.aero)|(\.arpa)|(\.asia)|(\.biz)|(\.cat)|(\.coop)|(\.info)|(\.int)|(\.jobs)|(\.mobi)|(\.name)|(\.post)|(\.pro)|(\.tel)|(\.xxx)|(\..{2,2}))$)\b/gi;
		var email = form.email.value;
		var confirmEmail = form.confirm_email.value;
		
		function checkRequired() {
			var requiredFields = false;
			var warning = 'This field is required';
			if (form.email.value == form.email.defaultValue) {
				form.email.defaultValue = warning;
				form.email.value = warning;
				$(form).email.addClassName('validationWarning');
				requiredFields = false;
			} else {
				$(form).email.removeClassName('validationWarning');
				requiredFields = true;
			}
			if (form.confirm_email.value == form.confirm_email.defaultValue) {
				form.confirm_email.defaultValue = warning;
				form.confirm_email.value = warning;
				$(form).confirm_email.addClassName('validationWarning');
				requiredFields = false;
			} else if (requiredFields == false) {
				requiredFields = false;
			} else {
				$(form).confirm_email.removeClassName('validationWarning');
				requiredFields = true;
			}
			if (requiredFields == true) {
				sendForm = true;
				checkEmail();
			}
		}
		function checkEmail() {
			if (reg.test(email) == false) {
				var warning = 'Invalid Email Address';
				form.email.defaultValue = warning;
				form.email.value = warning;
				$(form).email.addClassName('validationWarning');
				sendForm = false;
			} else {
				$(form).email.removeClassName('validationWarning');
				sendForm = true;
				checkConfirmEmail();
			}
		}
		function checkConfirmEmail() {
			if (sendForm = true && email != confirmEmail) {
				var warning = 'Email Addresses Must Match';
				form.confirm_email.defaultValue = warning;
				form.confirm_email.value = warning;
				$(form).confirm_email.addClassName('validationWarning');
				sendForm = false;
			} else if (email == confirmEmail) {
				$(form).confirm_email.removeClassName('validationWarning');
				sendForm = true;
			}
		}
		checkRequired();
	}
	return sendForm;
}

</script>


</div>
<!-- END Content Item File: /content/0012/365/178/cn12365178.html -->
</div>
	<div id="textFooterLink2_10000516" class="ftr-section ftr-section-7 clearfix"><!-- BEGIN Content Item File: /content/0012/099/541/cn12099541.html -->
<div id="contentItemContainer10000516" class="12099541" >

<!-- CIID:12099541 Gap US - Outfit page OVERRIDE -->

<style>
.outfitPage #footer {
    display: block !important;
}
.outfitPage #footer #footer_BrandContainer, 
	.outfitPage #footer #footer_GID_marketing, 
		.outfitPage #footer #footer_TextLinkNavigation {
			width:100%;
		}
		
.outfitPage #mainContentContainer #mainContent #mainContentBottom {
	float:none; 
	width: 100%;
	padding-top: 0; 
}

/*begin CSS override for outfit insitu bag GAP*/
.insitu-bag li.sp_sm {
    width: 95%;
    margin-bottom: 5px !important;
}
/*end CSS override for outfit insitu bag GAP*/
</style>




</div>
<!-- END Content Item File: /content/0012/099/541/cn12099541.html -->
</div>
</div>

<script>

/* PULL CURRENT YEAR - Places the current year in any element classed .currentYear
	 - Rebuilt from prototype to jQuery 2016.06.07 CF */
jQuery(document).ready( function() {
	var currentYear = (new Date).getFullYear();
	jQuery('.currentYear').text(currentYear);
});

</script>
</div>
</div>

<!-- Future Story Place holder #209 & #210-->
<div id="footer_GID_marketing">
	<!-- @TemplateContentLayout(templateRegionName:"gid.common.siteWide.marketing.footers.region1") -->
<div id="GIDFooter_Region1" class="clearfix" style="width:100%">

	
	
	
	
	
	
	

</div>
</div>

<div id="footer_TextLinkNavigation">
	<div id="footer_brand_region2"></div>
</div>
<div id="footer_languageToggle">
	
</div>


<div id="footer_preferLocaleLanguageOptions">
	
</div>

	<style>
		#searchDexFooter {font-size:9px;}
		#searchDexFooter .expFooter {text-align:center;padding-top:10px;padding-bottom:10px;}
		#searchDexFooter .expFooter A:link{text-decoration:none}
		#searchDexFooter .expFooter A:visited{text-decoration:none}
		#searchDexFooter .expFooter A:active{text-decoration:none}
		#searchDexFooter .expFooter A:hover{text-decoration:none}
		#searchDexFooter .brandExp { padding-bottom:10px;}
		#searchDexFooter .linkContainer{display:none;}
		#searchDexFooter .plus {margin-left:-2px;cursor:pointer;cursor:hand;}
		#searchDexFooter .minus{display:none;margin-left:-2px;cursor:pointer;cursor:hand;font-size:10px;}		
	</style>
	
	<script type="text/javascript">
		var browseSearchDexFooters = {

	        linksets : null,
	        plusset : null,
	        minusset : null,
	       
	        init : function() {
				if($('linkContainers') != null){
					this.linksets = $('linkContainers').select('.linkContainer');
				}
				if($('searchDexFooterContainer') != null){
					$('searchDexFooter').style.display="block";
					this.plusset = $('searchDexFooterContainer').select('.plus');
					this.minusset = $('searchDexFooterContainer').select('.minus');
				}
	        },

	        expandLink: function(s){
	            var expand = this.linksets[s] ;
	            var lsp = this.plusset[s] ;
	            var lsm = this.minusset[s] ; 

	            this.shrinkLinks();

	            if(expand != null){
	                expand.style.display = 'inline';
	                expand.style.float = 'none';
	            }      
	            if(lsm != null){
	                lsm.style.display = 'inline';
	            }
	            if(lsp != null){
	                lsp.style.display = 'none';
	            }
	        },

	        shrinkLinks: function(){
		    if(this.plusset != null){
	                this.plusset.invoke("setStyle",{display:'inline'});
	            }
		    if(this.minusset != null){
	                this.minusset.invoke("setStyle",{display:'none'});
	            }
		    if(this.linksets != null){
	                this.linksets.invoke("setStyle",{display:'none'});
	            }
	        }
	           
		};
		Event.observe(window,"load", function() {
	 		browseSearchDexFooters.init();
		});
		
	</script>
	
	


<div id="footer_Region3">
	<div id="footer_brand_region3"></div>
</div>

	
	





	
		
	
	
			


	
			
			
	
	
	
	








	

	
	





	
		
	
	
			


	
			
			
	
	
	
	














		</div>
	</div>

	
	




	
		
	
	
			


	
			
			
	
	
	
	








	
		
		
			
		
	

	


<div class="cssHide">
	
	
	<script type="text/javascript" src="/gid/js/common/layouts/en/reporting/sCode-2016-8-30.js"></script>
	 <script type="text/javascript">
	   reportingService.controller.viewManagers.commonViewManager.model.contentItemIdListReport = "11709276,12372494,11709276,12399496,9894771,11991705,12387650,12402084,12376425,12376427,12227180,12376437,12376438,12118496,10694906,12371837,12373422,12365178,12099541,10966100";
	 </script>
	
	<noscript>
		
			<img src="http://gapnojavaproduction.112.2o7.net/b/ss/gapnojavaproduction?pageName=gp%3AcustomerService%3AHome&amp;g=http%3A%2F%2Fwww.gap.com%2FcustomerService%2FcookieFailure.do" alt="" />
		
	</noscript>
</div>	

	
 
 
	
	    




	
		
	
	
			


	
			
			
	
	
	
	









	
		
			<script type="text/javascript">
				document.write('<div id="noCookie" class="siteError nav-shiftee">');
				document.write('<p id="noCookieText" class="supportErrorText">');
				document.write('Please enable cookies in your browser to experience all the custom features of our site, including the ability to make a purchase. ');
				document.write('</p>');
				document.write('</div>');
			</script>
		
		
	
	<noscript>
		<div id="noScript" class="siteError nav-shiftee">
			<p id="noScriptText" class="supportErrorText">
				Please
				<a href="/customerService/info.do?cid=000000">enable JavaScript</a>
				in your browser to experience all the custom features of our site, including the ability to make a purchase.
			</p>
			
				<p id="noCookieText" class="supportErrorText">
					Please enable cookies in your browser to experience all the custom features of our site, including the ability to make a purchase.
				</p>
			
		</div>
	</noscript>
	 
	
	




	
		
	
	
			


	
			
			
	
	
	
	













  <div class="onesite">
    <!-- ko if: universalModal.isModalVisible -->
<div data-bind="with: universalModal">
  <div class="universal-modal--backdrop" data-bind="
      css: {
        'show-modal': isModalVisible
      },
      click: closeModal
    ">
    <div class="universal-modal" data-bind="
        stopBubble: true, css: {
          'show-modal': isModalVisible
        }
      ">
      <!-- ko if: !chromelessModal() -->
      <div class="modal--header" data-bind="css: { 'modal--header_no-background': !headerBackground() }">
        <span data-bind="text: templateData().title"></span>
        <button class="modal--close-button" data-bind="click: closeModal" aria-label="Close Modal" title="Close Modal">
          <span class="modal--close-icon icon-x" aria-hidden="true">
            <svg class="modal--close-icon--svg" viewBox="0 0 15 15">
              <g stroke-width="1">
                <line x1="4.25" y1="10.75" x2="10.75" y2="4.25" />
                <line x1="4.25" y1="4.25" x2="10.75" y2="10.75" />
              </g>
            </svg>
          </span>
        </button>
      </div>
      <!-- /ko -->
      <div data-bind="template: {name: templateName, data: templateData()}" class="modal--content"></div>
    </div>
    </div>
</div>
<!-- /ko -->
<script type="template/handlebars" id="modal-iframe-template">
  <iframe id="iframe" data-bind="attr: {src: url}"></iframe>
</script>
<script type="template/handlebars" id="modal-signin-template">
  <div class="signin" data-bind="with: contentViewModel">
  <p data-bind="text: titleText" class="signin--title">
  </p>

  <div class="signin--image"></div>

  <div class="signin--form" data-bind="validationOptions: { insertMessages: false, decorateInputElement: true, errorElementClass: 'form--input_error' }">
    <form data-bind="submit: doSignIn" novalidate>
      <div class="form--global-error-message pd_top_sm">
        <p data-bind="text: signinErrors"></p>
      </div>

      <div class="signin--input-wrapper">
        <p id="signinEmailAddressError" class="form--inline-error-message signin--inline-error-message" data-bind="validationMessage: emailAddress"></p>
        <input type="email" placeholder="Email address" name="emailAddress" data-bind="hasFocus: hasEmailFocus, value: emailAddress" class="form--text-input signin--input" />
      </div>

      <div class="signin--input-wrapper">
        <p id="signinPasswordError" class="form--inline-error-message signin--inline-error-message" data-bind="validationMessage: password"></p>
        <input type="password" placeholder="Password" name="password" aria-label="Input password" data-bind="value: password" class="form--text-input signin--input" />
      </div>

      <a class="signin--forgot-password link_default" href="/profile/forgot_password.do?locale=en_US">
        Forgot your password?
      </a>

      <button class="button_universal_primary_a" type="submit">
        Sign In
      </button>

      <div class="signin--signup">
        Donât have an account? <a class="link_default" href="/profile/sign_in.do">Sign up here</a>.
      </div>
    </form>
  </div>
</div>

</script>
<script type="template/handlebars" id="magic-link-confirmation-template">
  <div class="magic-link-confirmation" data-bind="with: contentViewModel">

  <div class="magic-link-confirmation--title">
    <span class="icon-check-mark-outer" data-bind="if: isAuthenticatedAndMagicLinkNotSent">
      <span class="icon-check-mark"></span>
    </span>
    <span class="magic-link-confirmation--title-text" data-bind="html: titleText">
    </span>
  </div>

  <div class="magic-link-confirmation--image" data-bind="ifnot: magicLinkSent">
    <div class="magic-link-confirmation--animation">

  <div class="magic-link-confirmation--animation-elements">
    <div class="magic-link-confirmation--animation-email"></div>
    <div class="magic-link-confirmation--animation-email-shadow">
      <img src="/static_content/images/magic-link/email-shadow.svg" />
    </div>

    <div class="magic-link-confirmation--animation-mobile"></div>
    <div class="magic-link-confirmation--animation-mobile-shadow">
      <img src="/static_content/images/magic-link/mobile-shadow.svg" />
    </div>

    <div class="magic-link-confirmation--animation-tablet"></div>
    <div class="magic-link-confirmation--animation-tablet-shadow">
      <img src="/static_content/images/magic-link/tablet-shadow.svg" />
    </div>

    <div class="magic-link-confirmation--animation-desktop"></div>
    <div class="magic-link-confirmation--animation-desktop-shadow">
      <img src="/static_content/images/magic-link/desktop-shadow.svg" />
    </div>
  </div>
  
  <div class="magic-link-confirmation--animation-fallback">
    <img src="/static_content/images/magic-link/magic-link-animation-fallback.png" />
  </div>

</div>

  </div>

  <div class="magic-link-confirmation--link-sent-image" data-bind="if: magicLinkSent">
    <div class="magic-link-confirmation--link-sent-animation animate"
     data-bind="css:{'favorites-override': !isShoppingBagPage() }">

  <div class="magic-link-confirmation--animation-elements">

    <div class="magic-link-confirmation--animation-email">
      <div class="magic-link-confirmation--circle">
        <img data-bind="visible: isShoppingBagPage" src="/static_content/images/magic-link/bag.svg" />
        <img data-bind="visible: !isShoppingBagPage()" src="/static_content/images/magic-link/heart.svg" />
      </div>
    </div>

    <div class="magic-link-confirmation--animation-mobile">
      <div class="magic-link-confirmation--circle">
        <img data-bind="visible: isShoppingBagPage" src="/static_content/images/magic-link/white-bag.svg" />
        <img data-bind="visible: !isShoppingBagPage()" src="/static_content/images/magic-link/white-heart.svg" />
      </div>
    </div>
    <div class="magic-link-confirmation--animation-mobile magic-link-confirmation--mobile-color">
      <div class="magic-link-confirmation--circle">
        <img data-bind="visible: isShoppingBagPage" src="/static_content/images/magic-link/white-bag.svg" />
        <img data-bind="visible: !isShoppingBagPage()" src="/static_content/images/magic-link/white-heart.svg" />
      </div>
    </div>

    <div class="magic-link-confirmation--animation-tablet">
      <div class="magic-link-confirmation--circle">
        <img data-bind="visible: isShoppingBagPage" src="/static_content/images/magic-link/white-bag.svg" />
        <img data-bind="visible: !isShoppingBagPage()" src="/static_content/images/magic-link/white-heart.svg" />
      </div>
    </div>
    <div class="magic-link-confirmation--animation-tablet magic-link-confirmation--tablet-color">
      <div class="magic-link-confirmation--circle">
        <img data-bind="visible: isShoppingBagPage" src="/static_content/images/magic-link/white-bag.svg" />
        <img data-bind="visible: !isShoppingBagPage()" src="/static_content/images/magic-link/white-heart.svg" />
      </div>
    </div>

    <div class="magic-link-confirmation--animation-desktop">
      <div class="magic-link-confirmation--circle">
        <img data-bind="visible: isShoppingBagPage" src="/static_content/images/magic-link/white-bag.svg" />
        <img data-bind="visible: !isShoppingBagPage()" src="/static_content/images/magic-link/white-heart.svg" />
      </div>
    </div>
    <div class="magic-link-confirmation--animation-desktop magic-link-confirmation--desktop-color">
      <div class="magic-link-confirmation--circle">
        <img data-bind="visible: isShoppingBagPage" src="/static_content/images/magic-link/white-bag.svg" />
        <img data-bind="visible: !isShoppingBagPage()" src="/static_content/images/magic-link/white-heart.svg" />
      </div>
    </div>
  </div>

  <div class="magic-link-confirmation--animation-fallback">
    <!-- ko ifnot: isShoppingBagPage -->
    <img src="/static_content/images/magic-link/confirmation-favorites-fallback.gif" />
    <!-- /ko -->
    <!-- ko if: isShoppingBagPage -->
    <img src="/static_content/images/magic-link/confirmation-bag-fallback.gif" />
    <!-- /ko -->
  </div>
</div>

  </div>

  <div class="magic-link-confirmation--text" data-bind="if: isAuthenticatedAndMagicLinkNotSent">
    <span data-bind="html: messageText"/>
  </div>

  <div data-bind="visible: hasError" class="magic-link-error--container">
    <span class="magic-link-error--text" data-bind="text: errorMessage"></span>
  </div>

  <button type="submit" id="magic_link_action"
    class="button_universal_primary_a"
    data-bind="text: buttonText, click: onMagicLinkButtonPress">
  </button>

</div>

</script>
<!-- ko if: featurama.enabled('facets') -->
  <script type="template/handlebars" id="ko-component-template">
    <div class="accordion accordion_facet" data-bind="accordion: { exclusive: true, showFirst: false }">
  <div class="modal--header accordion_facet--header">
    <div class="tabs--item-count cat-page--item-count cat-page--item-count--has-animation"
  data-bind="
    css: {
      'cat-page--item-count--zero': $root.productCategory.isItemCountZero()
    },
    visible: $root.productCategory.isItemCountInitialized()
  "
  style="display: none;">
  <span data-bind="text: $root.productCategory.k_totalItems()"></span>
  <span data-bind="visible: !$root.productCategory.multipleItems()" style="display: none;" aria-live="polite">
    item
  </span>
  <span data-bind="visible: $root.productCategory.multipleItems()" style="display: none;" aria-live="polite">
    items
  </span>
</div>

    <button class="modal--close-button" data-bind="click: $parent.closeModal" aria-label="Close Modal">
      <span class="modal--close-icon icon-x" aria-hidden="true">
        <svg class="modal--close-icon--svg" viewBox="0 0 15 15">
          <g stroke-width="1">
            <line x1="4.25" y1="10.75" x2="10.75" y2="4.25" />
            <line x1="4.25" y1="4.25" x2="10.75" y2="10.75" />
          </g>
        </svg>
      </span>
    </button>
  </div>
  <div class="accordion_facet--scrollable-content">
    <div class="accordion_facet--scrollable-area">
    <!-- ko if: gap.viewModel.facetManager.hasFacets() -->
      <!-- ko foreach: { data: gap.viewModel.facetManager.k_facets, as: 'facet' } -->
      <div class="accordion--group accordion_facet--group">
        <button class="accordion--trigger accordion_facet--trigger" data-bind="text: gap.viewModel.facetManager.facetsLabelReFormat(facet.label), noFocus: true"></button>
        <div class="accordion--content accordion_facet--content" data-bind="
          css: 'accordion_facet--' + facet.name,
          component: {
            name: facet.name,
            params: {
              type: 'accordion',
              viewModel: gap.viewModel[facet.viewModel]
            }
          }">
        </div>
      </div>
      <!-- /ko -->
      <div class="accordion_facet--selected" data-bind="css: {'has-tags': gap.viewModel.facetManager.hasTags()}">
          <!-- ko foreach: { data: gap.viewModel.facetManager.k_facets, as: 'facet' } -->
            <!-- ko
                  component: {
                    name: 'facet-tags',
                    params: {
                      facetModel: gap.viewModel[facet.viewModel]
                    }
                  }
                -->
            <!-- /ko -->
          <!-- /ko -->
      </div>
      <!-- /ko -->
    </div>
  </div>
  <div class="accordion_facet--actions">
    <button class="button_secondary accordion_facet--action-button clear-all-button"
            data-bind="
              css: {'has-tags': gap.viewModel.facetManager.hasTags()},
              click: gap.viewModel.facetManager.clearFacetSelections
            ">
      Clear All
    </button>
    <button class="button_primary accordion_facet--action-button" data-bind="click: $parent.closeModal">
      Done
    </button>
  </div>
</div>

  </script>
<!-- /ko -->
<!-- Surfacing the templates inside fis-ris-modal, to prevent nested script tags -->
<script type="template/handlebars" id="fist-modal-template">
  <div data-bind="with: baseViewModel">
    <div data-bind="visible: isFisActive()">
      <!-- ko component: {
        name: 'find-in-store',
        params: {
          k_selectedStore: k_selectedStore,
          k_postalCode: k_postalCode
        }
      }
      -->
      <!--/ko-->
    </div>
    <div data-bind="visible: isRisActive()" class="fis-ris-container">

      <div class="l--ris-selected">
        <div class="ris-selected">

  <div data-bind="
    component: {
      name: 'ris-selected-product',
      params:  gap.viewModel.findBoxManager
    }">
  </div>

  <div data-bind="
    component: {
      name: 'ris-selected-location',
      params: {
        store: k_selectedStore(),
        isReserveComplete: k_reserveComplete()
      }
    }">
  </div>

</div>

      </div>

      <div class="l--ris-main">
        <div class="sp_all">
          <!-- ko component: {
            name: 'reserve-in-store',
            params: {
              k_selectedStore: k_selectedStore,
              k_selectedSKU: gap.viewModel.findBoxManager.k_selectedSKU,
              k_reserveComplete: k_reserveComplete
            }
          }
          -->
          <!--/ko-->
        </div>
      </div>

      <div class="fis-ris--bottom-note fis-ris--bottom-note_with-border">
        <strong class="fis-ris--bottom-note--strong">Please Note:</strong>
        You can reserve five items daily. After we confirm an item is available,
        we hold it until the store closes the following day. Prices in store may
        differ from prices online.
      </div>

    </div>
  </div>
</script>
<script id="find-box-template" type="template/text">
  <div class="l--find-box">
    <div class="l--find-box--image">
      <div class="g-inner">
        <img data-bind="attr: { src: $component.viewModel.productImage().small }">
      </div>
    </div>
    <div class="l--find-box--name">
      <div class="g-inner">
        <div class="sp_sm">
          <div class="fis-ris--header">
            <h1 class="product-title fis-ris--header--title" data-bind="html: $component.viewModel.productName"></h1>
            <div class="fis-ris--header--id" data-bind="html: $component.productNumberDisplay"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="l--find-box--swatches">
      <div class="g-inner">
        <div class="find-box--swatches">
          <div data-bind="
            component: {
              name: 'color-selector-manager',
              params: {
                colors: $component.viewModel.colors,
                k_selectedColor: $component.viewModel.k_selectedColor,
                colorLabel: $component.viewModel.colorLabel
              }
            }">
          </div>
          <div class="sp_sm" data-bind="
            component: {
              name: 'size-selector-manager',
              params: {
                k_selectedSizeCombo: $component.viewModel.k_selectedSizeCombo,
                k_selectedColor: $component.viewModel.k_selectedColor,
                k_selectedSKU: $component.viewModel.k_selectedSKU,
                k_activeVariant: $component.viewModel.k_activeVariant
              }
            }">
          </div>
        </div>
      </div>
    </div>
  </div>
</script>

<script id="color-selector-template" type="template/text">
  <div class="label-wrapper">
    <span class="label"><span data-bind="text: colorLabel"></span>:</span>
    <span class="label-value" data-bind="text: $data.getSelectedColorName()"></span>
  </div>
  <div class="swatches swatches_color swatches_find-box">
    <ul class="swatches--list">
      <!-- ko foreach: $data.k_availableColors() -->
        <li class="swatches--item swatches--item_fixed-width">
          <label class="color-swatch--label swatch--fixed-width swatches_half-off--item" data-bind="{ click: $component.selectSwatch, noFocus: true }">
            <input class="swatches--radio" type="radio" name="color-radio" data-bind="
              value: colorName">
            <span class="swatches--swatch swatches--color">
              <span class="swatches--image_wrapper" data-bind="css: { 'swatches--underlined': $component.isSelectedColor($data)}">
                <img class="swatches--image" data-bind="attr: { src: swatchImage, alt: colorName }">
              </span>
            </span>
          </label>
        </li>
      <!-- /ko -->
    </ul>
  </div>
</script>

<script id="size-selector-template" type="template/text">
  <div class="label-wrapper">
    <span class="label" data-bind="css: {'label_error': !$data.k_selectedSizeCombo().sizeDimension1 }">
      <span data-bind="text: getSizeDim1Label()"></span>:
    </span>
    <span class="label-value" data-bind="text: $data.getSelectedSizeName()"></span>
  </div>
  <div class="swatches swatches_size swatches_find-box">
    <!-- ko foreach: $data.k_availableSizes() -->
    <label class="swatches--item swatches--item_find-box swatches--item_natural-width" role="radio" data-bind="{click: $component.selectSize, noFocus: true}">
      <input class="swatches--radio" type="radio" data-bind="{ value: $component.getSizeName($data), checked: $component.getSelectedSizeName(), attr: { 'name': 'size-radio' }}">
      <span class="swatches--swatch swatches--size">
        <span class="swatches--text" data-bind="text: sizeDimension1"></span>
      </span>
    </label>
    <!-- /ko -->
  </div>

  <!--ko if: hasSecondDimension -->
  <div class="label-wrapper">
    <span class="label" data-bind="css: {'label_error': !$data.k_selectedSizeCombo().sizeDimension2 }">
      <span data-bind="text: getSizeDim2Label()"></span>:
    </span>
    <span class="label-value" data-bind="text: $data.getSelectedSizeLengthName()"></span>
  </div>
  <div class="swatches swatches_size swatches_find-box">
    <!-- ko foreach: $data.k_availableSizeLengths() -->
    <label class="swatches--item swatches--item_find-box swatches--item_natural-width" role="radio" data-bind="{click: $component.selectSizeLength, noFocus: true}">
      <input class="swatches--radio" type="radio" data-bind="{ value: $component.getSizeLengthName($data), checked: $component.getSelectedSizeLengthName(), attr: { 'name': 'size-radio-length' }}">
      <span class="swatches--swatch swatches--size">
        <span class="swatches--text" data-bind="text: $component.getSizeLengthName($data)"></span>
      </span>
    </label>
    <!-- /ko -->
  </div>
  <!-- /ko -->
</script>


<script type="text/html" id="find-in-store-template">
  <div data-bind="
    component: {
      name: 'find-box',
      params: {
        viewModel: gap.viewModel.findBoxManager,
      }
    }"></div>

  <div id="store-card-manager" data-bind="
    component: { name: 'store-card-manager',
      params: {
        k_postalCode: k_postalCode
      }
    }
  ">
    <div class="pd pd_left pd_right">
      <div class="store-card-controls">
        <div class="store-card-control store-card-control--location" data-bind="
          component: {
            name: 'store-card-location-controls',
            params: {
              k_radius: k_radius,
              k_postalCode: k_postalCode
            }
          }
        ">
        </div>
        <div class="store-card-control store-card-control--sort" data-bind="
          component: {
            name: 'store-card-sort-controls',
            params: {
              k_storeCards: k_storeCards
            }
          }
        ">
        </div>
      </div>

      <!-- ko if: !k_allSizesSelected() -->
        <p class="store-card-message">Please select a size above to see store availability.</p>
      <!-- /ko -->

      <!-- ko if: k_allSizesSelected() && !k_isSkuAvailable() -->
        <p class="store-card-message">Sorry, your selection is currently unavailable in the stores. Please change your selection and try again.</p>
      <!-- /ko -->

      <!-- ko if: k_allSizesSelected() && k_isSkuAvailable() && didSearch() && !hasResults() -->
        <p class="store-card-message"><!-- Error executing helper: i18n helper  due to error  --></p>
      <!-- /ko -->

      <!-- ko if: k_allSizesSelected() && k_isSkuAvailable() && didSearch() && hasResults() -->
        <!-- ko foreach: { data: k_storeCards, as: 'store' } -->
          <!-- ko component: {
            name: 'store-card',
            params: {
              data: store,
              k_selectedStore: gap.viewModel.fistModal.k_selectedStore
            }
          } -->
          <!-- /ko -->
        <!-- /ko -->
      <!-- /ko -->
    </div>

    <div class="fis-ris--bottom-note" data-bind="css: { 'fis-ris--bottom-note_with-border': !k_storeCardFindInfo().hasResults }">
      <!-- Error executing helper: i18n helper  due to error  -->
      <!-- Error executing helper: i18n helper  due to error  -->
    </div>

  </div>
</script>

<script type="text/html" id="reserve-in-store-template">

  <div data-bind="visible: !k_reserveComplete()">
    <div class="ris-form">

      <div class="ris-form--intro">
        <div class="sp">
          <h3 class="ris-form--heading">Please Enter Your Contact Information</h3>
        </div>
        <p class="ris-form--intro-paragraph">Weâll confirm when we locate your item, usually within an hour of the request.</p>
      </div>

      <form action="">
        <div class="text-input_basic">
  <label data-bind="validationElement: k_firstName">

    <div class="sp_xs">
      <span class="text-input_basic--label-text">First Name</span>
    </div>
    <input class="text-input_basic--input" type="" name="firstName" data-bind="value: k_firstName">
    <div class="sp_xs">
      <span class="text-input_basic--label-text error" data-bind="validationMessage: k_firstName"></span>
    </div>

  </label>
</div>

        <div class="text-input_basic">
  <label data-bind="validationElement: k_lastName">

    <div class="sp_xs">
      <span class="text-input_basic--label-text">Last Name</span>
    </div>
    <input class="text-input_basic--input" type="" name="lastName" data-bind="value: k_lastName">
    <div class="sp_xs">
      <span class="text-input_basic--label-text error" data-bind="validationMessage: k_lastName"></span>
    </div>

  </label>
</div>

        <div class="text-input_basic">
  <label data-bind="validationElement: k_emailAddress">

    <div class="sp_xs">
      <span class="text-input_basic--label-text">Email</span>
    </div>
    <input class="text-input_basic--input" type="email" name="emailAddress" data-bind="value: k_emailAddress">
    <div class="sp_xs">
      <span class="text-input_basic--label-text error" data-bind="validationMessage: k_emailAddress"></span>
    </div>

  </label>
</div>

        <div class="text-input_basic">
  <label data-bind="validationElement: k_mobileNumber">

    <div class="sp_xs">
      <span class="text-input_basic--label-text">Mobile Number <sup>&dagger;</sup></span>
        <span class="text-input_basic--optional-flag">Optional</span>
    </div>
    <input class="text-input_basic--input" type="tel" name="mobileNumber" data-bind="value: k_mobileNumber">
    <div class="sp_xs">
      <span class="text-input_basic--label-text error" data-bind="validationMessage: k_mobileNumber"></span>
    </div>

  </label>
</div>

        <div class="input-note">
  <p class="input-note--text">
    &dagger; Used only to contact you about your request. Mobile rates may apply.
  </p>
</div>


        <label class="custom-checkbox" data-bind="noFocus: true">
  <input class="custom-checkbox--input" type="checkbox" data-bind="checked: k_optIn">
  <span class="custom-checkbox--checkbox" aria-hidden="true"><!-- This element is used to help draw the custom checkbox --></span>
  <span class="custom-checkbox--text">Sign up for our emails to get first dibs on new arrivals, can't miss deals and more.</span>
</label>


        <div class="grid-root">
          <div class="g-1-2">
            <button class="button_primary" type="submit" data-bind="click: reserve">Reserve</button>
          </div>
          <div class="g-1-2">
            <button class="ris-form--cancel" data-bind="click: closeFistModal">Cancel</button>
          </div>
        </div>
      </form>

    </div>
  </div>

  <div data-bind="visible: k_reserveComplete()">
    <!-- ko if: !k_isReserveFail() -->
    <!-- ko if: k_isStoreOpen() -->
      <div class="ris-confirmation">
  <p class="ris-confirmation--intro">
    Thanks, <span data-bind="text: k_firstName"></span>!<br />
    Your request is received.<br />
    Weâre looking for your item now.
  </p>

  <div class="ris-confirmation--instructions">
    <h2 class="ris-confirmation--heading">After we find it:</h2>
    <ol class="ris-confirmation--list">
      <li class="ris-confirmation--list-item">
        <span class="ris-confirmation--icon icon-ris-clock" data-grunticon-embed data-bind="grunticonEmbed"></span>
        Weâll confirm your item is ready, usually within an hour.
      </li>
      <li class="ris-confirmation--list-item">
        <span class="ris-confirmation--icon icon-ris-email" data-grunticon-embed data-bind="grunticonEmbed"></span>
        Check the email for where to pick up your item in the store.
      </li>
      <li class="ris-confirmation--list-item">
        <span class="ris-confirmation--icon icon-ris-shopping-bag" data-grunticon-embed data-bind="grunticonEmbed"></span>
        Weâll hold your item until closing time, <span></span>, <span></span> <span></span>.
      </li>
    </ol>
  </div>

  <div class="ris-confirmation--action">
    <button class="button_primary button_inline" data-bind="click: closeFistModal">Continue Shopping</button>
  </div>
</div>

    <!-- /ko -->
    <!-- ko if: !k_isStoreOpen() -->
      <div class="ris-confirmation">
  <p class="ris-confirmation--intro">
    Thanks, <span data-bind="text: k_firstName"></span>!<br />
    Your request is received.<br />
    Weâll look for your item when the store opens.
  </p>

  <div class="ris-confirmation--instructions">
    <h2 class="ris-confirmation--heading">After we find it:</h2>
    <ol class="ris-confirmation--list">
      <li class="ris-confirmation--list-item">
        <span class="ris-confirmation--icon icon-ris-clock" data-grunticon-embed data-bind="grunticonEmbed"></span>
        Weâll contact you to confirm that your item is ready.
      </li>
      <li class="ris-confirmation--list-item">
        <span class="ris-confirmation--icon icon-ris-email" data-grunticon-embed data-bind="grunticonEmbed"></span>
        Check your email for where to pick up the item in the store.
      </li>
    </ol>
  </div>

  <div class="ris-confirmation--action">
    <button class="button_primary button_inline" data-bind="click: closeFistModal">Continue Shopping</button>
  </div>
</div>

    <!-- /ko -->
<!-- /ko -->
<!-- ko if: k_isReserveFail() -->
  <div class="ris-confirmation">
  <p class="ris-confirmation--intro">Technical Difficulties</p>

  <div class="ris-confirmation--instructions">
    <ol class="ris-confirmation--list">
      <li class="ris-confirmation--list-item">
        <span class="ris-confirmation--icon icon-ris-clock" data-grunticon-embed data-bind="grunticonEmbed"></span>
        We are currently experiencing technical difficulties. Please try again later or call us for assistance.
      </li>
    </ol>
  </div>

  <div class="ris-confirmation--action">
    <button class="button_primary button_inline" data-bind="click: closeFistModal">Continue Shopping</button>
  </div>
</div>

<!-- /ko -->

  </div>

</script>

<script type="text/html" id="store-card-sort-controls-template">
  <div class="pillbox">
    <input class="pillbox--radio" type="radio" name="fis-sort" id="sort-availability" value="availability"
      data-bind="
        noFocus: true,
        checked: k_sortingCriteria
      "/>
    <label class="pillbox--item" for="sort-availability">
      <span class="pillbox--text">Availability</span>
    </label>

    <input class="pillbox--radio" type="radio" name="fis-sort" id="sort-distance" value="distance"
      data-bind="
        noFocus: true,
        checked: k_sortingCriteria
      "/>
    <label class="pillbox--item" for="sort-distance">
      <span class="pillbox--text">Distance</span>
    </label>
  </div>
</script>

<script type="text/html" id="store-card-location-controls-template">
  <p><span class="capitalize">within</span>
    <select id="controls-radius" data-bind="value: radius">
      <option value="5">5</option>
      <option value="10">10</option>
      <option value="25">25</option>
      <option value="50">50</option>
      <option value="100">100</option>
    </select> miles of
    <span class="controls-postalcode--wrapper">
      <label class="" for="controls-postalcode">
        <span class="visually-hidden">Zip code</span>
      </label>
      <input id="controls-postalcode" class="text-input_basic--input" type="text" data-bind="
        textInput: postalCode"
      />
    </span>
  </p>
</script>

<script type="text/html" id="store-card-template">
  <div class="store-card">
    <div class="store-card--inner" data-bind="css: availabilityClass">
      <div class="store-card--cell store-card--cell_info">
        <div class="store-card--info">
          <div data-bind="if: data.inventoryStatus == 'available'" class="store-card--availability">Available</div>

          <div data-bind="if: data.inventoryStatus == 'limited'"  class="store-card--availability store-card--availability_is-limited">
            <span class="tooltip-wrapper">
              <button data-bind="event: {mouseover: openMessage, mouseout: closeMessage, click: toggleMessage}, noFocus: true" class="tooltip-toggle unbuttonize link">Limited</button>
              <div class="tooltip is-tooltip-hidden">To ensure availability, click the &quot;Reserve in Store&quot; button to have a sales associate look for the item and hold it for you.</div>
            </span>
          </div>

          <div data-bind="if: data.inventoryStatus == 'unavailable'" class="store-card--availability">Unavailable</div>

          <div class="store-card--distance"><span data-bind="text: data.storeDistance"></span> miles</div>
          <div class="store-card--store">
            <h1 class="store-card--name"><a target="_blank" data-bind="text: data.storeName, attr: { 'href': mapUrl }"></a></h1>

            <div class="store-card--address">
              <a target="_blank" data-bind="attr: { 'href': mapUrl }">
                <span class="store-card--address-line" data-bind="text: addressLine1"></span>
                <span class="store-card--address-line" data-bind="text: addressLine2"></span>
                <span>
                  <span data-bind="text: cityName"></span>, <span data-bind="text: data.storeAddress.stateProvinceCode"></span> <span data-bind="text: data.storeAddress.postalCode"></span>
                </span>
              </a>
            </div>
            <div data-bind="text: data.storeAddress.phoneNumber"></div>
          </div>
        </div>
      </div>
      <div class="store-card--cell store-card--cell_hours">
        <div class="store-card--hours accordion" data-bind="accordion: { animated: true, showFirst: false }">
          <div class="accordion--group">
            <button class="store-card--hours-toggle accordion--trigger" data-bind="noFocus: true">Store Hours</button>

            <div class="accordion--content">
              <dl class="ris-selected--key-value-list"  data-bind="foreach: storeHours">
                <dt class="ris-selected--key-value-list--key" data-bind="text: day"></dt>
                <dd class="ris-selected--key-value-list--value ris-selected--key-value-list--value_time" data-bind="text: time"></dd>
              </dl>
            </div>
          </div>
        </div>
      </div>
      <div class="store-card--cell store-card--cell_action">
        <div data-bind="visible: isReservable">
          <button class="store-card--button button_tertiary" data-bind="click: triggerReserve.bind(data)">
            Reserve
          </button>
        </div>
      </div>
    </div>
  </div>
</script>

<script type="text/html" id="ris-selected-product-template">
<div class="ris-selected--product">
  <div class="media">
    <div class="media--image ris-selected--image show-at-md">
      <img data-bind="attr: { src: k_smallProductImage(), alt: productName }">
    </div>

    <div class="media--body">
      <div class="sp_xs">
        <span class="ris-selected--product--name" data-bind="text: productName"></span>
      </div>
      <div data-bind="visible: isMarkedDown()">
        <span class="ris-selected--product--price_old" data-bind="text: getLocalizedRegularPrice()"></span>
        <span class="ris-selected--product--price_new" data-bind="text: getLocalizedCurrentPrice()"></span>
      </div>
      <div data-bind="visible: !isMarkedDown()">
        <span class="ris-selected--product--price" data-bind="text: getLocalizedCurrentPrice()"></span>
      </div>
      <dl class="ris-selected--key-value-list">
        <dt class="ris-selected--key-value-list--key"><span data-bind="text: colorLabel"></span>:</dt>
        <dd class="ris-selected--key-value-list--value ris-selected--key-value-list--value_bold" data-bind="text: getColorName()"></dd>
      </dl>
      <!-- ko foreach: { data: sizeDimensions, as: 'sizeDimensionLabel' } -->
        <dl class="ris-selected--key-value-list">
          <dt class="ris-selected--key-value-list--key"><span data-bind="text: sizeDimensionLabel"></span>:</dt>
          <dd class="ris-selected--key-value-list--value ris-selected--key-value-list--value_bold" data-bind="text: $component.getSelectedSize($index())"></dd>
        </dl>
      <!-- /ko -->
    </div>
  </div>
</div>
</script>

<script type="text/html" id="ris-selected-location-template">

<div class="media">

  <div class="media--image ris-selected--image show-at-md">
    <div class="icon-pin-outer_lg" aria-hidden="true">
      <div class="icon-pin"></div>
    </div>
  </div>

  <div class="media--body" data-bind="with:store">
    <div class="fis-ris--selected-store">You've selected this store: </div>

    <div class="ris-selected--location--name" data-bind="text: data.storeName"></div>
    <div class="sp_xs show-at-lg">
      <div class="ris-selected--location--address">
        <span class="ris-selected--location--address-line" data-bind="text: data.storeAddress.addressLine1"></span>
        <span class="ris-selected--location--address-line" data-bind="text: data.storeAddress.addressLine2"></span>
        <span class="ris-selected--location--address-line">
          <span data-bind="text: data.storeAddress.stateProvinceCode"></span>,
          <span data-bind="text: data.storeAddress.postalCode"></span>
        </span>
      </div>
      <div class="ris-selected--location--phone" data-bind="text: data.storeAddress.phoneNumber"></div>
    </div>


    <div class="inline-block sp_xs" data-bind="visible: !$component.isReserveComplete">
      <button class="unbuttonize" data-bind="noFocus: true, click: gap.viewModel.fistModal.activateStepFis">
        <span class="fis-ris--change-store link">Change Store</span>
      </button>
    </div>

    <dl class="ris-selected--key-value-list show-at-lg">
      <div data-bind="foreach: { data: storeHours, as: 'storeHours'}">
        <dt class="ris-selected--key-value-list--key" data-bind="text: storeHours.day"></dt>
        <dd class="ris-selected--key-value-list--value ris-selected--key-value-list--value_time" data-bind="text: storeHours.time"></dd>
      </div>
    </dl>
  </div>

</div>
</script>



    <div class="signin-flyout">
  <span class="signin-flyout--arrow"></span>
  <div data-bind="with: signinFlyOut">
    <div class="signin-flyout--image sp_lg"></div>
    <div class="heading-d_universal sp_lg">
      <div class="signin-flyout--text-message" data-bind="html: textMessage"></div>
    </div>
    <button class="button_universal_primary_a" type="submit" title="Sign in"
      data-bind="text: signinMessage, click: openSignIn">
    </button>
  </div>
</div>

  </div>

<script type="text/javascript">
  gap = typeof gap !== 'undefined' ? gap : {};
  gap.EnvConfig =
      {"favorites":{"service":{"flags":{"writeToNewService":false,"writeToOldService":true,"readFromNewService":false,"readFromOldService":true},"url":"https://api.gap.com/commerce/v1/customer-favorites","apikey":"S3jLe2BcYtFRPfDivMXYxskaGUTRMQmJ"},"apigee":{"mergeFavoritesUrl":"https://customer.api.gap.com/v1/mergedfavorites","manageFavoritesUrl":"https://customer.api.gap.com/v1/favorites-clientid"},"ABTestIds":{"categoryPage":"43","topNav":"43","productPage":"43"}}};
    </script>
<script src="/static_content/vendor/vendor-0ce09e13d1.js"></script>
<script src="/static_content/js/gap-af65d533d4.js"></script>


	




	
		
	
	
			


	
			
			
	
	
	
	










<div id="popupLayeredContent" class="cssHide2"></div>
<div id="quickLookWindow"></div>
<img
	src="/assets/common/clear.gif"
	id="quickLookLauncher"
	alt="QuickLook"
	onclick="quickLook.launchQuickLook();"
	onmouseover="setImgSrc(this,'/gid/assets/common/quicklook/en_US/button_quicklook_launcher_over.gif');"
	onmouseout="setImgSrc(this,'/gid/assets/common/quicklook/en_US/button_quicklook_launcher_on.gif');"
	onmousedown="setImgSrc(this,'/gid/assets/common/quicklook/en_US/button_quicklook_launcher_down.gif');"
	style="cursor: pointer;" class="cssHide2" />
	
<div id="dragLayer">
	<div id="dragBox">
	    <img id="dragImg" src="/assets/common/clear.gif" />
	</div>
</div>

<div id="zoomLayer"><img id="zoomImg" src="/assets/common/clear.gif"/></div>

<div id="productColorError" class="cssHide2 productError" style="display:none;">
	<div id="productColorErrorMain" class="">select</div>
	<div id="productColorErrorArrow" class=""></div>
</div>
<div id="productSizeDimension1Error" class="cssHide2 productError" style="display:none;">
	<div id="productSizeDimension1ErrorMain" class="">select</div>
	<div id="productSizeDimension1ErrorArrow" class=""></div>
</div>
<div id="productSizeDimension2Error" class="cssHide2 productError" style="display:none;">
	<div id="productSizeDimension2ErrorMain" class="">select</div>
	<div id="productSizeDimension2ErrorArrow" class=""></div>
</div>
	

<div id="productBagError" class="cssHide2"></div>
<div id="productSoldOutMsg" class="cssHide2"></div>
<div id="productOnOrderMsg" class="cssHide2"></div>
<div id="productAjaxLoader" class="cssHide2"></div>
<div id="outfitProductAjaxLoader" class="cssHide2"></div>
<div id="inlineBagAjaxLoader" class="cssHide2">
<div id="inlineShoppingBagDataLoaderContainer"></div>
<div id="inlineShoppingBagDataMarketingContainer"></div>
</div>

<div id="watirDebug" class="cssHide2">
	<div id="debugAjaxStatus"></div>
	<div id="debugModules"></div>
</div>

	




	
		
	
	
			


	
			
			
	
	
	
	







<div id="siteWideBusinessCodeBody"><!-- @TemplateContentLayout(templateRegionName:"gid.common.siteWide.businessCode.regionBottom") -->

<!-- BEGIN - WCD Sitewide Container 16 -->
<!-- BEGIN Content Item File: /content/0012/399/496/cn12399496.html -->
<div id="contentItemContainer212633" class="12399496" >

<!-- BEGIN override to fix pixman data populating on product pages in IE -->
<script type="text/javascript">
if( location.pathname == "/browse/product.do" ) {
	pixelManagementService.controller.metricsLibraryManager.setMetricsLibrary = pixelManagementService.controller.metricsLibraryManager.setMetricsLibrary.wrap( function( om ) {
		om();
		jQuery(document).trigger('productPagePixMan:ready');
	});
}
</script>
<!-- END override to fix pixman data populating on product pages in IE -->

<!--Begin ONESITE: hide facets: hiding dept only for all pages except search.do -->
<script type="text/javascript">
gap.FacetFeatureSwitch.setConfig({enabledFacets: ['department','style','size','color','price']});
</script>
<style type="text/css">
.facet-department--button-wrapper {
display:none !important;
}
.searchPage .facet-department--button-wrapper { /* specific for search.do page */
display:block !important;
}
</style> 
<!--End ONESITE: hide facets: hiding dept only for all pages except search.do -->

<!-- BEGIN - iPerception survey -->
<script type="text/javascript">
if( location.pathname == '/'|| location.pathname == '/browse/home.do' || location.pathname == '/browse/division.do' || location.pathname == '/browse/product.do' || location.pathname == '/browse/category.do' || location.pathname == '/browse/outfit.do' || location.pathname == '/checkout/orderConfirm.do' ) {
	jQuery(document).ready(function(e) {
	//if you are on home, division, product, category, outfit, and order confirmation pages
		/*Copyright 2011-2015 iPerceptions, Inc. All rights reserved. Do not distribute.iPerceptions provides this code 'as is' without warranty of any kind, either express or implied. */
		window.iperceptionskey = 'ad903090-a4e8-4c60-a0d0-96e7c68fd250';
		(function () { 
			var a = document.createElement('script'),
			b = document.getElementsByTagName('body')[0]; 
			a.type = 'text/javascript'; 
			a.async = true;
			a.src = '//universal.iperceptions.com/wrapper.js';
			b.appendChild(a);
		})();
	});
}
// Disable the Rockbridge Survey - set the cookie that would normally be set if the Rockbridge popup got triggered
if (window["Survey"]) {
Survey.name = "RockbridgeSurvey";
Survey.setSurveyPopCookie();
}
</script>
<!-- END - iPerception survey -->

<script type="text/javascript">
// RIS JQUERY FIX
(function() {
	if (!window.reserveInStoreManager) {
		return;
	}

	reserveInStoreManager.controller.reserveWithSecureUrl = function reserveWithSecureUrl(params){
			var reservationUrl = reserveInStoreManager.controller.buildSecureResourceURL();
			var resDetails = Object.toJSON(params);
			//CORS supported browser and IF CORS model value is true
			if ('withCredentials' in new XMLHttpRequest() && reserveInStoreManager.model.useCORSForSecureRISService) {
	            new Ajax.Request(reservationUrl,{
					method: "post",
					contentType: 'application/json',
					postBody: resDetails,
					onSuccess: function(response) {
						if (response.status === 200) {
							response.responseJSON = response;
							reserveInStoreManager.controller.reserveSuccess(response, params);
						} else {
							response.responseJSON = response;
							reserveInStoreManager.controller.handleRequestFailure(response);
						}
					},
					onFailure: function(response) {
						reserveInStoreManager.controller.handleRequestFailure(response);
					}


				});
	    } else {
    	 reserveInStoreManager.controller.reserveWithLegacyBrowser(params);
     	}
		};

		reserveInStoreManager.controller.reserveSuccess = function reserveSuccess(response, params) {
			var openCloseUrl = reserveInStoreManager.controller.buildOpenCloseURL(reserveInStoreManager.model.storeId);
			new Ajax.Request(openCloseUrl,{
				method: "get",
				contentType: 'application/json',
				postBody: Object.toJSON(params),
 				onSuccess: function(response){
					var openCloseUrl = reserveInStoreManager.controller.buildOpenCloseURL(reserveInStoreManager.model.storeId);
					new Ajax.Request(openCloseUrl,{
						method: "get",
						contentType: 'application/json',
						postBody: Object.toJSON(params),
						onSuccess: function(response){
							var responseJSON = response.responseJSON;
							//response.responseJSON = response;
							reserveInStoreManager.view.showThankYouMessage(params.firstName, responseJSON);
						},
						onFailure: function(response) {
							//response.responseJSON = response;
							reserveInStoreManager.view.showOpenCloseFailure(params.firstName);
						}
					});
					reportingService.controller.viewManagers.findInStore.reserveInStoreConfirmationViewManager.controller.getReportRequest();
					//reserveInStoreManager.view.showThankYouMessage(params.firstName, response);
 				},
				onFailure: function(response) {
					reserveInStoreManager.view.showOpenCloseFailure(params.firstName);
				}
 			});
		};

})();

</script>


<script>

if (window.gap && gap.CustomNavigationIntegrator && gap.CustomNavigationIntegrator.setConfig && navigator.userAgent.indexOf("MSIE 8") == -1) {

	gap.CustomNavigationIntegrator.setConfig({
			// to edit the default name of a division or subdiv
			// define the biz and follow it with corrected text
			rename : {
			/* EXAMPLE
			"5646" : "Women's"
			*/
			"5646" : "Women",
			"5997" : "Maternity",
			"6413" : "Toddler",
			"6487" : "Baby"
			},

			// to hide a division or sub/div or category
			// only use the biz id
			/* EXAMPLE
			hide : [76739,69775,90824],*/
			hide : [36707,36709,36710,94810,1014714,1014823,1015086,1015088,6345],

			// to add a division or subdiv
			addDivisions : [
			/* EXAMPLE
			{id:"c2136", template:"85035", name:"Customer Service", url:"/customerService/info.do?cid=2136"},
			{id:"c60786", template:"85035", name:"Toasty Tech", url:"/browse/category.do?cid=60786"},
			*/
			{id:"c1016012", template:"36707", name:"GapBody", url:"/browse/category.do?cid=1016012"},
			{id:"c1043398", template:"36707", name:"#gaplove", url:"/browse/info.do?cid=1043398"},
			{id:"c48620", template:"36707", name:"Gap Factory", url:"http://www.gapfactory.com/?tid=gfsv000000"}
			],

			// to change order of division or subdivision. use biz id or id (from addDivisions)
			/* EXAMPLE
			divisionOrder : [56999,5646,85035,85032,5063,12021,5997,6256,6172,43184,37470,"c2136","c60786","google"]
			*/
			divisionOrder : [5646,"c1016012", 83062,5997,5065,6256,6172,6413,6487,"c1043398", "c48620"],
		
			customConfig : function() {
				// make Factory Store clickable
				//jQuery('li[data-cid=c48620] h3').on('click', function(){
				//	window.location = jQuery(this).children('a').attr('href');
				//});  
				jQuery('li[data-cid=c48620]').children('h3').removeClass("catnav--item_has-children"); // removing extra space on the right - REMOVE UPON NEXT MASTER RELEASE
				jQuery('li[data-cid=6256]').children('h3').addClass('catnav--item_first-of-type'); // FIX INDENTATION
				jQuery('li[data-cid=6413]').children('h3').addClass('catnav--item_first-of-type'); // FIX INDENTATION
				jQuery('li[data-site-cat-key="divlink: Womens, Shop Womens styles"]').children('h3').text("Shop Women styles").attr('aria-label','Shop Womens styles');
				jQuery('li[data-site-cat-key="divlink: Toddler Girl (1-5 yrs), Shop Toddler Girl (1-5 yrs) styles"]').children('h3').text("Shop Toddler styles").attr('aria-label','Shop Toddler styles');
				jQuery('li[data-site-cat-key="Toddler Girl (1-5 yrs), Shop Toddler Girl (1-5 yrs) styles"]').children('h3').text("Shop Toddler styles").attr('aria-label','Shop Toddler styles');
				jQuery('li[data-site-cat-key="divlink: Baby Girl (0-24 mos), Shop Baby Girl (0-24 mos) styles"]').children('h3').text("Shop Baby styles").attr('aria-label','Shop Baby styles');
				jQuery('li[data-site-cat-key="Baby Girl (0-24 mos), Shop Baby Girl (0-24 mos) styles"]').children('h3').text("Shop Baby styles").attr('aria-label','Shop Baby styles');
				// omit the line above similar to the ones below. the h3 is no longer valid as an identifier. it's been changed to h2
				//jQuery('li[data-cid=c48620] h2').on('click', function(){
				//	window.location = jQuery(this).children('a').attr('href');
				//});  
				jQuery('li[data-cid=c48620]').children('h2').removeClass("catnav--item_has-children"); // removing extra space on the right - REMOVE UPON NEXT MASTER RELEASE
				jQuery('li[data-cid=6256]').children('h2').addClass('catnav--item_first-of-type'); // FIX INDENTATION
				jQuery('li[data-cid=6413]').children('h2').addClass('catnav--item_first-of-type'); // FIX INDENTATION
				jQuery('li[data-site-cat-key="divlink: Womens, Shop Womens styles"]').children('h2').text("Shop Women styles").attr('aria-label','Shop Womens styles');
				jQuery('li[data-site-cat-key="divlink: Toddler Girl (1-5 yrs), Shop Toddler Girl (1-5 yrs) styles"]').children('h2').text("Shop Toddler styles").attr('aria-label','Shop Toddler styles');
				jQuery('li[data-site-cat-key="Toddler Girl (1-5 yrs), Shop Toddler Girl (1-5 yrs) styles"]').children('h2').text("Shop Toddler styles").attr('aria-label','Shop Toddler styles');
				jQuery('li[data-site-cat-key="divlink: Baby Girl (0-24 mos), Shop Baby Girl (0-24 mos) styles"]').children('h2').text("Shop Baby styles").attr('aria-label','Shop Baby styles');
				jQuery('li[data-site-cat-key="Baby Girl (0-24 mos), Shop Baby Girl (0-24 mos) styles"]').children('h2').text("Shop Baby styles").attr('aria-label','Shop Baby styles');

				/*  HIDES CIDs IN SM BP */
				var cidHideArray =[1016310, 57059,1017805];
				if (gap.Mediaqueries.currentBP.size == 'small') {
					jQuery.each(cidHideArray, function(index, value) {
						jQuery("li[data-cid="+value+"]").hide();
					}); 
				} 
				
				/* Hide Search on small BP in shopping bag */
				if (gap.Mediaqueries.currentBP.size == 'small' && location.pathname == "/buy/shopping_bag.do") {
					jQuery('div[class~=search-component--wrapper_large]').hide().attr('aria-label','hidden');
				} 

				/* overridden leftnav category links reincorporated into menu */			
				jQuery('li[data-cid=6345] h3').children('a').attr('href','/browse/subDivision.do?cid=6413'); // Redirect Toddler Boy (6345) Division to Toddler (6413)
				jQuery('li[data-cid=1027011] h3').children('a').attr('href','/browse/info.do?cid=1028245'); // gift shop link
				// omit the line above similar to the ones below. the h3 is no longer valid as an identifier. it's been changed to h2
				jQuery('li[data-cid=6345] h2').children('a').attr('href','/browse/subDivision.do?cid=6413'); // Redirect Toddler Boy (6345) Division to Toddler (6413)
				jQuery('li[data-cid=1027011] h2').children('a').attr('href','/browse/info.do?cid=1028245'); // gift shop link
			} // end customConfig

	});
		
};
</script>

<!-- BEGIN fix issue where s_pers is being set to blank and causing JS errors during reporting -->
<script type="text/javascript">
	(function() {
		if (gidLib.getCookie("s_pers") == "") {
			var p = gidLib.setCookieParamsHelper("s_pers");
			gidLib.setCookie("s_pers", null, p.exp, p.path, p.domain, p.isSecure);
		}
	})();
</script>
<!-- END fix issue where s_pers is being set to blank and causing JS errors during reporting -->

<!-- BEGIN Omniture fix for referrer -->
<script type="text/javascript">
if (window.s && s.doPlugins) {
    s.doPlugins = _.wrap(s.doPlugins, function omniturePluginWrapper(func, s) {
        func(s);
        if (!s.prop60 && s.c_r("gap_ref")) {
            s.prop60 = s.c_r("gap_ref");
        }
    });
}
</script>
<!-- END Omniture fix for referrer -->

<!-- BEGIN fix links in hamburger nav -->
<script type="text/javascript">
jQuery(document).ready(function(e) {

	if( jQuery('.nav--divisions li a:contains("Gap Factory")').length > 0 ) {
		jQuery('.nav--divisions li a:contains("Gap Factory")').attr('target','_blank');
	}

});
</script>
<!-- END fix links in hamburger nav -->

<!-- BEGIN: 5/18/2016 DEDUPE SKUS for ONESITE PDP -->
<script type="text/javascript">
if (location.pathname == "/browse/product.do" && gap.pageProductData) {
    var getSku2Purge = function(s1,s2) {
        /** one skus is in stock, the other is out of stock **/
        if (s1.inStock == true && s2.inStock == false) return s2.skuId;
        if (s1.inStock == false && s2.inStock == true) return s1.skuId;
        /** one skus is BO'ed, the other is not **/
        if (s1.backOrderDate == null && s2.backOrderDate != null) return s2.skuId;
        if (s1.backOrderDate != null && s2.backOrderDate == null) return s1.skuId;
        /** if both are BO'ed **/
        if (s1.backOrderDate != null && s2.backOrderDate != null) {
            if ((new Date(s1.backOrderDate)).getTime() > (new Date(s2.backOrderDate)).getTime()) return s1.skuId;
            if ((new Date(s1.backOrderDate)).getTime() <= (new Date(s2.backOrderDate)).getTime()) return s2.skuId;
        }
        /** both skus either in stock or both out of stock **/
        return s1.skuId;
    };
    var isDuplicateSku = function(s1,s2) {
        var r = false;
        if (s1.skuId != s2.skuId) {
            if (s1.sizeDimension2) {
                if (s1.sizeDimension1 == s2.sizeDimension1 && s1.sizeDimension2 == s2.sizeDimension2) r = true;
            } else {
                if (s1.sizeDimension1 == s2.sizeDimension1) r = true;
            }
        }
        return r;
    };
    gap.pageProductData.variants.each(function(v){
        if (v.productStyleColors) {
            v.productStyleColors.each(function(cg){
                var purgeList = [];
                cg.each(function(c){
                /** preprocess to identify duplicates **/
                    c.sizes.each(function(s1,i){
                        c.sizes.each(function(s2,j){
                            if (isDuplicateSku(s1,s2) == true) {
                                if (i < j) {
                                    var sku2Purge = getSku2Purge(s1,s2);
                                } else {
                                    var sku2Purge = getSku2Purge(s2,s1);
                                }
                                if (jQuery.inArray(sku2Purge,purgeList) == -1) purgeList.push(sku2Purge);
                            }
                        });
                    });
                    /** purge dupes from the sizes array **/
                    if (purgeList.length > 0) {
                        var newSizes = []
                        c.sizes.each(function(s,i){
                            if (jQuery.inArray(s.skuId,purgeList) == -1) {
                                newSizes.push(s);
                            }
                        });
                        c.sizes = newSizes;
                        if (console && console.log) {
                            console.log("SKUs removed " + purgeList.join(", "));
                        }
                    }
                });
            });
            /** dedupe sizedimensions list **/
            var unique = function(xs) {
                return xs.filter(function(x, i) {
                    return xs.indexOf(x) === i
                })
            }
            v.sizeDimensions.sizeDimension1.dimensions = unique(v.sizeDimensions.sizeDimension1.dimensions);
            if (v.sizeDimensions.sizeDimension2) v.sizeDimensions.sizeDimension2.dimensions = unique(v.sizeDimensions.sizeDimension2.dimensions);
        }
    });
}
</script>
<!-- END: DEDUPE SKUS for ONESITE PDP -->

<!-- BEGIN RiS fix -->
<script type="text/javascript">
if( window["gap"] !== undefined && gap.ReserveService && gap.ReserveService.makeReservation ) {
	gap.ReserveService.makeReservation = _.wrap(gap.ReserveService.makeReservation, function(oldReserve, data) { 
		if (!data.mobilePhoneNumber) { data.mobilePhoneNumber = ''; } 
		return oldReserve(data); 
	});
}
</script>
<!-- END RiS fix -->


<!--Lazy Loader-->

<script type="text/javascript">
// Nothing to lazy load in checkout - no footer, no WCD image content, etc
if( location.pathname != '/checkout/order.do' ) {
	
if( window["wcd"] === undefined ) {
	var wcd = { };
}

// Covers normally-loaded content (all same class) and conditionally-loaded content (mix of static and conditional)
// Lazy loads...
// - picture tags - sources and img src
// - videos - sources
// - iframes - src
// - CSS background images
// - Javascript functionality
wcd.ContentLazyLoader = {
	debugMode: false, 
	
	loadMode: 'normal',
	isTouchDevice: false, 
	
	containerSelectorNormal: '.wcdContentLazyLoad',
	contentToLLNormal: [ ],
	containerSelectorConditional: '.wcdContentConditionalLazyLoad',
	contentToLLConditional: [ ],
	contentToLLAll: [ ],
	
	conditionalLLEventName: 'wcdConditionalLazyLoad:ready', 
	categoryPageLLEventName: 'wcdCategoryHooks:ready', 
	categoryPageWithContenLLEventName: 'wcdCategoryContent:ready', 
	
	currentScrollBottomPosition: 0, 
	currentContentItor: 0,	
	totalContentToLL: 0, 
	
	loadOffsetStaticContent: 100,
	loadOffsetJSFunction: 400, 

	currentCheckTimeout: 0, 
	initialLLCheckTimeout: 0, 
	scrollLLCheckTimeout: 500, 
	
	// Init : find all LL class name containers and wait for document/page ready event to start LLing
	init: function( containerSelectorConditionalOverride ) {
		var ll = wcd.ContentLazyLoader;
		// Debug mode check
		if( location.search.indexOf('llDebug=true') > -1 ) {
			ll.debugMode = true;
			ll.debugOutput('wcd lazy loading in debug mode');
		}
		
		// Check whether we're on a touch device
		ll.isTouchDevice = ll.isTouchDeviceCheck();
		
		// If conditionalContainerSelectorOverride present (AB test only loading one chunk of content vs another)
		if( containerSelectorConditionalOverride ) {
			ll.containerSelectorConditional = containerSelectorConditionalOverride;
		}
		
		// Find arrays of content to LL
		ll.contentToLLNormal = jQuery( ll.containerSelectorNormal );
		ll.contentToLLConditional = jQuery( ll.containerSelectorConditional );
		
		// If all LL content via normal load do so on dom:ready
		if( ll.contentToLLNormal.length > 0 && ll.contentToLLConditional.length == 0 ) {
			// Normal lazy load of ISM/subheader/below content on category pages
			if( location.pathname == '/browse/category.do' ) {
				// Check whether category page has content or not
				if( window["wcdCategoryHasContent"] !== undefined && wcdCategoryHasContent == true ) {
					jQuery(document).on( ll.categoryPageWithContenLLEventName, function(e) {
						if( ll.debugMode ) ll.debugOutput('category page with content normal lazy load launched');
						ll.llReadyHandler();
					});
				}
				else {
					jQuery(document).on( ll.categoryPageLLEventName, function(e) {
						if( ll.debugMode ) ll.debugOutput('category page normal lazy load launched');
						ll.llReadyHandler();
					});
				}
			}
			// Home page/division/info
			else {
				jQuery(document).ready(function(e) {
					if( ll.debugMode ) ll.debugOutput('normal lazy load launched');
					ll.llReadyHandler();
				});
			}
		}
		// Else there is a mix or all conditional load, wait for LL ready event
		else if( ll.contentToLLNormal.length > 0 && ll.contentToLLConditional.length > 0 ) {
			ll.loadMode = 'conditional';
			jQuery(document).on( ll.conditionalLLEventName, function() {
				if( ll.debugMode ) ll.debugOutput('conditional lazy load launched');
				ll.llReadyHandler();
			});
		}
	},
	
	// Ready to start lazy loading, we've captured all of the content we need and waited for any potential conditional to start
	llReadyHandler: function() {
		var ll = wcd.ContentLazyLoader;
		if( ll.debugMode ) ll.debugOutput('lazy load ready called');

		if( ll.loadMode == 'conditional' ) {
			// Set total LL array to normal + conditional array
			ll.contentToLLAll = jQuery( 
				ll.containerSelectorNormal + ' picture:has(img[data-src]), ' + 
				ll.containerSelectorNormal + ' video:has(source[data-src]), ' + 
				ll.containerSelectorNormal + ' iframe[data-src], ' + 
				ll.containerSelectorNormal + ' div[data-background-image], ' + 
				ll.containerSelectorNormal + ' div[data-lazycallback], ' + 
				ll.containerSelectorConditional + ' picture:has(img[data-src]), ' + 
				ll.containerSelectorConditional + ' video:has(source[data-src]), ' + 
				ll.containerSelectorConditional + ' iframe[data-src], ' + 
				ll.containerSelectorConditional + ' div[data-background-image]' +
				ll.containerSelectorConditional + ' div[data-lazycallback]'
			);		
		}
		else {
			// Set total LL array to normal load array
			ll.contentToLLAll = jQuery( 
				ll.containerSelectorNormal + ' picture:has(img[data-src]), ' + 
				ll.containerSelectorNormal + ' video:has(source[data-src]), ' + 
				ll.containerSelectorNormal + ' iframe[data-src], ' + 
				ll.containerSelectorNormal + ' div[data-background-image], ' + 
				ll.containerSelectorNormal + ' div[data-lazycallback]'
			);
		}
		if( ll.debugMode ) ll.debugOutput('contentToLLAll', ll.contentToLLAll );

		// If there's content to lazy load, find where the user is and start lazy loading!
		if( ll.contentToLLAll.length > 0 ) {
			ll.totalContentToLL = ll.contentToLLAll.length;
			ll.initialCheck();
			// Do initial load
			ll.llToCurrentScrollBottom();
			// Add listeners for scroll loading
			ll.addScrollListeners();
		}
	},
	
	// Checks initial position of browser at LL init, then preps the LL content with fake heights to LL
	initialCheck: function() {
		var ll = wcd.ContentLazyLoader;
		if( ll.debugMode ) ll.debugOutput('lazy load check called');

		// Get initial read on where a user is scrolled to
		//ll.currentScrollBottomPosition = jQuery(window).scrollTop() + jQuery(window).height();

		// Set false height to everything and v-align all pictures/images  to top of its container
		ll.contentToLLAll.css({ 'height':'1000px' });
		ll.contentToLLAll.find('picture, img').css({ 'vertical-align':'top' });
		if( ll.debugMode ) { 
			//ll.contentToLLAll.css('background','#f00');
			ll.debugOutput('pics/imgs within cctoLL', ll.contentToLLAll.find('picture, img') ); 
		}
	},
	
	// Lazy loads all content to the current scroll point
	llToCurrentScrollBottom: function() {
		var ll = wcd.ContentLazyLoader;
		if( ll.debugMode ) ll.debugOutput('ll to current scroll bottom called');

		var currentTimeout = ll.currentCheckTimeout;
		var currentBottom = jQuery(window).scrollTop() + jQuery(window).height();
		var currentContent = jQuery( ll.contentToLLAll[ ll.currentContentItor ] );
		if( ll.debugMode ) { ll.debugOutput('checking content ' + ll.currentContentItor + ' at timeout ' + currentTimeout, currentContent ); }
		
		if( currentContent.length > 0 ) {
			// Ensure that the offset to the content is defined
			if( currentContent.offset() !== undefined ) {
				
				// If so, we can measure it vs our screen position so, based on type of content, add appropriate offsets
				if( currentContent.is('div[data-lazycallback]') ) {
					currentBottom += ll.loadOffsetJSFunction;
				}
				else {
					currentBottom += ll.loadOffsetStaticContent;
				}
				
				// Now let's take our measurement; if within viewport, load it
				if( ll.debugMode ) ll.debugOutput('measuring current bottom (+offset): ' + currentBottom + ' to top of content: ' + currentContent.offset().top );
				
				if( currentBottom >= currentContent.offset().top ) {
					ll.lazyLoadElement( currentContent );
					ll.currentContentItor++;				
									
					// If not the intiial load and all content has loaded, remove scroll listeners
					if( ll.currentContentItor >= ll.totalContentToLL ) {
						ll.removeScrollListeners();
						if( ll.debugMode ) {
							ll.debugOutput('all content loaded');
							//ll.debugOutput('end');
						}
					}
					else {
						// Now check whether the next is present
						setTimeout( function() {
							ll.llToCurrentScrollBottom();
						}, currentTimeout );
					}
				}
				else {
					// If done with initial load, set tineout to scroll timeout
					ll.currentCheckTimeout = ll.scrollLLCheckTimeout;
				}
			}
		}
		// Current content not found
		else {
			if( ll.debugMode ) ll.debugOutput('current content ' + ll.currentContentItor + ' not found');
		}		
	},
	
	// Lazy loads a single element - picture tag (including all of the <source> + <img> tag inside), video sources, iframe or JS
	lazyLoadElement: function( content ) {
		var ll = wcd.ContentLazyLoader;
		if( ll.debugMode ) ll.debugOutput('lazy loading individual element', content );
		
		// Picture tags - changes data-src, data-srcset to src, srcset for all tags within the <picture>
		if( content.is('picture') ) {
			var pictureSourceTags = content.find('source[data-srcset]');
			if( pictureSourceTags.length > 0 ) {
				pictureSourceTags
					.attr('srcset', function( i, val ) {
						if( ll.debugMode ) ll.debugOutput('lled picture source - ' + jQuery( this ).attr('data-srcset') );
						return jQuery( this ).attr('data-srcset');
					})
					.removeAttr('data-srcset');
			}
			var pictureImgTags = content.find('img[data-src]');
			if( pictureImgTags.length > 0 ) {
				pictureImgTags
					.attr('src', function( i, val ) {
						if( ll.debugMode ) ll.debugOutput('lled picture img - ' + jQuery( this ).attr('data-src') );
						return jQuery( this ).attr('data-src');
					})
					.removeAttr('data-src');
			}
		}
		// Video tags - load all srcs from source tags within
		else if( content.is('video') ) {
			var videoSourceTags = content.find('source[data-srcset]');
			if( videoSourceTags.length > 0 ) {
				videoSourceTags
					.attr('src', function( i, val ) {
						if( ll.debugMode ) ll.debugOutput('lled video source - ' + jQuery( this ).attr('data-src') );
						return jQuery( this ).attr('data-src');
					})
					.removeAttr('data-src');
			}
		}
		// I-Frame tag - load src of the one tag
		else if( content.is('iframe[data-src]') ) {
			content
				.attr('src', content.attr('data-src') )
				.removeAttr('data-src');
			if( ll.debugMode ) ll.debugOutput('lled iframe - ' + content.attr('src') );
		}
		// CSS background image
		else if( content.is('div[data-background-image]') ) {
			console.log('what the heck', content, content.attr('data-background-image') );
			var backgroundImgToLL = content.attr('data-background-image');
			content
				.css('background-image', 'url(' + backgroundImgToLL + ')')
				.removeAttr('data-background-image');
			if( ll.debugMode ) ll.debugOutput('lled background image - ' + content.css('background') );
		}
		// JS function lazy loading
		else if( content.is('div[data-lazycallback]') ) {
			var contentCallback = content.attr('data-lazycallback');
			var contentCallbackFn;
			if( window[ contentCallback ] !== undefined ) {
				if( typeof window[ contentCallback ] === 'function' ) {
					contentCallbackFn = window[ contentCallback ];
					contentCallbackFn();
				}
			}
			if( ll.debugMode ) ll.debugOutput('lled JS function - ' + content.attr('data-lazycallback') );
		}
		
		// Remove false height from current
		content.css('height','auto');
		//if( ll.debugMode && ! content.is('div') ) content.css('background','none');
	},
	
	// Scroll listeners
	addScrollListeners: function() {
		var ll = wcd.ContentLazyLoader;
		if( ll.debugMode ) ll.debugOutput('add scroll handlers called');

		// Listen for touch move on mobile or scroll on non-touch
		if( ll.isTouchDevice ) {
			jQuery('body').on('touchmove', ll.llToCurrentScrollBottom );
		}
		else {
			jQuery(window).on('scroll', ll.llToCurrentScrollBottom );
		}
	},
	removeScrollListeners: function() {
		var ll = wcd.ContentLazyLoader;
		if( ll.debugMode ) ll.debugOutput('remvoe scroll handlers called');

		if( ll.isTouchDevice ) {
			jQuery('body').off('touchmove', ll.llToCurrentScrollBottom );
		}
		else {
			jQuery(window).off('scroll', ll.llToCurrentScrollBottom );
		}
	},

	/// MISC FUNCTIONS
	// Check whether this is a touch device so we can ensure proper support for touch move events
	isTouchDeviceCheck: function() {
		try {  
			document.createEvent("TouchEvent");  
			return true;  
		}
		catch (e) {  
			return false;  
		}  
	},
	
	// Debugging function, outputs the console output and performance mark
	debugOutput: function( output, vardumps ) {
		if( window["console"] !== undefined && console.log && window["performance"] !== undefined && performance.now && performance.mark ) {
			console.log( output + ' ' + performance.now() );
			performance.mark( output );
			
			if( vardumps !== undefined ) {
				console.log( vardumps );					
				/*if( ! jQuery.isArray( vardumps ) ) vardumps = [ vardumps ];
				for( var i=0; i < vardumps.length; i++ ) {
					console.log( vardumps[i] );					
				}*/
			}
					
			if( output == 'end' ) {
				console.log('********** BEGIN DUMP LAZY LOAD TO THIS POINT **********');
				var performanceMarks = performance.getEntriesByType('mark');
				if( performanceMarks.length > 0 ) {
					for( var i=0; i < performanceMarks.length; i++ ) {
						console.log( performanceMarks[i].name + ' - ' + performanceMarks[i].startTime );
					}
				}
				console.log('********** END DUMP LAZY LOAD TO THIS POINT **********');
			}
		}
	}
}
wcd.ContentLazyLoader.init();

}
</script>




<!-- END Lazy Loader-->




</div>
<!-- END Content Item File: /content/0012/399/496/cn12399496.html -->

<!-- END - WCD Sitewide Container 16 -->

<!-- BEGIN - WCD Sitewide Container 17 -->
<!-- BEGIN Content Item File: /content/0009/894/771/cn9894771.html -->
<div id="contentItemContainer212632" class="9894771" >


<!-- WCD Shared Body Code - this codebase is to remain consistent across all market brands -->
<script type="text/javascript">

jQuery.wcdSharedOverride_bodyClassContextSetter = {
	init: function() {
		// Find .do page name and apply class to body
		var pagePath = location.pathname;
		var pageType = '';
		var firstSlash = pagePath.indexOf('/');
		var secondSlash = pagePath.indexOf('/', firstSlash+1 );
		if( secondSlash > -1 ) {
			pageType = pagePath.substr( secondSlash+1 );
			pageType = pageType.replace('.do','');
		}
		else if( location.pathname == '/' ) {
			pageType = 'home';
		}
	
		document.body.className += ' ' + pageType + 'Page';
		
		// If CID in URL, apply CID class to body
		var pageParams = location.search;
		var pageCat = jQuery.wcdSharedOverride_bodyClassContextSetter.findParam('cid');
		if( pageCat != '' ) {
			document.body.className += ' cid' + pageCat;
		}
		
		// If product or outfit page, apply PID/OID class to body
		var pageProdId = '';
		var pageProdScid = '';
		if( pagePath == '/browse/product.do' ) {
			pageProdId = jQuery.wcdSharedOverride_bodyClassContextSetter.findParam('pid');
			pageProdScid = jQuery.wcdSharedOverride_bodyClassContextSetter.findParam('scid');

			// Find Style-Color ID
			if( pageProdScid != '' ) {
				pageProdScid = pageProdScid.substr(0,9);
			}
			else if( pageProdId.length >= 9 ) {
				pageProdScid = pageProdId.substr(0,9);
			}
			if( pageProdScid != '' ) {
				document.body.className += ' scid' + pageProdScid;
			}
			
			// Find base Product ID
			if( pageProdId != '' ) {
				pageProdId = pageProdId.substr(0,6);
				document.body.className += ' pid' + pageProdId;
			}
		}
		else if( pagePath == '/browse/outfit.do' && pageParams.indexOf('oid=') > -1 ) {
			pageProdId = jQuery.wcdSharedOverride_bodyClassContextSetter.findParam('oid');
			document.body.className += ' oid' + pageProdId;
		}
		
		// Skava site check
		if( location.hostname.substr(0,2) == 'm.' ) {
			document.body.className += ' skavaSite';
		}
		
		// Old IE browsers
		if( navigator.userAgent.indexOf('MSIE 8') > -1 || navigator.userAgent.indexOf('MSIE 9') > -1 ) {
			document.body.className += ' oldIeBrowser';
		}		
		
		// OneSite classes
		if( location.pathname == '/browse/category.do' && window["categoryPage"] == null ) {
			document.body.className += ' onesiteCatPage';
		}
		if( location.pathname == '/browse/search.do' && window["categoryPage"] == null ) {
			document.body.className += ' onesiteSearchPage';
		}
		if( location.pathname == '/browse/product.do' && window["productPage"] == null ) {
			document.body.className += ' onesiteProdPage';
		}
		//adding Onesite class name to Division/SubDivision Pages 
		var isResponsiveMode = gidLib.getCookie("ABSeg") == "B|B|B|B|";
		if(isResponsiveMode && location.pathname == '/browse/division.do'){
			document.body.className += ' onesiteDivPage';
		}
		if(isResponsiveMode && location.pathname == '/browse/subDivision.do'){
			document.body.className += ' onesiteSubDivPage';
		}
		
	},
	
	findParam: function( paramName ) {
		var paramToReturn = '';
		var pageParams = location.search;
		if( pageParams.indexOf( paramName + '=' ) > -1 ) {
			paramToReturn = pageParams.substr( pageParams.indexOf( paramName + '=' ) + paramName.length + 1 );
			if( paramToReturn.indexOf('&') > -1 ) paramToReturn = paramToReturn.substr( 0, paramToReturn.indexOf('&') );
		}
		return paramToReturn;
	}
}
jQuery.wcdSharedOverride_bodyClassContextSetter.init();

</script>


</div>
<!-- END Content Item File: /content/0009/894/771/cn9894771.html -->

<!-- END - WCD Sitewide Container 17 -->


<!-- BEGIN - WCD Sitewide Container 20 -->
<!-- BEGIN Content Item File: /content/0011/991/705/cn11991705.html -->
<div id="contentItemContainer212629" class="11991705" >


<!-- GOL US - pixel container -->
<!-- STILL NEED TO MIGRATE AWAY FROM PROTOTYPE TEMPLATES -->

<script type="text/javascript">
		//overwriting setPixelPartnerTransmissionTemplateToDom to insert frames after page load

        pixelManagementService.controller.pixelPartnerManager.setPixelPartnerTransmissionTemplateToDom = function(
         pixelPartner) {
         var PIXEL_MANAGEMENT_TRANSMISSIONS_ELEMENT_NAME = pixelManagementService.constants.PIXEL_MANAGEMENT_TRANSMISSIONS_ELEMENT_NAME;
         var PIXEL_PARTNER_TRANSMISSION_ELEMENT_ID_PREFIX = pixelManagementService.constants.PIXEL_PARTNER_TRANSMISSION_ELEMENT_ID_PREFIX;
         var pixelPartnerTransmissionElementId = PIXEL_PARTNER_TRANSMISSION_ELEMENT_ID_PREFIX
            + pixelPartner.pixelPartnerId;

         var pixelManagementTransmissionsElement = document.getElementById(PIXEL_MANAGEMENT_TRANSMISSIONS_ELEMENT_NAME);
         var pixelPartnerTransmissionElement = document.getElementById(pixelPartnerTransmissionElementId);
         var pixelPartnerTransmissionTemplate = null;
         var pixelPartnerTransmissionMarkup = null;
         function fillElementWithTemplate() {
         	pixelPartnerTransmissionTemplate = pixelPartner.pixelPartnerTransmissionTemplate;
         	if (pixelPartnerTransmissionTemplate != null) {
	            pixelPartnerTransmissionMarkup = gidLib.fillTemplate(pixelPartnerTransmissionTemplate, pixelPartner);
	            jQuery(pixelPartnerTransmissionElement).html(pixelPartnerTransmissionMarkup);
	            pixelPartner.pixelPartnerTransmissionMarkup = pixelPartnerTransmissionMarkup;
         	}
         }
         if (pixelManagementTransmissionsElement == null) {
            /*
             * pixelManagementTransmissionsElement does not
             * exist, so create the element
             */
            var pixelManagementTransmissionsElement = document.createElement('div');
            pixelManagementTransmissionsElement.id = PIXEL_MANAGEMENT_TRANSMISSIONS_ELEMENT_NAME;
            document.body.appendChild(pixelManagementTransmissionsElement);
         }
         if (pixelPartnerTransmissionElement == null) {
            /*
             * pixelPartnerTransmissionElement does not exist,
             * so create the element
             */
            var pixelPartnerTransmissionElement = document.createElement('div');
            pixelPartnerTransmissionElement.id = pixelPartnerTransmissionElementId;
            pixelManagementTransmissionsElement.appendChild(pixelPartnerTransmissionElement);
            if (document.readyState=="complete") {
            	fillElementWithTemplate();
            }
            else {
            	jQuery(window).on('load',fillElementWithTemplate);
            }
         }
      };

</script>


<script type="text/javascript">
if( location.pathname != '/checkout/order.do' ) {

var doubleClickPixelPartner = new pixelManagementService.constructors.AbstractPixelPartner();
pixelManagementService.controller.pixelPartnerManager.setPixelPartnerToPixelPartnerRegistry(doubleClickPixelPartner);

with (doubleClickPixelPartner) {
	isReadyForTransmission = false;
	isWaitReport = false;
	pixelPartnerId = "doubleClickPixelPartner";
	pixelPartnerName = "DoubleClick Iframe Pixel Partner";
	pixelPartnerCookieVarPrefix = "doubleClick";
	pixelPartnerInboundParameterList = [];
	pixelPartnerPersistedParameterList = [];
	pixelPartnerStartDate = "2011/10/20";
	pixelPartnerEndDate = "2020/10/24";

	controller.setPixelPartnerModel = function() {
		
		// Set DoubleClick config parameters for brands		
		this.model.config_gap_us = {
		  confirmation: { type : 'usgap534', cat : 'usgap269'},
		  bag:          { type : 'usgap090', cat : 'usgap542'},
		  browse:       { type : 'usgap090', cat : 'usgap037'},
		  currency : "USD",
		  src : 2840522
		};
		
		this.model.config_br_us = {
		  confirmation: { type : 'usban166', cat : 'usban828'},
		  bag:          { type : 'usban607', cat : 'usban981'},
		  browse:       { type : 'usban607', cat : 'usban884'},
		  currency : "USD",
		  src : 2840522
		};
		
		this.model.config_on_us = {
		  confirmation: { type : 'usold624', cat : 'usold194'},
		  bag:          { type : 'usold987', cat : 'usold108'},
		  browse:       { type : 'usold987', cat : 'usold797'},
		  currency : "USD",
		  src : 2840522
		};
		
		this.model.config_pl_us = {
		  confirmation: { type : 'uspip864', cat : 'uspip652'},
		  bag:          { type : 'uspip685', cat : 'uspip428'},
		  browse:       { type : 'uspip685', cat : 'uspip655'},
		  currency : "USD",
		  src : 2840522
		};
		
		this.model.config_at_us = {
		  confirmation: { type : 'usath604', cat : 'usath169'},
		  bag:          { type : 'usath562', cat : 'usath310'},
		  browse:       { type : 'usath562', cat : 'usath994'},
		  currency : "USD",
		  src : 2840522
		};
		
		// Set up configs for entering brand code
		this.model.configs = { '1': this.model.config_gap_us, '2': this.model.config_br_us, '3' : this.model.config_on_us, '4' : this.model.config_pl_us, '10' : this.model.config_at_us };
		this.model.config = this.model.config_gap_us;
		
		// Set metrics from PixMan library
		var metricsLibrary = pixelManagementService.model.metricsLibrary;
		this.model.enteringBrandCode = ( metricsLibrary.common.enteringBrandCode ) ? metricsLibrary.common.enteringBrandCode : '';
		this.model.pageUrl = ( metricsLibrary.common.pageUrl ) ? encodeURIComponent(metricsLibrary.common.pageUrl) : '';
		this.model.pageName = ( metricsLibrary.common.pageName ) ? encodeURIComponent(metricsLibrary.common.pageName) : '';
		this.model.pageType = ( metricsLibrary.common.pageType ) ? metricsLibrary.common.pageType : '';
		if( this.model.pageType.substr(0,1) == "/" ) { this.model.pageType = this.model.pageType.substr(1); }
		this.model.pageId = ( metricsLibrary.common.pageId ) ? metricsLibrary.common.pageId : '';
		this.model.lastInTID = ( metricsLibrary.common.tid ) ? metricsLibrary.common.tid : '';
		this.model.apCode = ( metricsLibrary.common.ap ) ? metricsLibrary.common.ap : '';
		this.model.isNewCustomer = ( metricsLibrary.common.isNewCustomer ) ? metricsLibrary.common.isNewCustomer : '';
		this.model.visitorFlag = ( metricsLibrary.common.isRecognizedVisitor ) ? metricsLibrary.common.isRecognizedVisitor : '';
		this.model.proto = window.location.protocol;
			
		// Set product variables
		var productList = ( metricsLibrary.shoppingBag.productList ) ? metricsLibrary.shoppingBag.productList : [];
		var skus = "";
		var prices = "";
		var productNames = "";
		var brands = "";
		var prodQty = ( metricsLibrary.shoppingBag.productCount ) ? metricsLibrary.shoppingBag.productCount : 0;
		if (typeof(productList != "undefined") && Object.isArray(productList) && productList.length != 0 && productList[0].skuId != "") {
			var priceArr = [ ];
			var prodNameArr = [ ];
			var prodBrandArr = [ ];
			var skuArr = [ ];
			jQuery.each( productList, function( idx, prod ) {
				priceArr.push( prod.price );
				prodNameArr.push( prod.productName );
				prodBrandArr.push( prod.productBrandCode );
				skuArr.push( prod.skuId );
			});
			prices = priceArr.join('|');
			productNames = prodNameArr.join('|');
			brands = prodBrandArr.join('|');
			skus = skuArr.join('|');
		}
		
		this.model.itemPrices = prices;
		this.model.itemBrands = brands;
		this.model.qty = prodQty;
		this.model.productSkus = skus;
		
	}
	controller.setPixelPartnerTransmissionTemplate = function() {
		var model = this.model;
		
		var shoppingBagUrls = ['/buy/shopping_bag.do','/buy/shopping_bag_delete_item.do','/buy/shopping_bag_save_item.do','/buy/shopping_bag_move_item.do','/buy/edit_shipping_method_bag.do'];
		var metricsLibrary = pixelManagementService.model.metricsLibrary;
		var axel = Math.random() + "";
		var a = axel * 10000000000000;
		
		if (location.pathname == "/checkout/orderConfirm.do") {

			if( this.model.enteringBrandCode ) {
				this.model.config = this.model.configs[ this.model.enteringBrandCode ] || this.model.config;
			}
			
			// Set order metrics
			// Quantity fix
			var orderProductList = ( metricsLibrary.order.productList ) ? metricsLibrary.order.productList : [];
			var orderProductQty = 0;
			if (typeof(orderProductList != "undefined") && Object.isArray(orderProductList) && orderProductList.length != 0 && orderProductList[0].productBusinessId != "") {
				jQuery.each( orderProductList, function( idx, prod ) {
					orderProductQty += parseInt( prod.quantity );
				});
			}
			this.model.qty = orderProductQty.toString();
			
			// Check/set metrics to partner
			this.model.grossMerchDemand = ( metricsLibrary.order.orderTotal ) ? metricsLibrary.order.orderTotal : 0;
			this.model.checkoutBrand = ( metricsLibrary.order.checkoutBrand ) ? metricsLibrary.order.checkoutBrand : '';			
			this.model.shippingZip = ( metricsLibrary.order.shippingZip ) ? encodeURIComponent( metricsLibrary.order.shippingZip ) : ''; 		
			this.model.billingZip = ( metricsLibrary.order.billingZip ) ? encodeURIComponent( metricsLibrary.order.billingZip ) : '';
			this.model.orderId = ( metricsLibrary.order.orderId ) ? metricsLibrary.order.orderId : '';

			this.model.promotionSubTotal = ( metricsLibrary.order.promotionSubTotal ) ? parseFloat( metricsLibrary.order.promotionSubTotal ) : 0;
			this.model.promotionRewardsTotal = ( metricsLibrary.order.promotionRewardsTotal ) ? parseFloat( metricsLibrary.order.promotionRewardsTotal ) : 0;		
			this.model.giftServicesTotal = ( metricsLibrary.order.giftServicesTotal ) ? parseFloat( metricsLibrary.order.giftServicesTotal ) : 0;
			
			this.model.shippingTotal = ( metricsLibrary.order.shippingTotal ) ? parseFloat( metricsLibrary.order.shippingTotal ) : 0;
			
			this.model.taxTotal = ( metricsLibrary.order.taxTotal ) ? parseFloat( metricsLibrary.order.taxTotal ) : 0;
		
			this.model.orderTotal = ( metricsLibrary.order.orderTotal ) ? parseFloat( metricsLibrary.order.orderTotal ) : 0;
				
			// Fixes rounding problem and convert data back to string for passing in URL
			this.model.myShipTotal = parseInt( this.model.shippingTotal*100 );
			this.model.myTaxTotal = parseInt( this.model.taxTotal*100 );
			this.model.myOrderTotal = parseInt( this.model.orderTotal*100 );
			this.model.myTotal = this.model.myOrderTotal - this.model.myShipTotal - this.model.myTaxTotal;
			this.model.myTotal = parseFloat(this.model.myTotal/100);
			this.model.netDemand = this.model.myTotal;
			this.model.grossMerchandise = this.model.netDemand + this.model.promotionSubTotal;
			this.model.grossMerchandise = this.model.grossMerchandise.toString();
			
			this.pixelPartnerTransmissionTemplate = "" + 	
				"<iframe " + 
					"src=\"" + model.proto + "//fls.doubleclick.net/activityi;" + 
					"src=" + model.config.src + ";" + 
					"type=" + model.config.confirmation.type + ";" + 
					"cat=" + model.config.confirmation.cat + ";" + 
					"tran=" + model.enteringBrandCode + ";" + 
					"qty=" + model.qty + ";" + 
					"cost=" + model.grossMerchandise + ";" + 
					"u=" + model.config.currency + ";" + 
					"u1=" + model.productSkus + ";" + 
					"u2=" + model.pageType + ";" + 
					"u3=" + model.pageId + ";" + 
					"u4=" + model.apCode + ";" + 
					"u5=" + model.lastInTID + ";" + 
					"u6=" + model.itemPrices + ";" + 
					"u7=" + model.itemBrands + ";" + 
					"u8=" + model.checkoutBrand + ";" + 
					"u9=" + model.pageName + ";" + 
					"u11=" + model.isNewCustomer + ";" + 
					"u12=" + model.shippingZip + ";" + 
					"u15=" + model.netDemand + ";" + 
					"u16=" + model.promotionSubTotal + ";" + 
					"u17=" + model.taxTotal + ";" + 
					"u18=" + model.shippingTotal + ";" + 
					"ord=" + model.orderId + "?" + 
					"\" width=\"1\" height=\"1\" frameborder=\"0\" scrolling=\"no\" marginheight=\"0\" marginwidth=\"0\"></iframe>";
		}
		else if ( shoppingBagUrls.include( location.pathname ) ) {
			this.model.pageType = "shopping_bag";
			// TO BE MOVED AWAY FROM TEMPLATES WHEN I.T. WORK DONE
			this.pixelPartnerTransmissionTemplate = "" + 
				"<iframe " + 
					"src=\"" + model.proto + "//fls.doubleclick.net/activityi;" + 
					"src=" + model.config.src + ";" + 
					"type=" + model.config.bag.type + ";" + 
					"cat=" + model.config.bag.cat + ";" + 
					"tran=" + model.enteringBrandCode + ";" + 
					"qty=" + model.qty + ";" + 
					"u=" + model.config.currency + ";" + 
					"u1=" + model.productSkus + ";" + 
					"u2=" + model.pageType + ";" + 
					"u3=" + model.pageId + ";" + 
					"u4=" + model.apCode + ";" + 
					"u5=" + model.lastInTID + ";" + 
					"u6=" + model.itemPrices + ";" + 
					"u7=" + model.itemBrands + ";" + 
					"u8=" + model.checkoutBrand + ";" + 
					"u9=" + model.pageName + ";" + 
					"ord=" + a + "?" + 
					"\" width=\"1\" height=\"1\" frameborder=\"0\"><\/iframe>";
				
		}
		else if (window.location.protocol != "https:") {
			// TO BE MOVED AWAY FROM TEMPLATES WHEN I.T. WORK DONE
			this.pixelPartnerTransmissionTemplate = "" + 
				"<iframe " + 
					"src=\"" + model.proto + "//fls.doubleclick.net/activityi;" + 
					"src=" + model.config.src + ";" + 
					"type=" + model.config.browse.type + ";" + 
					"cat=" + model.config.browse.cat + ";" + 
					"tran=" + model.enteringBrandCode + ";" + 
					"u=" + model.config.currency + ";" + 
					"u2=" + model.pageType + ";" + 
					"u3=" + model.pageId + ";" + 
					"u4=" + model.apCode + ";" + 
					"u5=" + model.lastInTID + ";" + 
					"u9=" + model.pageName + ";" + 
					"ord=" + a + "?" + 
					"\" width=\"1\" height=\"1\" frameborder=\"0\"><\/iframe>";
		}
	}
	controller.setCleanUp = function() {
		// alert("setCleanUp() running: pixelPartnerName = " + this.pixelPartnerName);
	}
}

}
</script>

<!-- Range DoubleClick pixel - ap-14 -->
<script type="text/javascript">
if( location.pathname != '/checkout/order.do' ) {

var rangeDoubleClickPixelPartner = new pixelManagementService.constructors.AbstractPixelPartner();
pixelManagementService.controller.pixelPartnerManager.setPixelPartnerToPixelPartnerRegistry(rangeDoubleClickPixelPartner);

with (rangeDoubleClickPixelPartner) {
	isReadyForTransmission = false;
	isWaitReport = false;
	pixelPartnerId = "rangeDoubleClickPixelPartner";
	pixelPartnerName = "Range DoubleClick Pixel Partner";
	pixelPartnerCookieVarPrefix = "rangeDoubleClick";
	pixelPartnerInboundParameterList = [];
	pixelPartnerPersistedParameterList = [];
	pixelPartnerStartDate = "2011/10/20";
	pixelPartnerEndDate = "2020/10/24";

	controller.setPixelPartnerModel = function() {
		
		// Range DFA Configs
		this.model.config_range_gap_us = {
		  confirmation: { type : 'confi102', cat : 'gapco477'},
		  currency : "USD",
		  src : 1890739
		};
		
		this.model.config_range_br_us = {
		  confirmation: { type : 'confi102', cat : 'brcon200'},
		  currency : "USD",
		  src : 1890739
		};
	
		this.model.config_range_on_us = {
		  confirmation: { type : 'confi102', cat : 'oncon155'},
		  currency : "USD",
		  src : 1890739
		};
		
		this.model.config_range_pl_us = {
		  confirmation: { type : 'confi102', cat : 'piper427'},
		  currency : "USD",
		  src : 1890739
		};
		
		this.model.config_range_at_us = {
		  confirmation: { type : 'confi102', cat : 'at_co303'},
		  currency : "USD",
		  src : 1890739
		};

		// Set up configs for entering brand code
		this.model.configs_range = { '1': this.model.config_range_gap_us, '2': this.model.config_range_br_us, '3' : this.model.config_range_on_us, '4' : this.model.config_range_pl_us, '10' : this.model.config_range_at_us };
		this.model.config_range = this.model.config_range_gap_us;
		
		// Set metrics from PixMan library
		var metricsLibrary = pixelManagementService.model.metricsLibrary;
		this.model.enteringBrandCode = ( metricsLibrary.common.enteringBrandCode ) ? metricsLibrary.common.enteringBrandCode : '';
		this.model.pageUrl = ( metricsLibrary.common.pageUrl ) ? encodeURIComponent(metricsLibrary.common.pageUrl) : '';
		this.model.pageName = ( metricsLibrary.common.pageName ) ? encodeURIComponent(metricsLibrary.common.pageName) : '';
		this.model.pageType = ( metricsLibrary.common.pageType ) ? metricsLibrary.common.pageType : '';
		if( this.model.pageType.substr(0,1) == "/" ) { this.model.pageType = this.model.pageType.substr(1); }
		this.model.pageId = ( metricsLibrary.common.pageId ) ? metricsLibrary.common.pageId : '';
		this.model.lastInTID = ( metricsLibrary.common.tid ) ? metricsLibrary.common.tid : '';
		this.model.apCode = ( metricsLibrary.common.ap ) ? metricsLibrary.common.ap : '';
		this.model.isNewCustomer = ( metricsLibrary.common.isNewCustomer ) ? metricsLibrary.common.isNewCustomer : '';
		this.model.visitorFlag = ( metricsLibrary.common.isRecognizedVisitor ) ? metricsLibrary.common.isRecognizedVisitor : '';
		this.model.proto = window.location.protocol;
			
		// Set product variables
		var productList = ( metricsLibrary.shoppingBag.productList ) ? metricsLibrary.shoppingBag.productList : [];
		var skus = "";
		var prices = "";
		var productNames = "";
		var brands = "";
		var prodQty = ( metricsLibrary.shoppingBag.productCount ) ? metricsLibrary.shoppingBag.productCount : 0;
		if (typeof(productList != "undefined") && Object.isArray(productList) && productList.length != 0 && productList[0].skuId != "") {
			var priceArr = [ ];
			var prodNameArr = [ ];
			var prodBrandArr = [ ];
			var skuArr = [ ];
			jQuery.each( productList, function( idx, prod ) {
				priceArr.push( prod.price );
				prodNameArr.push( prod.productName );
				prodBrandArr.push( prod.productBrandCode );
				skuArr.push( prod.skuId );
			});
			prices = priceArr.join('|');
			productNames = prodNameArr.join('|');
			brands = prodBrandArr.join('|');
			skus = skuArr.join('|');
		}
		
		this.model.itemPrices = prices;
		this.model.itemBrands = brands;
		this.model.qty = prodQty;
		this.model.productSkus = skus;
		
	}
	controller.setPixelPartnerTransmissionTemplate = function() {
		var model = this.model;
		
		var shoppingBagUrls = ['/buy/shopping_bag.do','/buy/shopping_bag_delete_item.do','/buy/shopping_bag_save_item.do','/buy/shopping_bag_move_item.do','/buy/edit_shipping_method_bag.do'];
		var metricsLibrary = pixelManagementService.model.metricsLibrary;
		var axel = Math.random() + "";
		var a = axel * 10000000000000;
		var partnerCookieValue = metricsLibrary.common.ap;
		
		if (location.pathname == "/checkout/orderConfirm.do" && partnerCookieValue == "14") {

			if( this.model.enteringBrandCode ) {
				this.model.config_range = this.model.configs_range[ this.model.enteringBrandCode ] || this.model.config_range;
			}
			
			// Set order metrics
			// Quantity fix
			var orderProductList = metricsLibrary.order.productList;
			var orderProductQty = 0;
			if (typeof(orderProductList != "undefined") && Object.isArray(orderProductList) && orderProductList.length != 0 && orderProductList[0].productBusinessId != "") {
				jQuery.each( orderProductList, function( idx, prod ) {
					orderProductQty += parseInt( prod.quantity );
				});
			}
			this.model.qty = orderProductQty.toString();

			this.model.grossMerchDemand = ( metricsLibrary.order.orderTotal ) ? metricsLibrary.order.orderTotal : 0;
			this.model.checkoutBrand = ( metricsLibrary.order.checkoutBrand ) ? metricsLibrary.order.checkoutBrand : '';			
			this.model.shippingZip = ( metricsLibrary.order.shippingZip ) ? encodeURIComponent( metricsLibrary.order.shippingZip ) : ''; 		
			this.model.billingZip = ( metricsLibrary.order.billingZip ) ? encodeURIComponent( metricsLibrary.order.billingZip ) : '';
			this.model.orderId = ( metricsLibrary.order.orderId ) ? metricsLibrary.order.orderId : '';

			this.model.promotionSubTotal = ( metricsLibrary.order.promotionSubTotal ) ? parseFloat( metricsLibrary.order.promotionSubTotal ) : 0;
			this.model.promotionRewardsTotal = ( metricsLibrary.order.promotionRewardsTotal ) ? parseFloat( metricsLibrary.order.promotionRewardsTotal ) : 0;		
			this.model.giftServicesTotal = ( metricsLibrary.order.giftServicesTotal ) ? parseFloat( metricsLibrary.order.giftServicesTotal ) : 0;
			
			this.model.shippingTotal = ( metricsLibrary.order.shippingTotal ) ? parseFloat( metricsLibrary.order.shippingTotal ) : 0;
			
			this.model.taxTotal = ( metricsLibrary.order.taxTotal ) ? parseFloat( metricsLibrary.order.taxTotal ) : 0;
		
			this.model.orderTotal = ( metricsLibrary.order.orderTotal ) ? parseFloat( metricsLibrary.order.orderTotal ) : 0;
						
			// Fixes rounding problem
			this.model.myShipTotal = parseInt( this.model.shippingTotal*100 );
			this.model.myTaxTotal = parseInt( this.model.taxTotal*100 );
			this.model.myOrderTotal = parseInt( this.model.orderTotal*100 );
			this.model.myTotal = this.model.myOrderTotal - this.model.myShipTotal - this.model.myTaxTotal;
			this.model.myTotal = parseFloat(this.model.myTotal/100);
			this.model.netDemand = this.model.myTotal;
			this.model.grossMerchandise = this.model.netDemand + this.model.promotionSubTotal;
			
			this.pixelPartnerTransmissionTemplate = "" + 		
				"<img src=\"https://ad.doubleclick.net/activity;" + 
					"src=" + model.config_range.src + ";" + 
					"type='" + model.config_range.confirmation.type + ";" + 
					"cat=" + model.config_range.confirmation.cat + ";" + 
					"qty=" + model.qty + ";" + 
					"cost=" + model.grossMerchandise + ";" + 
					"u11=;u10=;u9=;u8=" + model.shippingZip + ";" + 
					"u12=" + model.enteringBrandCode + ";" + 
					"u3=" + model.skus + ";" + 
					"u2=" + model.productNames + ";" + 
					"u1=" + model.orderId + ";" + 
					"u7=;u6=;u5=" + model.netDemand + ";" + 
					"u4=" + model.qty + ";" + 
					"ord=" + model.orderId + "?" + 
					"\" width=\"1\" height=\"1\" frameborder=\"0\" ALT=\"\"/>";
			
		}
	}
	controller.setCleanUp = function() {
		// alert("setCleanUp() running: pixelPartnerName = " + this.pixelPartnerName);
	}
}

}
</script>

<!-- Google Ad Services pixel - PixMan - ap=13 -->
<script type="text/javascript">
if( location.pathname != '/checkout/order.do' ) {

var googleAdServicesPixelPartner = new pixelManagementService.constructors.AbstractPixelPartner();
pixelManagementService.controller.pixelPartnerManager.setPixelPartnerToPixelPartnerRegistry(googleAdServicesPixelPartner);

with (googleAdServicesPixelPartner) {
	isReadyForTransmission = false;
	isWaitReport = false;
	pixelPartnerId = "googleAdServicesPixelPartner";
	pixelPartnerName = "Google Ad Services Pixel Partner";
	pixelPartnerCookieVarPrefix = "googleAdServices";
	pixelPartnerInboundParameterList = [];
	pixelPartnerPersistedParameterList = [];
	pixelPartnerStartDate = "2011/01/26";
	pixelPartnerEndDate = "2020/01/26";
	googleAdServicesPixelPartner.model.google_conversion_id = "999883742";
	googleAdServicesPixelPartner.model.google_conversion_label = "2YddCJrhoQIQ3ofk3AM";
	googleAdServicesPixelPartner.model.guid = "ON";

	controller.setPixelPartnerModel = function() {
		// Pull in order subtotal (netDemand)
		var metricsLibrary = pixelManagementService.model.metricsLibrary;
		var orderTotal = ( metricsLibrary.order.orderTotal ) ? parseFloat(metricsLibrary.order.orderTotal) : 0;
		var myShipTotal = ( metricsLibrary.order.shippingTotal ) ? parseInt(metricsLibrary.order.shippingTotal*100) : 0;
		var myTaxTotal = ( metricsLibrary.order.taxTotal ) ? parseInt(metricsLibrary.order.taxTotal*100) : 0;
		var myOrderTotal = parseInt(orderTotal*100);
		var myTotal = myOrderTotal - myShipTotal - myTaxTotal;
		model.netDemand = parseFloat(myTotal/100);
		
		// Pull product list in proper format
		var getFormattedProductListBound = this.controller.helper.getFormattedProductList.bind(this);
		var formattedProductList = getFormattedProductListBound();
		this.model.formattedProductList = formattedProductList;
	}
	controller.setPixelPartnerTransmissionTemplate = function() {
		var model = this.model;
		var metricsLibrary = pixelManagementService.model.metricsLibrary;
		var pageType = ( metricsLibrary.common.pageType ) ? metricsLibrary.common.pageType : '';
		var partnerCookieValue = ( metricsLibrary.common.ap ) ? metricsLibrary.common.ap : '';
		if (pageType != null && pageType != undefined) {
			if (( location.pathname == "/checkout/orderConfirm.do" ) && ( partnerCookieValue == "13" )) {

				this.pixelPartnerTransmissionTemplate = "" + 
					"<img height=\"1\" width=\"1\" style=\"border-style:none;\" alt=\"\" " + 
						"src=\"http://www.googleadservices.com/pagead/conversion/" + model.google_conversion_id + "/?" + 
						"value=" + model.netDemand + "&amp;" + 
						"label=" + model.google_conversion_label + "&amp;" + 
						"guid=" + model.guid + "&amp;" + 
						"oid=" + model.metricsLibrary.order.orderId + "&amp;" + 
						"item=" + model.formattedProductList + "&amp;" + 
						"script=0\" />";
			}
		}
	}
	controller.setCleanUp = function() {
		// alert("setCleanUp() running: pixelPartnerName = " + this.pixelPartnerName);
	}
	controller.helper = new Object();
	// Product list with specific formatting
	controller.helper.getFormattedProductList = function() {
		var productList = null;
		if( location.pathname == "/checkout/orderConfirm.do" ){
			productList = ( this.model.metricsLibrary.order.productList ) ? this.model.metricsLibrary.order.productList : [];
		}
		var formattedProductList = "";
		if( productList != null ) {

			jQuery.each( productList, function( idx, prod ) {
				var pricePer = prod.price/prod.quantity;
				var sku9dig = '';
				if( prod.skuId != null ) sku9dig = prod.skuId.substr(0,9);
				formattedProductList += "("
				formattedProductList += pricePer.toFixed(2) + "*";
				formattedProductList += prod.quantity + "*";
				formattedProductList += sku9dig + "*";
				formattedProductList += "null*";
				formattedProductList += sku9dig + ")";
			});
		}
		return formattedProductList;
	}
}

}
</script>

<!-- BrightTag iframe -->
<script type="text/javascript">
if( location.pathname != '/checkout/order.do' ) {

var brightTagPixelPartner = new pixelManagementService.constructors.AbstractPixelPartner();
pixelManagementService.controller.pixelPartnerManager.setPixelPartnerToPixelPartnerRegistry(brightTagPixelPartner);

with (brightTagPixelPartner) {
	isReadyForTransmission = false;
	isWaitReport = false;
	pixelPartnerId = "brightTagPixelPartner";
	pixelPartnerName = "Bright Tag Pixel Partner";
	pixelPartnerCookieVarPrefix = "brightTag";
	// 'sid' = TrialPay: maps to v1
	pixelPartnerInboundParameterList = ['sid'];
	pixelPartnerPersistedParameterList = ['sid'];
	pixelPartnerStartDate = "2011/07/19";
	pixelPartnerEndDate = "2020/07/19";
	// BrightTag site id - region-specific (US, CA, EU)
	brightTagPixelPartner.model.brighttag_site_id = "NaJ7y9Z";
	// Currensy - u
	brightTagPixelPartner.model.currencyType = "USD";
	
	controller.getPixmanElement = function (variableName, pixManValue, suffix){
		var returnKeyPair="";
		if(suffix==null || suffix==undefined){
			suffix="";
		}
		if(pixManValue!=null && pixManValue!=undefined && pixManValue!=""){
			returnKeyPair = variableName + "=" + pixManValue + suffix; 
		}
		else{
			returnKeyPair="";
		}
		return returnKeyPair;
    },

	controller.setPixelPartnerModel = function() {
		
		// Set BT variables from metricsLibrary
		var metricsLibrary = pixelManagementService.model.metricsLibrary;
		
		// Declare dynamic vendor metrics
		this.model.vendorMetrics = { };
		
		// TrialPay : AP=15 conditional; sid = v1
		this.model.vendorMetrics.trialPay = { }
		this.model.vendorMetrics.trialPay.sid = controller.getCookieVar("sid");

		// Convertro Identifier - v2
		var convertroIdGen = function() {
			var newCSid = '';
			if( gidLib.getCookieVar('pixelManagementPersist','cvo_client_sid1') == '' ) {
				// If brandCvoSid in URL, this was redirect from SearchDex, set cookie to that
				if( gidLib.getQuerystringParam('brandCvoSid', true) != '' ) {
					newCSid = gidLib.getQuerystringParam('brandCvoSid', true);
				}
				// Else generate SID
				else {
					var SID_DIGITS = '23456789ABCDEFGHJKMNPQRSTUVWXYZ'.split('');
					var SID_LENGTH = 12;
					
					// return a randomly generated 12 character SID
					var generateSid = function () {
						var xor_array = [];
						if (window.crypto && window.crypto.getRandomValues && window.Uint8Array ) {
							xor_array = new Uint8Array(SID_LENGTH);
							window.crypto.getRandomValues(xor_array);
						}
						else {
							var i = SID_LENGTH;
							while (i--) xor_array[i] = 0;
						}
						var sid = '';
						var i = SID_LENGTH;
						while (i--) {
							sid = sid + SID_DIGITS[(256*Math.random() ^ xor_array[i]) % SID_DIGITS.length];
						}
						return sid;
					}
					// Generate and set to cookie
					newCSid = generateSid();
				}
				gidLib.setCookieVar('pixelManagementPersist','cvo_client_sid1', newCSid );
			}
			else {
				newCSid = gidLib.getCookieVar('pixelManagementPersist','cvo_client_sid1');
			}
			return newCSid;
		}
		this.model.convertroSid = convertroIdGen();
		
		// BROWSE/BAG/ORDER CONF variables
		
		// Total qty in cart - qty
		if( location.pathname == "/checkout/orderConfirm.do" ) {
			var orderProductList = ( metricsLibrary.order.productList ) ? metricsLibrary.order.productList : [];
			var orderProductQty = 0;
			if (typeof(orderProductList != "undefined") && Object.isArray(orderProductList) && orderProductList.length != 0 && orderProductList[0].productBusinessId != "") {
				jQuery.each( orderProductList, function( idx, prod ) {
					orderProductQty += parseInt( prod.quantity );
				});
			}
			this.model.totalQty = orderProductQty.toString();
		}
		else {
			this.model.totalQty = ( metricsLibrary.shoppingBag.productCount ) ? metricsLibrary.shoppingBag.productCount : 0;
		}
		
		// Entering brand code  - tran - ONLY set if PARTNER cookie set
		this.model.enteringBrandCode = ( metricsLibrary.common.enteringBrandCode ) ? metricsLibrary.common.enteringBrandCode : '';
		
		// Product level metrics
		if( location.pathname == "/checkout/orderConfirm.do" && metricsLibrary.order.productListForCJ ) {
			var productList = ( metricsLibrary.order.productListForCJ ) ? metricsLibrary.order.productListForCJ : [];
		}
		else {
			var productList = ( metricsLibrary.shoppingBag.productList ) ? metricsLibrary.shoppingBag.productList : [];
		}
		// Product SKUs in Cart - pipe-delimited - u1
		var skus = "";
		// Product Item Prices in Cart - pipe-delimited - u6
		var prices = "";
		// Product Item Brands in Cart - pipe-delimited - u7
		var brands = "";
		// Product Item Quantities in Cart - pipe-delimited - u19
		var prodQty = "";
		// Gross Net Demand by Brand - pipe-delimited - u52
		var grossNetDemand = '';
		
		if( typeof(productList != "undefined") && Object.isArray(productList) && productList.length != 0 && productList[0].skuDescription != "" ) {
			var skuArr = [ ];
			var priceArr = [ ];
			var brandArr = [ ];
			var qtyArr = [ ];
			var demandArr = [ ];
			jQuery.each( productList, function( idx, prod ) {
				skuArr.push( prod.skuId );
				priceArr.push( prod.price );
				brandArr.push( prod.productBrandCode );
				qtyArr.push( prod.quantity );

				// Net demand calculation
				var prodPrice = prod.price/prod.quantity;
				var lineBrandPlccBrandProductLevel = 0;
				var orderLevelDiscountProductLevel = 0;
				var plccDiscountsProductLevel = 0;
				var netDemand = 0;
				
				if( prod.lineBrandPlccBrandProductLevel ) lineBrandPlccBrandProductLevel = prod.lineBrandPlccBrandProductLevel/prod.quantity;
				if( prod.orderLevelDiscountProductLevel ) orderLevelDiscountProductLevel = prod.orderLevelDiscountProductLevel/prod.quantity;
				if( prod.plccDiscountsProductLevel ) plccDiscountsProductLevel = prod.plccDiscountsProductLevel/prod.quantity;
				
				netDemand = prodPrice - ( lineBrandPlccBrandProductLevel + orderLevelDiscountProductLevel + plccDiscountsProductLevel );
				demandArr.push( netDemand.toFixed(2) );

			});
			// Set SKUs, Item Prices, Item Brands, Item Quantities
			skus = skuArr.join('|');
			prices = priceArr.join('|');
			brands = brandArr.join('|');
			prodQty = qtyArr.join('|');
			grossNetDemand = demandArr.join('|');
		}
		this.model.itemPrices = prices;
		this.model.itemBrands = brands;
		this.model.prodQty = prodQty;
		this.model.productSkus = skus;
		this.model.productNetDemand = grossNetDemand;
		
		// Page Type - u2
		this.model.pageType = ( metricsLibrary.common.pageType ) ? metricsLibrary.common.pageType : '';
		if( this.model.pageType.substr(0,1) == "/" ) { this.model.pageType = this.model.pageType.substr(1); }

		// Page ID - u3 - CID, Outfit ID or Product ID
		this.model.pageId = ( metricsLibrary.common.pageId ) ? metricsLibrary.common.pageId : '';
		if( metricsLibrary.common.pageName && ( location.pathname == '/' || location.pathname == '/browse/home.do' ) ) {
			// Fix CIDs not being pulled on home page content
			if( metricsLibrary.common.pageName.substr( 0, 2 ) == 'gp' ) { this.model.pageId = '5058'; }
			else if( metricsLibrary.common.pageName.substr( 0, 2 ) == 'on' ) { this.model.pageId = '5151'; }
			else if( metricsLibrary.common.pageName.substr( 0, 2 ) == 'br' ) { this.model.pageId = '5001'; }
			else if( metricsLibrary.common.pageName.substr( 0, 2 ) == 'bg' ) { this.model.pageId = '15956'; }
			else if( metricsLibrary.common.pageName.substr( 0, 2 ) == 'at' ) { this.model.pageId = '46650'; }			
		}
		
		// AP (Affiliate Partner) Value - u4 - ONLY set if PARTNER cookie set
		this.model.apCode = ( metricsLibrary.common.ap ) ? metricsLibrary.common.ap : '';
		
		// Last in TID - u5 - Last tracking ID recieved; ONLY set if PARTNER cookie set
		this.model.lastInTID = ( metricsLibrary.common.tid ) ? metricsLibrary.common.tid : '';
		
		// Page Name - u9 - Omniture Page Name
		this.model.pageName = ( metricsLibrary.common.pageName ) ? encodeURIComponent( metricsLibrary.common.pageName ) : '';
		
		// Page URL - u10 - Full page URL
		this.model.pageURL = ( metricsLibrary.common.pageUrl ) ? encodeURIComponent( metricsLibrary.common.pageUrl ) : '';
		
		// Is New Customer flag - u11
		this.model.isNewCustomer = ( metricsLibrary.common.isNewCustomer ) ? metricsLibrary.common.isNewCustomer : '';

		// Recognized Visitor flah - u14
		this.model.isRecognizedVisitor = ( metricsLibrary.common.isRecognizedVisitor ) ? metricsLibrary.common.isRecognizedVisitor : '';
		
		// Unknown shopper ID - u20 - GID unknown shopper ID
		// "988B422DA188A5C5DFCD32567DDBA4ED|||"
		if( gidLib.getCookie('unknownShopperId') != 0  ) {
			this.model.unknownShopperID = gidLib.getCookie('unknownShopperId');
			this.model.unknownShopperID = this.model.unknownShopperID.substr( 0, this.model.unknownShopperID.indexOf('|') );
		}
		else {
			this.model.unknownShopperID = '';
		}

		// Customer ID - u21 - GID KNOWN customer ID
		// "40895368|||"
		if( gidLib.getCookie('customerId') != 0  ) {
			this.model.customerID = gidLib.getCookie('customerId');
			this.model.customerID = this.model.customerID.substr( 0, this.model.customerID.indexOf('|') );
		}
		else {
			this.model.customerID = '';
		}
		
		// DotomiToken - u26 - 22-25 taken in EU/JP - to merge in
		this.model.dotomiToken = ( metricsLibrary.common.dotomiToken ) ? metricsLibrary.common.dotomiToken : '';

		// DI ID - u27 - DI/Email ID - pulled from mktUniversalPersist
		this.model.diID = ( gidLib.getCookieVar('mktUniversalPersist','DI') != '' ) ? gidLib.getCookieVar('mktUniversalPersist','DI') : '';
		
		// Encrypted email cipher - u40
		this.model.encryptionCipher = ( metricsLibrary.common.cipher ) ? metricsLibrary.common.cipher : '';
		
		// Encrypted email vector - u41
		this.model.encryptionVector = ( metricsLibrary.common.vector ) ? metricsLibrary.common.vector : '';

		// Encrypted email string - u42
		this.model.encryptedEmail = ( metricsLibrary.common.userEmailEncrypt ) ? metricsLibrary.common.userEmailEncrypt : '';
	
		// Mobile vs desktop user - u44
		// GID mobile detection includes: iPhone, iPod, Android Mobile ONLY
		this.model.mobileVsDesktop = 'desktop';
		
		var userAgentCheck = navigator.userAgent.toLowerCase();
		if( /iphone|ipod/i.test( userAgentCheck ) || ( userAgentCheck.indexOf('android') > -1 && userAgentCheck.indexOf('mobile') > -1 ) ) {
			this.model.mobileVsDesktop = 'mobile';	
		}

		// Referring Page URL - u48
		this.model.referringPageURL = ( document.referrer ) ? encodeURIComponent( document.referrer ) : '';
		
		// Encrypted Customer ID - u53
		this.model.encryptedCustId = ( metricsLibrary.common.customerIdEncrypted ) ? metricsLibrary.common.customerIdEncrypted : '';
		
		// SHA-1 hashed email address - u54
		this.model.sha1EmailAddress = ( metricsLibrary.common.userEmailMMEncrypt ) ? metricsLibrary.common.userEmailMMEncrypt : '';

		// ORDER CONF ONLY variables
		if (location.pathname == "/checkout/orderConfirm.do") {

			// Page Type fix on order conf page
			this.model.pageType = 'orderConfirm';

			// Order ID - ord - Gap.com order ID
			this.model.orderId = ( metricsLibrary.order.orderId ) ? metricsLibrary.order.orderId : '';
			
			this.model.promotionSubTotal = ( metricsLibrary.order.promotionSubTotal ) ? parseFloat( metricsLibrary.order.promotionSubTotal ) : 0;
			this.model.promotionRewardsTotal = ( metricsLibrary.order.promotionRewardsTotal ) ? parseFloat( metricsLibrary.order.promotionRewardsTotal ) : 0;
			this.model.giftServicesTotal = ( metricsLibrary.order.giftServicesTotal ) ? parseFloat( metricsLibrary.order.giftServicesTotal ) : 0;
			this.model.shippingTotal = ( metricsLibrary.order.shippingTotal ) ? parseFloat( metricsLibrary.order.shippingTotal ) : 0;
			this.model.taxTotal = ( metricsLibrary.order.taxTotal ) ? parseFloat( metricsLibrary.order.taxTotal ) : 0;
			this.model.orderTotal = ( metricsLibrary.order.orderTotal ) ? parseFloat( metricsLibrary.order.orderTotal ) : 0;
				
			// Fixes rounding problem
			this.model.myShipTotal = parseInt( this.model.shippingTotal*100 );
			this.model.myTaxTotal = parseInt( this.model.taxTotal*100 );
			this.model.myOrderTotal = parseInt( this.model.orderTotal*100 );
			this.model.myTotal = this.model.myOrderTotal - this.model.myShipTotal - this.model.myTaxTotal;
			this.model.myTotal = parseFloat(this.model.myTotal/100);

			// Total Merch (ie. Net Demand) - u15 - Order total - shipping - tax
			this.model.netDemand = this.model.myTotal;

			// Total Merch + promo dolloers (ie. Gross Merch Demand) - cost - Order total - shipping - tax + promo dollares
			this.model.grossMerchandise = this.model.netDemand + this.model.promotionSubTotal;
			
			// Checkout Brand - u8 - brand a user checks out on
			this.model.checkoutBrand = ( metricsLibrary.order.checkoutBrand ) ? metricsLibrary.order.checkoutBrand : '';
			
			// Shipping & Billing zips - u12, u13 respectively - user zip codes
			this.model.shippingZip = ( metricsLibrary.order.shippingZip ) ? metricsLibrary.order.shippingZip : '';
			this.model.billingZip = ( metricsLibrary.order.billingZip ) ? metricsLibrary.order.billingZip : '';
			
			// Promotional dollars - u16 - coupon dollars
			this.model.promoDollars = this.model.promotionSubTotal;
			
			// Tax - u17 - tax amount
			this.model.tax = this.model.taxTotal;
			
			// Shipping - u18 - total shipping charged
			this.model.shipping = this.model.shippingTotal;

			// Encrypted billing address string - u43
			this.model.encryptedBillingAddress = ( metricsLibrary.order.billingAddressEncrypt ) ? metricsLibrary.order.billingAddressEncrypt : '';
		}
		jQuery(document).trigger('brightTagPixelPartner:dataModelLoaded');
		
	}
	controller.setPixelPartnerTransmissionTemplate = function() {
		var shoppingBagUrls = ['/buy/shopping_bag.do','/buy/shopping_bag_delete_item.do','/buy/shopping_bag_save_item.do','/buy/shopping_bag_move_item.do','/buy/edit_shipping_method_bag.do'];
		var model = this.model;

		// Order conf page fire
		if( location.pathname == "/checkout/orderConfirm.do" ) {
			this.pixelPartnerTransmissionTemplate = "" + 	
				"<iframe src=\"//s.thebrighttag.com/tag?" + 
					"site=" + model.brighttag_site_id + "&" + 
					"mode=iframe&" + 
					"ord=" + model.orderId + "&" + 
					"qty=" + model.totalQty + "&" + 
					"cost=" + model.grossMerchandise + "&" + 
					"tran=" + model.enteringBrandCode + "&" + 
					"u=" + model.currencyType + "&" + 
					"u1=" + model.productSkus + "&" + 
					"u2=" + model.pageType + "&" + 
					"u3=" + model.pageId + "&" + 
					"u4=" + model.apCode + "&" + 
					"u5=" + model.lastInTID + "&" + 
					"u6=" + model.itemPrices + "&" + 
					"u7=" + model.itemBrands + "&" + 
					"u8=" + model.checkoutBrand + "&" + 
					"u9=" + model.pageName + "&" + 
					"u10=" + model.pageURL + "&" + 
					"u11=" + model.isNewCustomer + "&" + 
					"u12=" + model.shippingZip + "&" + 
					"u13=" + model.billingZip + "&" + 
					"u14=" + model.isRecognizedVisitor + "&" + 
					"u15=" + model.netDemand + "&" + 
					"u16=" + model.promoDollars + "&" + 
					"u17=" + model.tax + "&" + 
					"u18=" + model.shipping + "&" + 
					"u19=" + model.prodQty + "&" + 
					"u20=" + model.unknownShopperID + "&" + 
					"u21=" + model.customerID + "&" + 
					this.controller.getPixmanElement("u26",model.dotomiToken,"&") + 
					"u27=" + model.diID + "&" + 
					"u40=" + model.encryptionCipher + "&" + 
					"u41=" + model.encryptionVector + "&" + 
					"u42=" + model.encryptedEmail + "&" + 
					"u43=" + model.encryptedBillingAddress + "&" + 
					"u44=" + model.mobileVsDesktop + "&" + 
					"u48=" + model.referringPageURL + "&" + 
					"u52=" + model.productNetDemand + "&" + 
					"u53=" + model.encryptedCustId + "&" + 
					"u54=" + model.sha1EmailAddress + "&" + 
					
					// Vendor specific metrics				
					"v1=" + model.vendorMetrics.trialPay.sid + "&" + 
					"v2=" + model.convertroSid + "&" + 
					
					"\" width=\"1\" height=\"1\" frameborder=\"0\" scrolling=\"no\" marginheight=\"0\" marginwidth=\"0\"></iframe>";		
		}
				
		// Other non-secure pages
		else if( window.location.protocol != "https:" || shoppingBagUrls.include( location.pathname ) ) {
			this.pixelPartnerTransmissionTemplate = "" + 
				"<iframe src=\"//s.thebrighttag.com/tag?" + 
					"site=" + model.brighttag_site_id + "&" + 
					"mode=iframe&" + 
					"qty=" + model.totalQty + "&" + 
					"tran=" + model.enteringBrandCode + "&" +
					"u=" + model.currencyType + "&" + 
					"u1=" + model.productSkus + "&" + 
					"u2=" + model.pageType + "&" + 
					"u3=" + model.pageId + "&" +
					"u4=" + model.apCode + "&" + 
					"u5=" + model.lastInTID + "&" + 
					"u6=" + model.itemPrices + "&" + 
					"u7=" + model.itemBrands + "&" + 
					"u9=" + model.pageName + "&" + 
					"u10=" + model.pageURL + "&" + 
					"u11=" + model.isNewCustomer + "&" + 
					"u14=" + model.isRecognizedVisitor + "&" + 
					"u19=" + model.prodQty + "&" + 
					"u20=" + model.unknownShopperID + "&" + 
					"u21=" + model.customerID + "&" + 
					this.controller.getPixmanElement("u26",model.dotomiToken,"&") +
					"u27=" + model.diID + "&" + 
					"u40=" + model.encryptionCipher + "&" + 
					"u41=" + model.encryptionVector + "&" + 
					"u42=" + model.encryptedEmail + "&" + 
					"u44=" + model.mobileVsDesktop + "&" + 
					"u48=" + model.referringPageURL + "&" + 
					"u52=" + model.productNetDemand + "&" + 
					"u53=" + model.encryptedCustId + "&" + 
					"u54=" + model.sha1EmailAddress + "&" + 
					
					// Vendor specific metrics				
					"v1=" + model.vendorMetrics.trialPay.sid + "&" + 
					"v2=" + model.convertroSid + "&" + 
					
					"\" width=\"1\" height=\"1\" frameborder=\"0\" scrolling=\"no\" marginheight=\"0\" marginwidth=\"0\"></iframe>";

		}
		// Profile/account pages for Gap
		else if (location.pathname == "/profile/info.do" && ( location.search.indexOf('cid=48755') > -1 || location.search.indexOf('cid=53959') > -1 || location.search.indexOf('cid=82640') > -1 ) ) {
			this.pixelPartnerTransmissionTemplate = "" + 
				"<iframe src=\"//s.thebrighttag.com/tag?" + 
					"site=" + model.brighttag_site_id + "&" + 
					"mode=iframe&" + 
					"qty=" + model.totalQty + "&" + 
					"tran=" + model.enteringBrandCode + "&" +
					"u=" + model.currencyType + "&" + 
					"u1=" + model.productSkus + "&" + 
					"u2=" + model.pageType + "&" + 
					"u3=" + model.pageId + "&" +
					"u4=" + model.apCode + "&" + 
					"u5=" + model.lastInTID + "&" + 
					"u6=" + model.itemPrices + "&" + 
					"u7=" + model.itemBrands + "&" + 
					"u9=" + model.pageName + "&" + 
					"u10=" + model.pageURL + "&" + 
					"u11=" + model.isNewCustomer + "&" + 
					"u14=" + model.isRecognizedVisitor + "&" + 
					"u19=" + model.prodQty + "&" + 
					"u20=" + model.unknownShopperID + "&" + 
					"u21=" + model.customerID + "&" + 
					this.controller.getPixmanElement("u26",model.dotomiToken,"&") +
					"u27=" + model.diID + "&" + 
					"u40=" + model.encryptionCipher + "&" + 
					"u41=" + model.encryptionVector + "&" + 
					"u42=" + model.encryptedEmail + "&" + 
					"u44=" + model.mobileVsDesktop + "&" + 
					"u48=" + model.referringPageURL + "&" + 
					"u53=" + model.encryptedCustId + "&" + 
					"u54=" + model.sha1EmailAddress + "&" + 
					
					// Vendor specific metrics				
					"v1=" + model.vendorMetrics.trialPay.sid + "&" + 
					"v2=" + model.convertroSid + "&" + 
					
					"\" width=\"1\" height=\"1\" frameborder=\"0\" scrolling=\"no\" marginheight=\"0\" marginwidth=\"0\"></iframe>";
		}
	}
	controller.setCleanUp = function() {
		// alert("setCleanUp() running: pixelPartnerName = " + this.pixelPartnerName);
	}
	controller.helper = new Object();
}

}
</script>

<div id="doubleClickPixelDiv"></div>
<div id="partnerPixelDiv"></div>

<script type="text/javascript">

// WCD in-page event BrightTag service - Quicklook, QL Add To Bag, Find It Now, Reserve In Store, Add To Bag
if( location.pathname == '/browse/product.do' || location.pathname == '/browse/outfit.do' || location.pathname == '/browse/category.do' || location.pathname == '/browse/categorySearch.do' || location.pathname == '/browse/search.do' ) {

	var wcdBrightTagService = {
		model: {
			supportedEvents: ['FindItNow','ReserveInStore','AddToBag'],
			btFrameId: 'wcdBrightTagServiceFrame',
			brFrameUrl: '',
			btDataModel: '',
			btFrameExists: false,
			btLoadVariantCalls: 0
		},
  	init: function() {
			// Copy data model over from existing BT tag
			if( window["brightTagPixelPartner"] != null ) {
				if( brightTagPixelPartner.model ) {
					wcdBrightTagService.model.btDataModel = {};
					jQuery.extend( wcdBrightTagService.model.btDataModel, brightTagPixelPartner.model );
				}
			}
		},
		controller: {
			// Creates dynamic BT frame if not present
			createBrightTagFrame: function() {
				var model = wcdBrightTagService.model;
				if( jQuery('#' + model.btFrameId + ' iframe').length == 0 ) {
					jQuery('body').append('<div id="' + model.btFrameId + '"><iframe width="1" height="1" frameborder="0" scrolling="no" marginheight="0" marginwidth="0"></iframe></div>');
					model.btFrameExists = true;
				}
			},
			updateBrightTagFrame: function() {
				var model = wcdBrightTagService.model;
				if( model.btFrameUrl != '' && jQuery('#' + model.btFrameId + ' iframe').length > 0 ) {
					jQuery('#' + model.btFrameId + ' iframe' ).attr('src', model.btFrameUrl );
				}
			},
			fireBrightTag: function( eventName, eventModifier ) {
				var wcdBTRef = wcdBrightTagService;
				var model = wcdBTRef.model;
				var btDataModel = model.btDataModel;
				var controller = wcdBTRef.controller;
				var btFrameUrl = '';
				// Fire BrightTag for supported events only
				if( jQuery.inArray( eventName, model.supportedEvents ) > -1 && btDataModel != '' ) {
					if( ! model.btFrameExists ) {
						controller.createBrightTagFrame();
					}
					
					btDataModel.pageName = brightTagPixelPartner.model.pageName;
					if( btDataModel.pageName && btDataModel.pageName.indexOf( eventName ) == -1 ) {
						btDataModel.pageName += '%3A' + eventName;
					}
					
					// Update Add to Bag events to pass price of product added to bag
					if( eventName == 'AddToBag' && eventModifier == 'outfitPage' ) {
						btDataModel.addToBagSellPrice = '';
						btDataModel.addToBagProductSku = '';
						btDataModel.addToBagOutfitSkus = '';

						if( outfitPage.arrayProducts != null && outfitPage.arrayProducts.length > 0 ) {
							var currentOutfitProductColor = '';
							var currentOutfitProductColorObj = null;
							var currentOutfitProductSku = '';
							
							for( var i=0; i < outfitPage.arrayProducts.length; i++ ) {
								if( outfitPage.arrayProducts[i].selectedToAdd ) {
									currentOutfitProductColor = '';
									currentOutfitProductColorObj = null;
									currentOutfitProductSku = '';
									
									currentOutfitProductColor = outfitPage.arrayProducts[i].activeColor;
									currentOutfitProductColorObj = outfitPage.arrayProducts[i].objV.arrayVariantStyleColors[ currentOutfitProductColor ];
									if( currentOutfitProductColorObj.price ) {
										btDataModel.addToBagSellPrice += currentOutfitProductColorObj.price + '|'
									}
									if( currentOutfitProductColorObj.strColorCodeId ) {
										btDataModel.addToBagOutfitSkus += currentOutfitProductColorObj.strColorCodeId + '|'
									}
								}
							}
							if( btDataModel.addToBagSellPrice != '' && btDataModel.addToBagSellPrice.substr( btDataModel.addToBagSellPrice.length - 1 ) == '|' ) {
								btDataModel.addToBagSellPrice = btDataModel.addToBagSellPrice.substr( 0, btDataModel.addToBagSellPrice.length - 1 );
							}
							if( btDataModel.addToBagOutfitSkus != '' && btDataModel.addToBagOutfitSkus.substr( btDataModel.addToBagOutfitSkus.length - 1 ) == '|' ) {
								btDataModel.addToBagOutfitSkus = btDataModel.addToBagOutfitSkus.substr( 0, btDataModel.addToBagOutfitSkus.length - 1 );
							}
						}
					}
										
					// Set the iframe URL and fire
					btFrameUrl = '//s.thebrighttag.com/tag?' + 
						'site=' + btDataModel.brighttag_site_id + '&' + 
						'mode=iframe&' + 
						'qty=' + btDataModel.totalQty + '&' + 
						'tran=' + btDataModel.enteringBrandCode + '&' + 
						'u=' + btDataModel.currencyType + '&' + 
						'u1=' + btDataModel.productSkus + '&' + 
						'u2=' + btDataModel.pageType + '&' + 
						'u3=' + btDataModel.pageId + '&' + 
						'u4=' + btDataModel.apCode + '&' + 
						'u5=' + btDataModel.lastInTID + '&' + 
						'u6=' + btDataModel.itemPrices + '&' + 
						'u7=' + btDataModel.itemBrands + '&' + 
						'u9=' + btDataModel.pageName + '&' + 
						'u10=' + btDataModel.pageURL + '&' + 
						'u11=' + btDataModel.isNewCustomer + '&' + 
						'u14=' + btDataModel.isRecognizedVisitor + '&' + 
						'u19=' + btDataModel.prodQty + '&' + 
						'u20=' + btDataModel.unknownShopperID + '&' + 
						'u21=' + btDataModel.customerID + '&' + 
						brightTagPixelPartner.controller.getPixmanElement('u26', btDataModel.dotomiToken, '&') +
						'u27=' + btDataModel.diID + '&';
						
					if( location.pathname == '/browse/product.do' || eventName == 'QuickLook' || eventName == 'AddToQLBag' || eventName == 'LoadVariantProduct' || eventName == 'LoadVariantQLProduct' ) {
						btFrameUrl += 'u28=' + btDataModel.productName + '&' + 
						'u29=' + btDataModel.productBrandCode + '&' + 
						'u30=' + btDataModel.productPrice + '&' + 
						'u31=' + btDataModel.productImage + '&' + 
						'u32=' + btDataModel.productSizesInStock + '&' + 
						'u33=' + btDataModel.productSizesOutOfStock + '&' + 
						'u34=' + btDataModel.productVendorName + '&' + 
						'u35=' + btDataModel.productOriginalPrice + '&';
					}
					if( ( eventName == 'AddToBag' || eventName == 'AddToQLBag' ) && btDataModel.addToBagSellPrice ) {
						btFrameUrl += 'u39=' + btDataModel.addToBagSellPrice + '&';
					}
					
					// Mobile vs desktop 
					btFrameUrl += 'u44=' + btDataModel.mobileVsDesktop + '&';

					// Outfit SKUs added to bag
					if( location.pathname == '/browse/outfit.do' && eventName == 'AddToBag' && btDataModel.addToBagOutfitSkus ) {
						btFrameUrl += 'u47=' + btDataModel.addToBagOutfitSkus + '&';
					}
					
					// Referring URL
					btFrameUrl += 'u48=' + btDataModel.referringPageURL + '&';
					if( typeof btDataModel.currentVariantId != 'undefined' ) {
						btFrameUrl += 'u49=' + btDataModel.currentVariantId + '&';
					}

					// Add-to-bag price
					if( ( eventName == 'AddToBag' || eventName == 'AddToQLBag' ) && btDataModel.addToBagProductSku ) {
						btFrameUrl += 'u51=' + btDataModel.addToBagProductSku + '&';
					}
					
					model.btFrameUrl = btFrameUrl;

					controller.updateBrightTagFrame();
				}
			},
			fireNewBrightTag: function( eventName, data ) {
				
				var wcdBTRef = wcdBrightTagService;
				var model = wcdBTRef.model;
				var btDataModel = model.btDataModel;
				var controller = wcdBTRef.controller;
				var btFrameUrl = '';
				// Fire BrightTag for supported events only
				if( jQuery.inArray( eventName, model.supportedEvents ) > -1 && btDataModel != '' ) {
					if( ! model.btFrameExists ) {
						controller.createBrightTagFrame();
					}
					
					btDataModel.pageName = brightTagPixelPartner.model.pageName;
					if( btDataModel.pageName && btDataModel.pageName.indexOf( eventName ) == -1 ) {
						btDataModel.pageName += '%3A' + eventName;
					}
					
					// Update Add to Bag events to pass price of product added to bag
					if( eventName == 'AddToBag') {
						var m = data.inlineBagModelData;
						btDataModel.addToBagSellPrice = '';
						btDataModel.addToBagProductSku = '';
						btDataModel.addToBagOutfitSkus = '';

						// Product SKU added-to-bag - u51
						var skuId = m.inlineBagItems[0].sku;
						btDataModel.addToBagProductSku = skuId;

						// Product add-to-bag price - u39
						// gets the total price added to bag including multiple quantities
						var addToBagPrice = m.inlineBagItems[0].unlocalizedCurrentPrice;
						btDataModel.addToBagSellPrice = addToBagPrice;
					}
					
					// Update Add to Bag event to pass full product ID in page URL
					// Update URL if there's no CID in it
					if( gidLib.getQuerystringParam('cid') == '' && btDataModel.pageURL.indexOf('cid') == -1 && gap.pageProductData.categoryId ) {
						btDataModel.pageURL += '%26cid%3D' + gap.pageProductData.categoryId;
					}
					
					// Parse URL and replace product ID with selected
					var currentProductId = btDataModel.pageURL;
					currentProductId = currentProductId.substr( currentProductId.indexOf('pid%3D') + 6 );
					if( currentProductId.indexOf('%26') > -1 ) {
						currentProductId = currentProductId.substr( 0, currentProductId.indexOf('%26') );
					}
					var arrAddedProductURL = btDataModel.pageURL.split( currentProductId );
					var addedProductURL = '';
					if( arrAddedProductURL.length > 0 ) {
						addedProductURL = arrAddedProductURL[0] + skuId;
						if( arrAddedProductURL.length > 1 ) { addedProductURL += arrAddedProductURL[1]; }
					}
					
					btDataModel.pageURL = addedProductURL;
						
					// Need to Add Variant Id?
					// btDataModel.currentVariantId = currentVariantId;
					
					//console.log('data dump');
					//console.log( btDataModel );
					
					// Set the iframe URL and fire
					btFrameUrl = '//s.thebrighttag.com/tag?' + 
						'site=' + btDataModel.brighttag_site_id + '&' + 
						'mode=iframe&' + 
						'qty=' + btDataModel.totalQty + '&' + 
						'tran=' + btDataModel.enteringBrandCode + '&' + 
						'u=' + btDataModel.currencyType + '&' + 
						'u1=' + btDataModel.productSkus + '&' + 
						'u2=' + btDataModel.pageType + '&' + 
						'u3=' + btDataModel.pageId + '&' + 
						'u4=' + btDataModel.apCode + '&' + 
						'u5=' + btDataModel.lastInTID + '&' + 
						'u6=' + btDataModel.itemPrices + '&' + 
						'u7=' + btDataModel.itemBrands + '&' + 
						'u9=' + btDataModel.pageName + '&' + 
						'u10=' + btDataModel.pageURL + '&' + 
						'u11=' + btDataModel.isNewCustomer + '&' + 
						'u14=' + btDataModel.isRecognizedVisitor + '&' + 
						'u19=' + btDataModel.prodQty + '&' + 
						'u20=' + btDataModel.unknownShopperID + '&' + 
						'u21=' + btDataModel.customerID + '&' + 
						brightTagPixelPartner.controller.getPixmanElement('u26', btDataModel.dotomiToken, '&') +
						'u27=' + btDataModel.diID + '&';
						
					if( ( eventName == 'AddToBag' ) && btDataModel.addToBagSellPrice ) {
						btFrameUrl += 'u39=' + btDataModel.addToBagSellPrice + '&';
					}
					
					// Mobile vs desktop 
					btFrameUrl += 'u44=' + btDataModel.mobileVsDesktop + '&';

					// Referring URL
					btFrameUrl += 'u48=' + btDataModel.referringPageURL + '&';
					if( typeof btDataModel.currentVariantId != 'undefined' ) {
						btFrameUrl += 'u49=' + btDataModel.currentVariantId + '&';
					}

					// Add-to-bag price
					if( ( eventName == 'AddToBag' ) && btDataModel.addToBagProductSku ) {
						btFrameUrl += 'u51=' + btDataModel.addToBagProductSku + '&';
					}
					
					model.btFrameUrl = btFrameUrl;

					controller.updateBrightTagFrame();
				}
			}
		}
	}
	
	jQuery(document).on('brightTagPixelPartner:dataModelLoaded', function() {
		wcdBrightTagService.init();
	});
	
	// Find-it-now wrap
	if( location.pathname == '/browse/product.do' && window["merchLocationsManager"] != null ) {
		if( merchLocationsManager.view && merchLocationsManager.view.storeLocationsListOverlay && merchLocationsManager.view.storeLocationsListOverlay.open ) {
			merchLocationsManager.view.storeLocationsListOverlay.open = merchLocationsManager.view.storeLocationsListOverlay.open.wrap( function( originalMethod ) {
				originalMethod();
				wcdBrightTagService.controller.fireBrightTag('FindItNow');
			});
		}
	}
	
	// Reserve-in-store wrap
	if( location.pathname == '/browse/product.do' && window["reserveInStoreManager"] != null ) {
		if( reserveInStoreManager.api && reserveInStoreManager.api.open ) {
			reserveInStoreManager.api.open = reserveInStoreManager.api.open.wrap( function( originalMethod, parentContainer, triggeredBy, productImgUrl ) {
				originalMethod( parentContainer, triggeredBy, productImgUrl );
				wcdBrightTagService.controller.fireBrightTag('ReserveInStore');
			});
		}
	}
	
	// Add-to-bag wrap - outfit page
	if( location.pathname == '/browse/outfit.do' && window["outfitPage"] != null ) {
		outfitPage.addToBag = outfitPage.addToBag.wrap( function( originalMethod ) {
			originalMethod();
			wcdBrightTagService.controller.fireBrightTag('AddToBag','outfitPage');
		});
	}

	// Add-to-bag wrap - Onesite product page
	if (location.pathname == '/browse/product.do' && gap.pageProductData != null) {
		ko.postbox.subscribe('add-to-bag-success', function(data) {
			wcdBrightTagService.controller.fireNewBrightTag('AddToBag', data);
		});
	}
}

</script>

<script type="text/javascript">

//////////////////////////////////////////////////////////////////
// IE StyleTag to get around 31 tags consolidation script 1.0 //
// Jeff Held, Director - Web Content Development        //
//////////////////////////////////////////////////////////////////

var IEStyleTagConsolidator = function() {
  var myClientBrowserType = navigator.userAgent;
  if (myClientBrowserType.indexOf("MSIE") > 0) {
  var browserVersionString = myClientBrowserType.split("MSIE ")[1];
  var browserVersionNumber = browserVersionString.split(".")[0];
  browserVersionNumber = parseInt(browserVersionNumber);

  // do this only for IE 9 and below...
    if (browserVersionNumber < 10){
      //var styleArr = $$('body')[0].select("style");
      var styleArr = jQuery('style');

      var newStyleString = "";

      for (i=0; i< styleArr.length; i++) {
        var workingHTML = styleArr[i].innerHTML;
        newStyleString += workingHTML;
        styleArr[i].remove();
      }
      var mynewtag = "<style type='text/css'>" + newStyleString + "</style>";
      document.write(mynewtag);
    }
  }
}

IEStyleTagConsolidator();

</script>

<script type="text/javascript">

var triggermail_metricsLibrary = pixelManagementService.model.metricsLibrary;
  if (triggermail_metricsLibrary) {
	var triggermail_email_address = triggermail_metricsLibrary.common.userEmailEncrypt;;
} else {
	var triggermail_email_address = '';
}
var triggermail=triggermail||[];triggermail.load=function(a){
	var b=document.createElement("script");
	b.type="text/javascript";
	b.async=!0;
	b.src=("https:"===document.location.protocol?"https://":"http://")+"triggeredmail.appspot.com/triggermail.js/"+a+".js";
	a=document.getElementsByTagName("script")[0];
	a.parentNode.insertBefore(b,a)
};

jQuery(window).on('load',function() { 
	triggermail.load("gapinc");
	window.triggermail=triggermail;
});

</script>


<script type="text/javascript">
/* BLUECORE.JS FILE INSERTION FOR 3/30/16 */
if (location.pathname == "/checkout/orderConfirm.do") {
  var insertBluecorePurchasePixel = function() {
    var metricsLibrary = pixelManagementService.model.metricsLibrary;
    if (metricsLibrary) {
    	var bcIdCookie = gidLib.getCookie("customerId");
      if (bcIdCookie !== 0) {
        var bcId = bcIdCookie.replace(/[|]/g, '');
      } else {
        var bcId = "";
      }
      var bcTotal = metricsLibrary.order.orderTotal;
      var bcOrderId = metricsLibrary.order.orderId;
      var bcProducts = [];
      // Set order metrics
			// Quantity fix
			var orderProductList = ( metricsLibrary.order.productList ) ? metricsLibrary.order.productList : [];
			if (typeof(orderProductList != "undefined") && Object.isArray(orderProductList) && orderProductList.length != 0 && orderProductList[0].productBusinessId != "") {
				
				jQuery.each( orderProductList, function( idx, prod ) {
					bcProducts.push(prod.productBusinessId);
				});
			}
      var bluecorePixel = "<img id=\"bluecore_purchase_pixel\" height=\"1\" width=\"1\" style=\"border-style:none;\" alt=\"\" src=\"https://www.bluecore.com/api/track/purchase_pixel?token=gapinc&ci=ci_" + bcId + "&total=" + bcTotal + "&order_id=" + bcOrderId + "&product_ids=" + bcProducts + "\" />";
    	jQuery('body').append(bluecorePixel);
    } 
  }
  jQuery(window).on('load', function(){
  	insertBluecorePurchasePixel();
  });
}
</script>


</div>
<!-- END Content Item File: /content/0011/991/705/cn11991705.html -->

<!-- END - WCD Sitewide Container 20 -->

</div>

</body>
</html>




